<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
	<title>RO Version History</title>
</head>

<h2>Version history for the <a href="ROPython.html">RO python package</a></h2>

<h3>2005-01-28</h3>

<ul>
	<li>RO.Wdg: added isCurrent and severity support, as implemented in RO.Wdg.Label, to a number of additional widgets.
	<ul>
		<li>Added RO.Wdg.IsCurrentMixin, a set of mixin classes that allow widgets to have an isCurrent flag and display a suitable background color when not current. AutoIsCurrentMixin also allows input widgets to automatically display not-current when their value is not the default value (indicating that the user has changed something).
		<li>Added RO.Wdg.SeverityMixin, a set of mixin classes that allow widgets to have a state (one of RO.Constants.sevNormal, sevWarning or sevError) and display a suitable foreground color.
		<li>Enhanced the following classes to use these new mixin classes, including autoIsCurrent support where it makes sense (all but Label):
		<ul>
			<li>RO.Wdg.Checkbutton
			<li>RO.Wdg.Entry
			<li>RO.Wdg.Label (no new functionality, but see incompatible changes below)
			<li>RO.Wdg.OptionMenu
		</ul>
		<li>This change produced the following incompatible changes:
		<ul>
			<li>RO.Constants.st_Normal, st_Warning and st_Error renamed to sevNormal, sevWarning and sevError.
			<li>RO.Wdg.Label.set() now uses the argument "severity" instead of "state", and setState() was renamed to setSeverity().
			<li>RO.Wdg.StatusBar.setMsg() now uses the argument "severity" instead of "level".
		</ul>
	</ul>
	<li>RO.Wdg.ModalDialogBase major overhaul:
	<ul>
		<li>Combined the apply and validate methods into setResult.
		<li>The buttons method now receives the button's master as an argument. Buttons now have their own frame so you can pack or grid them as you prefer.
		<li>The buttons method is now called before the body method. Also, the default buttons (OK and Cancel) are now RO.Wdg.Buttons. These changes allow one to add help text to the default buttons in the body method (by setting their helpText attribute).
		<li>Modified to restore original focus and to generally work more like the example in Welch's Practical Programming in Tcl and Tk.
	</ul>
	<li>RO.ScriptRunner: added a basic debug mode which prints messages as the script runs and prevents commands from going out over the network.
	<li>RO.Wdg.WdgPrefs: added two new prefs to prefDict: "Active Background Color" and "Bad Active Background". These are automatically computed from "Background Color" and "Bad Background"; they should not be set by users.
	<p>
	<li>RO.Astro.Cnv.coordConv and RO.Astro.Sph.coordConv bug fix: mis-computing proper motion.
	<li>RO.Wdg.GrayImageViewer bug fix; was sorting the input data.
</ul>

<h3>2004-12-13</h3>

<ul>
	<li>RO.DS9 bug fix: the 2004-12-01 version was missing the code that waited for DS9 to launch.
	<li>RO.Wdg.GrayImageDispWdg enhanced, but still very preliminary.
	<li>RO.InputCont overhauled:
	<ul>
		<li>Made ContList a subclass of WdgCont to clean up the code.
		<li>WdgCont modified to be like ContList in the following ways:
		<ul>
			<li>restoreDefault and setValueDict now make just one callback,instead of one callback per input container.
			<li>Added removeCallback.
		</ul>
		<li>Renamed doEnable to setEnable to match RO.Wdg widgets.
		<li>Eliminated formatNow argument (it was not being used and was broken).
	</ul>
	<li>RO.Wdg.InputContFrame: added removeCallback; added callNow argument to addCallback.
	<li>RO.Wdg.OptionButton: renamed doEnable to setEnable to match RO.Wdg widgets. 
	<li>RO.Wdg.RadioButtonSet: renamed doEnable to setEnable to match RO.Wdg widgets. 
</ul>


<h3>2004-12-01</h3>
<ul>
	<li>RO.DS9
	<ul>
		<li>Bug fix in xpaset: if data does not end in \n, an \n is appended. This fixes an incompatily with older versions. Warning: dataFunc must supply a final \n if needed; fortunately when sending array data (the main use for which dataFunc was envisioned), a final \n does not appear to be needed.
		<li>Modified to use the subprocess module (one is supplied from RO.Future if your python is too old to have one).
	</ul>
	<li>RO.Future.subprocess added, so one can safely use subprocess with older versions of Python.
	<li>RO.Wdg.GrayImageDispWdg added: a preliminary implementation of a grayscale image viewer. It is not yet imported into RO.Wdg (that will be done once it is released).
	<li>RO.Wdg.OptionMenu: rearranged a few methods into alphabetical order.
	<li>RO.Wdg.ScrolledWdg: corrected a doc string error.
	<li>RO.Wdg.StatusConfigGridder: ConfigCat is now a class constant.
</ul>


<h3>2004-11-19</h3>
<ul>
	<li>Bug fix in RO.Comm.GetFile: was downloading binary files as text files. Fixed by explicitly sending TYPE I or TYPE A before any transfer.
</ul>

<h3>2004-11-18</h3>
<ul>
	<li>RO.Comm.GetFile renamed to RO.Comm.FTPGet; the UI changed because I started using ftplib instead of urllib to avoid a <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1067702&amp;group_id=5470&amp;atid=105470">bug in urllib</a>, and so only ftp is now supported.
	<li>RO.Wdg.Checkbutton: more sensible defaults; if showValue true then defaults to indicatoron false. If indicatoron false then defaults to padx = 5, pady = 2.
	<li>RO.Wdg.FTPLogWdg: getFile arguments overhauled to match the changes in RO.Comm.GetFile -&gt; RO.Comm.FTPGet mentioned above.
	<li>RO.Wdg.Label: renamed method _setStatus to setStatus (it is a useful public method).
</ul>

<h3>2004-11-04</h3>
<ul>
	<li>Improved RO.DS9 as follows:
	<ul>
		<li>Improved Mac compatibility (formerly required ds9 to be on the $PATH. Now DS9 first looks for ds9.app in ~/Applications and /Applications, then looks on the $PATH. Note: this means MacOS X users cannot put ds9.app "just anywhere" unless they also make a link from somewhere on their path to ds9.app/ds9.
		<li>Added Windows compatibility (but showArray is broken, probably due to a bug in ds9 3.0.3).
		<li>Changed order of indices for 3-d images from (y,x,z) to (z,y,x).
		<li>loadFITSFile no longer tests the file name's extension.
		<li>Eliminated showBinFile because I could not get it to work; this seems to be an bug or documentation bug in ds9
		<li>Bug fix: could only communicate with one ds9; fixed by specifying port=0 when opening ds9.
	</ul>
	<li>RO.Wdg.PatchedCanvas: the corrections applied by this module are no longer needed and have been disabled. This module now issues a deprecation warning when used, and really doesn't do anything else. Please use Tkinter.Canvas instead. 
</ul>

<h3>2004-10-13</h3>

<ul>
	<li>New modules:
	<ul>
		<li>RO.Comm.BrowseURL: opens a URL in the user's default web browser. The launching is done in a background thread.
		<li>RO.Constants: centralize widely used RO.Wdg constants. includes state constants have a prefix st_: st_Normal, st_Warning, st_Error.
		<li>RO.ScriptRunner and RO.Wdg.ScriptWdg: executes python scripts that can simply ask to wait for things to happen without tying up the event loop. This saves the script author from having to explicitly worry about asynchronous programming and writing a tangle of callback funcions. This has proven so useful that my application user interface now makes heavy use of it internally.
		<li>RO.Wdg.Text added to simplify read-only and contextual menu support.
		<li>RO.Wdg.TkUtil: implements colorOK and getWindowingSystem.
	</ul>
	
	<li>Other changes:
	<ul>
		<li>RO.Comm.TkSocket now works at the tcl level using fileevents and tcl sockets. This fixes a Windows incompatibility.
		<li>RO.CnvUtil: added asBoolOrNone
		<li>RO.InputCont.ContList: the callback gets the entire ContList, not just the changed container(s), and only one callback is issued for setValueDict and restoreDefault, rather than one callback per container.
		<li>RO.KeyDispatcher: many improvements, including: Pending commands are aborted when disconnected. Improved the multitasking while refreshing variables and checking for command timouts. Added _replyCmdVar method to unify the sending of replies to command variables. No longer issues regular KeyVariable updates while disconnected.
		<li>RO.Prefs.PrefVar: DirectoryPrefVar and FilePrefVar modified to have no text entry field. This solves a focus infinite loop issue: if the user typed in an invalid value and then tried to use Choose..., the dialog box would never get focus because the edit field would take it back. This left the user no choice but to close the dialog box.
		<li>RO.Wdg changes:
		<ul>
			<li>The contextual menu for editable RO.Wdg widgets now includes Cut, Copy, Clear, Paste and Select All (read-only widgets only have Copy).
			<li>RO.Wdg.CmdReplyWdg: added support for the command message callback to report an error. Renamed event callbacks with leading _ to indicate they are internal functions. Deleted the old and redundant method showCmd.
			<li>RO.Wdg.CtxMenu changes:
			<ul>
				<li>Renamed AddCtxMenu to addCtxMenu, since it is a function.
				<li>Changed ctxShowHelp so that if a file: URL with an anchor cannot be loaded, it tries the same URL with the anchor stripped. This works around a limitation in MacOS X and possibly other platforms. (Note: in some earlier versions of MacOS X the anchor was silently ignored, but in 10.3.3 the file is not found.)
				<li>CtxMenu no longer checks if the widget already has a contextual menu. This was done to allow RO.Wdg.StatusBar to inherit from CtxMenuMixin.
				<li>Help url base handling moved to new RO.Wdg.Constants module.
			</ul>
			<li>RO.Wdg.Entry:
			<ul>
				<li>DMSEntry: added unitsSuffix (for velocity).
				<li>Removed DirectoryEntry and FileEntry. Dir and file preferences no longer use entry widgets (see RO.Prefs item below), so they are no longer useful.
			</ul>
			<li>Renamed RO.Wdg.ScriptWindow to RO.Wdg.PythonWdg to better reflect what it does and to avoid confusion with the new RO.ScriptRunner and RO.Wdg.ScriptWdg modules. Also modified to add a contextual menu.
			<li>RO.Wdg.StatusBar changes:
			<ul>
				<li>No longer shows informational messages while executing commands. Just showns warnings, errors and completion. This was done to make the display easier to read.
				<li>Added a helpText argument. Warning: if specified, this prevents the status bar from trying to show help and entry errors for other widgets in the same toplevel. helpText is typically only specified if you have more than one status bar in a toplevel, in which case one status bar should show help (as usual) and the others should have helpText strings (and thus not show help).
				<li>Inherits from RO.Wdg.CtxMenu, making it easier to customize its contextual menu.
				<li>Message levels documented to use RO.Wdg.st_Normal, st_Warning and st_Error constants. The numerical values have not changed, so old code will still work.
			</ul>
			<li>Renamed RO.Wdg.PythonTk to RO.Wdg.PythonTk for the same reason.
			<li>RO.Wdg.Toplevel closeMode constants now have prefix tl_: tl_CloseDestroys, tl_CloseWithdraws, tl_CloseDisabled
			<li>RO.Wdg.WdgPrefs: handles internal RO.Wdg prefs. This combines code that was formerly in RO.Wdg.Label and RO.Wdg.CxtMenu.
		</ul>
	</ul>
	
	<li>Bug fixes:
	<ul>
		<li>RO.AddCallback: used sys and traceback for error reporting but did not import them.
		<li>RO.Comm.TkSocket: fixed documentation for setReadCallback.
		<li>RO.Comm.TCPConnection: fixed documentation for addReadCallback and addStateCallback.
		<li>RO.Entry.DMSEntry: units for relative dms fields had ' and " swapped.
		<li>RO.KeyVariable: major overhaul, including renaming KeyVar to CmdVar, adding abort capability and adding refreshOptional argument to KeyVarFactory.
		<li>RO.Wdg.RadiobuttonSet fixes:
		<ul>
			<li>set and setDefault could reject valid values and set invalid values because they were checking the new value against textList (the list of button names) not valueList (the list of button values).
			<li>The module was using importing RO.AddCallback but not importing it.
		</ul>
		<li>RO.Wdg.Toplevel fixes:
		<ul>
			<li>If wdgFunc fails, Toplevel propogates the error. As a result, ToplevelSet.createToplevel no longer creates an erroneous entry to a nonexistent toplevel if wdgFunc fails.
			<li>Toplevels that were distroyed were not handled well. Now getToplevel returns None if a toplevel has been destroyed (or does not exist). Also, a name can be reused if the old toplevel has been destroyed.
		</ul>
	</ul>
</ul>

<h3>2004-05-21</h3>

<ul>
	<li>Overhauled DS9 so it can talk to multiple copies (e.g. windows) by name. Added the ability to launch copies of ds9 automatically as needed. Added xpaget.
	<li>Fixed the following bugs (most found by pychecker):
	<ul>
		<li>RO.Comm.GetFile and RO.Wdg.StatusBar: used sys.stderr to report some errors but did not import sys.
		<li>RO.SeqUtil: flatten was called flattenList in a few places, breaking the flatten function.
		<li>RO.Wdg.CmdReplyWdg: did not create self.cmdText if helpURL not supplied.
		<li>RO.Wdg.Toplevel.ToplevelSet: referred to defGeomFixDict instead of defGeomVisDict
	</ul>	
</ul>

<h3>2004-04-30</h3>

<ul>
	<li>Added xpaset to DS9. This can be used to display regions, etc.
</ul>

<h3>2004-04-21</h3>

<ul>
	<li>Fixed some bugs in DS9.showArray (x and y axes sizes were swapped and it failed for any integral type except Int32) and made it more flexible (it will now accept any type of array so long as the data is in range of Int32).
</ul>

<h3>2004-04-16</h3>

<ul>
	<li>Added the DS9 module for displaying images in the ds9 image viewer.
</ul>

<h3>2004-02-06</h3>

<ul>
	<li>Combined RO.OS.walkDirs and RO.OS.expandPathList into RO.OS.findFiles.
	<li>Modified RO.procFiles to take advantage of RO.OS.findFiles. Arguments have changed.
	<li>Fixed a bug in RO.procFiles that caused specifying an output file to fail.
</ul>

<h3>2004-02-05</h3>

<ul>
	<li>Added functions to RO.OS including getPrefsDir.
	<li>Modified RO.KeyDispatcher.logMsg to make it easier to use; the changes are not backwards compatible.
	<li>Fixed a bug in RO.Prefs.DirectoryPrefVar that prevented the Choose... button from working.
</ul>

<pre>
Russell Owen
University of Washington
PO Box 351580
Seattle, WA 98195-1580
rowen u washington edu
     @ .          .
</pre>
</body>
</html>
