<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
	<title>RO Version History</title>
</head>

<h2>Version history for the <a href="ROPython.html">RO python package</a></h2>

<h3>2005-11-14 prerelease</h3>
<ul>
	<li>RO.PgSQLUtil renamed to RO.SQLUtil...
	<ul>
		<li>because all but one function should work with any DBAPI-2.0 database.
		<li>Renamed getLastInsertedID to getLastInsertedIDPgSQL.
		<li>Added getLastInsertedIDMySQL.
	</ul>
</ul>


<h3>2005-11-04</h3>
<ul>
	<li>RO.DS9.DS9Win.showArray: displaying an array in non-native byte order no longer requires copying the input array. Based on code by Tim Axelrod and Rick White.
</ul>

<h3>2005-10-31_2</h3>
<ul>
	<li>RO.DS9.DS9Win.showArray: bug fix: the input array would be altered if it was not in native byte order. Fixed by copying the input array if it is not in native byte order; this is a temporary fix until I figure out how to use the array unaltered. Thanks to Tim Axelrod for the bug report.
</ul>

<h3>2005-10-31</h3>
<ul>
	<li>RO.DS9.DS9Win.showArray bug fix: mis-handled arrays that were not in native byte order. Thanks to Tim Axelrod for the bug report.
</ul>


<h3>2005-10-13</h3>
<ul>
	<li>RO.DS9:
	<ul>
		<li>MacOS X:
		<ul>
			<li>Fully supports MacOS X version of ds9 (so long ds9.app is in one of the standard application directories). Thus darwin xpa is no longer necessary (though still usable).
			<li>Add /usr/local/bin to env var PATH and set env var DISPLAY, if necessary. This makes bundled apps more likely to work because they do not see the user's Terminal login modifications to env variables.
		</ul>
		<li>Windows: supports xpa installed in its default location (or installed in the same directory as ds9, which is still preferable for command-line use).
	</ul>
</ul>

<h3>2005-10-07</h3>
<ul>
	<li>RO.DS9: fixed Windows bugs introduced in 2005-09-30 release.
	<li>RO.OS
	<ul>
		<li>Fixed Windows bugs introduced in 2005-09-30 release.
		<li>Added inclNone argument to all getXXXDirs functions; inclNone defaults to False, giving the pre-2005-09-30 behavior.
		<li>getWinDirs modified to be compatible with py2exe (one needs trickery to import win32com.shell).
		<li>splitPath bug fix: on Windows the first element (disk letter) ended with a backslash.
	</ul>
</ul>

<h3>2005-09-30</h3>
<ul>
	<li>RO.DS9:
	<ul>
		<li>Corrected the instructions for installing xpa and ds9 on Mac and Windows.
		<li>It explicitly looks for xpaget and ds9 (on all platforms) and complains if it cannot find them. It then checks again each time you try to do anything (so you can install the components and keep working without reloading the module). Warning: this requires a "which" function on unix.
		<li>MacOS X and Windows: it now looks in the standard locations for applications (rather than typical locations on English systems).
		<li>MacOS X: DS9Win launches X11 if necessary.
		<li>Bug fix: used the warnings module without importing it.
	</ul>
	<li>RO.Prefs
	<ul>
		<li>PrefSet: Changed oldPrefNames argument to oldPrefInfo: one can now map old pref names to new pref names.
		<li>PrefsWdg:
		<ul>
			<li>Added getCategories and showCategory methods.
			<li>Renamed internal method selectCategory to _showSelectedCategory.	
		</ul>
	</ul>
	<li>RO.SeqUtil: added get.
	<li>RO.Wdg
	<ul>
		<li>Bindings: on Mac, added support for Command-Q = quit and Command-W = withdraw toplevel.
		<li>Checkbutton: If var supplied and defValue left None then the default value is the current value of var.
		<li>GrayImageViewerWdg: propagates left-mouse-button events (but still does not propagate middle or right mouse-button events, to avoid unwanted copy or paste), making it easier to write code that uses the "normal" mode.
	</ul>
</ul>

<h3>2005-09-07</h3>

<ul>
	<li>RO.Comm.TkSocket
	<ul>
		<li>Bug fix: an exception could occur in the read callback if the remote host closed the connection. Formerly the internal socket read callback tried to check the connection before calling the user's read callback, but that test could fail due to timing issues. Now the user's read callback is always called and read and readLine always return "" (or default for readLine) if the socket is closed&mdash;they never raise an exception.
		<li>Bug fix: leaked tcl functions.
	</ul>
	<li>RO.TkUtil.TclFunc: Removed useless __del__ from TclFunc and updated the documentation.
	<li>RO.Wdg.StatusBar: bug fix: if text=... was present in a command reply, the info was shown in parenthesis.
</ul>

<h3>2005-08-12</h3>

<ul>
	<li>RO.Alg.OrderedDict:
	<ul>
		<li>The following changes were kindly suggested by "bearophile":
		<ul>
			<li>Redefined copy to make subclassing easier and safer (in fact ReverseOrderedDict.copy was broken).
			<li><b>Incompatible Change</b>: Renamed checkIntegrity to _checkIntegrity.
			<li>Eliminated use of obsolete string module
		</ul>
		<li>Modified __repr__ to return a string that can recreate the OrderedDict. Note: this has an unfortunate side effect for ReverseOrderedDict: the items are shown in reversed order.
		<li>Added __str__ to return the traditional dict representation formerly returned by __repr__.
	</ul>
	<li>RO.Alg.ReverseOrderedDict: bug fix: copy returned an OrderedDict instead of a ReverseOrderedDict.
	<li>RO.Comm.
	<ul>
		<li>TCPConnection: added isDone and getProgress methods.
		<li>TkSocket
		<ul>
			<li><b>Incompatible Change</b>: Changed state constants from module constants to class constants.
			<li>Added class TkServerSocket.
			<li>Bug fix: TkSocket was not sending binary data through correctly.
		</ul>
	</ul>
	<li>RO.Prefs.PrefVar: changed help text for file, directory and sound prefs to the standard help text.
	<li>RO.Wdg.
	<ul>
		<li>Bindings: fixed bug in makeReadOnly: was not trapping button-release-2 (which pastes the selection, at least on unix).
		<li>ProgressBar: modified to handle min=max gracefully: it will display an empty bar instead of raising an exception.
		<li>StatusBar: bug fix: clear() reset the temporary message ID, which could cause clearTempMsg() to clear the wrong message.
	</ul>
	<li>Refactored the package to separate code and resource files. This will make it easier to package projects that use RO.
</ul>

<h3>2005-07-11</h3>

<ul>
	<li>RO.AddCallback: added method _removeAllCallbacks.
	<li>RO.Alg.OrderedDict:
	<ul>
		<li>Added index and insert methods
		<li>Bug fix: the pop method needed to be overridden.
	</ul>
	<li>RO.CanvasUtil: improved Spiral:
	<ul>
		<li>Keep track of geom ID for more reliable clear during redraw.
		<li>Use list comprehension to speed computation of coords.	
	</ul>
	<li>Plugged various potential memory leaks by making the following perform better cleanup when done (including removing references to callback functions):
	<ul>
		<li>RO.Comm.TkSocket
		<li>RO.KeyVariable.CmdVar
		<li>RO.Comm.FTPGet
		<li>RO.Comm.FTPLogWdg
	</ul>
	<li>RO.Comm.FTPGet is deprecated (use the new RO.Comm.HTTPGet, instead, if possible). I do not intend to update it any further. However, it did receive some changes for this release:
	<ul>
		<li>Eliminated callback function support. Callbacks were not Tk safe and that was a nasty trap. Note that RO.Wdg.FTPLogWdg.getFile supports Tk-safe callbacks.
		<li>Fixed a bug that could cause an existing file to get deleted even if the overwrite argument was false.
	</ul>
	<li>RO.Comm.HTTPGet added. This downloads files using the http protocol. It uses tcl libraries to perform the download and thus is nicely integrated into the tk event loop (unlike RO.Comm.FTPGet, which is now deprecated).
	<li>RO.KeyDispatcher:
	<ul>
		<li>Modified logMsg to take severity instead of typeChar.
		<li>Bug fix: _isConnected was not getting set properly if connection was omitted. It may also have not been set correctly for real connections in special cases.
		<li>Fixed a typo in the test code. It works again.
	</ul>
	<li>RO.KeyVariable:
	<ul>
		<li>Added getSeverity method to KeyVar and CmdVar.
		<li>Added getCmdrCmdID method to KeyVar.
		<li>Changed CmdVar.replies to CmdVar.lastReply. This was to avoid wasting memory; some commands may run for a very long time.
		<li>Modified TypeDict; 2nd element of each value is now severity (one of RO.Constants.sev...) instead of a logger category.
	</ul>
	<li>RO.OS:
	<ul>
		<li>Added getDocsDir
		<li>Changed getAppSuppDirs to return None for unknown dirs (so you can tell which is user-specific and which one is shared).
		<li>Removed Mac-specific doCreate argument for getAppSuppDirs and getPrefsDir.
	</ul>
	<li>RO.Prefs: improved the file chooser for FilePrefVar so that it does a better job of starting out in the right place.
	<li>RO.Prefs.WdgPrefs: bug fix: was using == for assignment in one location (caught by pychecker).
	<li>RO.ScriptRunner: changed default cmdStatusBar from statusBar to no bar.
	<li>RO.SeqUtil: added isCollection, isString and asSet.
	<li>RO.Wdg.HTTPLogWdg added. This shows the state of RO.Comm.HTTPGet downloads and includes method getFile to initiate such a transfer.
	<li>RO.Wdg.TkUtil moved to RO.TkUtil to reduce the chance of import loops.
	<li>RO.Wdg.Bindings: Modified stdBindings to use TkUtil. Also, may have improved stdBindings's disabling of &lt;&lt;Paste-Selection&gt;&gt; on Windows.
	<li>RO.Wdg.Button: added severity support. However, it does not work on MacOS X Aqua.
	<li>RO.Wdg.Checkbutton: Modified default padding when indicatoron is false so it looks better under Tk 8.4.9, especially on Aqua (something changed in Tk at some point such that the old aqua margins were too small).
	<li>RO.Wdg.Entry:
	<ul>
		<li>Modify to check value on getString, getStringOrDefault, getNum and getNumOrDefault. Thus these methods will now raise an exception if the value is invalid (e.g. out of range for numeric values).
		<li>DMSEntry, IntEntry and FloatEntry (changes made in parent class _NumEntry):
		<ul>
			<li>Modified getNum to return if empty (thus it acts like getString instead of getStringOrDefault) or raise an exception if the current value is invalid.
			<li>Added getNumOrDefault: return the default if the field is empty (like getStringOrDefault and the old getNum), or raise an exception if the current value is invalid (like the new getNum but not like the old getNum).
			<li>Mis-handled None as a limit. It might test minLim &lt; maxLim even if one or both were None and it would always reject "-" if minLim was None.
			<li>Modified to complain if "-" isn't the first character if maxVal &lt; 0.
		</ul>
		<li>Modified _checkVar (which checks each character as it is entered) to clear the field if both the new value and the previous value are invalid (based on checking partial value). This should only happen if the validity criterion (such as range for numeric entry fields) is changed while the user is entering data.
		<li>Modified try/except blocks to not swallow system exit and keyboard interrupt.
	</ul>
	<li>RO.Wdg.FTPLogWdg is deprecated (use the new RO.Wdg.HTTPLogWdg, instead, if possible). I do not intend to update it any further. However, it did receive some changes for this release:
	<ul>
		<li>Bug fix: was not trimming excess log entries correctly.
		<li>Modified to auto-scroll only when last entry selected (or no entry selected) rather than basing it on scroll position.
	</ul>
	<li>RO.Wdg.GrayImageDispWdg:
	<ul>
		<li>Added helpURL argument.
		<li>Added showMsg method.
		<li>Increased maximum zoom to 10x (and you can make it larger if you like, though you'll have to edit the file).
		<li>Improved use of memory while zooming.
		<li>Added memory exception handling.
		<li>Changed level mode to work on first click.
		<li>Improved mode handling with no image. The mode icon is now illuminated and the zoom frame appears but nothing else happens.
		<li>Bug fix: could not display images that were all the same intensity.
		<li>Bug fix: level mode set incorrect levels if there was a border around the canvas.
	</ul>
	<li>RO.Wdg.HTTPGetWdg added. This includes a getFile method to initiate downloading files to disk via http, and displays the status of such downloads.
	<li>RO.Wdg.InputCont: Bug fix: was referencing TclError, not Tkinter.TclError (caught by pychecker).
	<li>RO.Wdg.OptionPanelControl: modified to use RO.Wdg.Checkbutton's default padding (which is now sensible for unix and Aqua).
	<li>RO.Wdg.ScriptWdg: documented change of default cmdStatusBar from statusBar to no bar.
.	<li>RO.Wdg.StatusBar:
	<ul>
		<li>Added cmdSummary argument to doCmd.
		<li>Modified to use severity built into RO.Wdg.EntryWdg (prefs no longer need color prefs and the code is simpler).
		<li>Modified command output to ignore info messages unless they contain a "Text" keyword.
	</ul>
	<li>RO.Wdg.StatusConfigGridder: bug fix: gridWdg mis-set nextCol if cfgWdg False or None. Also improved error message for units and cfgUnits being the same widget.
	<li>RO.Wdg.TkUtil: added getButtonNumbers to work around a tk misfeature: buttons are numbered 1, 3, 2 on MacOS X Aqua and 1, 2, 3 on Unix/X11 and Windows.
	<li>Cleaned up indentation oddities in many files.
	<li>Changed old-style classes to new-style classes (inherit from object) as follows: RO.AddCallback:BaseMixin; RO.Alg.IDGen, MatchList and MultiListIter; RO.CanvasUtil.Spiral; RO.CnvUtil.StrCnv and StrCnvNoCase; RO.Comm.TCPConnect.TCPConnect; RO.Comm.TkSocket.TkSocket and NullSocket; RO.KeyDispatcher.KeyDispatcher, NullLogger and StdErrLogger; RO.KeyVariable.CmdVar and KeyVarFactory; RO.PVT; RO.PgSQLUtil.FieldDescr; RO.Prefs.PrefEditor; RO.Prefs.PrefVar.PrefVar, PrefSet and ColorUpdate; RO.Wdg.CtxMenu; RO.Wdg.GrayImageDispWdg.Annotation; RO.Wdg.Gridder; RO.InputCont.BasicFmt, BasicContListFmt and VMSQualFmt; RO.Wdg.IsCurrentMixin and AutoIsCurrentMixin; RO.Wdg.SeverityMixin; RO.Wdg.Sound.BellPlay, SoundPlay and NoPlay; RO.Wdg.Toplevel.ToplevelSet; RO.Wdg.WdgPrefs.WdgPrefs.
	<li>Fixed nonfunctional assert statements (assert (cond) -> assert cond) in:
	<ul>
		<li>RO.Alg.OrderedDict test code
		<li>RO.PgSQLUtil.insertRow
		<li>RO.SeqUtil test code
		<li>RO.StringUtil.splitDMSStr
	</ul>
</ul>

<h3>2005-05-24</h3>

<ul>
	<li>RO.CnvUtil: added StrCnvNoCase.
	<li>RO.Comm.FTPGet: modified to not check for "file exists" until download starts; the old behavior made error checking too messy.
	<li>RO.DS9: added doRaise argument to xpaget, xpaset and DS9Win; the default is False so the default behavior has changed.
	<li>RO.InputCont.BasicFmt: removed the obsolete omitHidden argument that was being ignored. Use blankIfDisabled, instead, or write your own format function.
	<li>RO.Wdg.Checkbutton: bug fix: setBool ignored isCurrent and severity.
	<li>Ro.Wdg.Entry: improved the default appearance and behavior of read-only widgets. The insertion cursor is now hidden and there is no longer any special highlighting to indicate that the widget has focus.
</ul>

<h3>2005-04-26</h3>

<ul>
	<li>RO.Alg: added ReverseOrderedDict.
	<li>RO.Wdg.FTPLogWdg: added support for callbacks to getFile.
	<li>RO.Wdg.GrayImageDispWdg (still in progress but now quite usable). Major improvements! Too extensive to list here; see the doc string.
	<li>RO.Wdg.RadiobuttonSet: added support for bitmaps.
	<li>Added directory RO.Wdg.Resources to contain bitmaps used by RO.Wdg.GrayImageDispWdg. Since these are not python files you may find you have to do some extra steps to package executables that use the RO package.
	<li>RO.procFiles:
	<ul>
		<li>Continue on error; report traceback unless RuntimeError.
		<li>Removed use of (deprecated) xreadlines in docs.
		<li>bug fix: was setting outPath to "" instead of outDir if outFile="".
	</ul>
	<p>
	<li>RO.Astro.Cnv.CoordConv: bug fix: conversions requiring a App Topo<->Observed step were broken (thanks to Emmanouil Angelakis for the report).
	<li>RO.KeyVariable: bug fix: in an error occurred early in instantiation, formatting the exception message failed because there was no self.actor.

</ul>

<h3>2005-01-28</h3>

<ul>
	<li>RO.Wdg: added isCurrent and severity support, as implemented in RO.Wdg.Label, to a number of additional widgets.
	<ul>
		<li>Added RO.Wdg.IsCurrentMixin, a set of mixin classes that allow widgets to have an isCurrent flag and display a suitable background color when not current. AutoIsCurrentMixin also allows input widgets to automatically display not-current when their value is not the default value (indicating that the user has changed something).
		<li>Added RO.Wdg.SeverityMixin, a set of mixin classes that allow widgets to have a state (one of RO.Constants.sevNormal, sevWarning or sevError) and display a suitable foreground color.
		<li>Enhanced the following classes to use these new mixin classes, including autoIsCurrent support where it makes sense (all but Label):
		<ul>
			<li>RO.Wdg.Checkbutton
			<li>RO.Wdg.Entry
			<li>RO.Wdg.Label (no new functionality, but see incompatible changes below)
			<li>RO.Wdg.OptionMenu
		</ul>
		<li>This change produced the following incompatible changes:
		<ul>
			<li>RO.Constants.st_Normal, st_Warning and st_Error renamed to sevNormal, sevWarning and sevError.
			<li>RO.Wdg.Label.set() now uses the argument "severity" instead of "state", and setState() was renamed to setSeverity().
			<li>RO.Wdg.StatusBar.setMsg() now uses the argument "severity" instead of "level".
		</ul>
	</ul>
	<li>RO.Wdg.ModalDialogBase major overhaul:
	<ul>
		<li>Combined the apply and validate methods into setResult.
		<li>The buttons method now receives the button's master as an argument. Buttons now have their own frame so you can pack or grid them as you prefer.
		<li>The buttons method is now called before the body method. Also, the default buttons (OK and Cancel) are now RO.Wdg.Buttons. These changes allow one to add help text to the default buttons in the body method (by setting their helpText attribute).
		<li>Modified to restore original focus and to generally work more like the example in Welch's Practical Programming in Tcl and Tk.
	</ul>
	<li>RO.ScriptRunner: added a basic debug mode which prints messages as the script runs and prevents commands from going out over the network.
	<li>RO.Wdg.WdgPrefs: added two new prefs to prefDict: "Active Background Color" and "Bad Active Background". These are automatically computed from "Background Color" and "Bad Background"; they should not be set by users.
	<p>
	<li>RO.Astro.Cnv.coordConv and RO.Astro.Sph.coordConv bug fix: mis-computing proper motion.
	<li>RO.Wdg.GrayImageViewer bug fix; was sorting the input data.
</ul>

<h3>2004-12-13</h3>

<ul>
	<li>RO.DS9 bug fix: the 2004-12-01 version was missing the code that waited for DS9 to launch.
	<li>RO.Wdg.GrayImageDispWdg enhanced, but still very preliminary.
	<li>RO.InputCont overhauled:
	<ul>
		<li>Made ContList a subclass of WdgCont to clean up the code.
		<li>WdgCont modified to be like ContList in the following ways:
		<ul>
			<li>restoreDefault and setValueDict now make just one callback,instead of one callback per input container.
			<li>Added removeCallback.
		</ul>
		<li>Renamed doEnable to setEnable to match RO.Wdg widgets.
		<li>Eliminated formatNow argument (it was not being used and was broken).
	</ul>
	<li>RO.Wdg.InputContFrame: added removeCallback; added callNow argument to addCallback.
	<li>RO.Wdg.OptionButton: renamed doEnable to setEnable to match RO.Wdg widgets. 
	<li>RO.Wdg.RadioButtonSet: renamed doEnable to setEnable to match RO.Wdg widgets. 
</ul>


<h3>2004-12-01</h3>
<ul>
	<li>RO.DS9
	<ul>
		<li>Bug fix in xpaset: if data does not end in \n, an \n is appended. This fixes an incompatily with older versions. Warning: dataFunc must supply a final \n if needed; fortunately when sending array data (the main use for which dataFunc was envisioned), a final \n does not appear to be needed.
		<li>Modified to use the subprocess module (one is supplied from RO.Future if your python is too old to have one).
	</ul>
	<li>RO.Future.subprocess added, so one can safely use subprocess with older versions of Python.
	<li>RO.Wdg.GrayImageDispWdg added: a preliminary implementation of a grayscale image viewer. It is not yet imported into RO.Wdg (that will be done once it is released).
	<li>RO.Wdg.OptionMenu: rearranged a few methods into alphabetical order.
	<li>RO.Wdg.ScrolledWdg: corrected a doc string error.
	<li>RO.Wdg.StatusConfigGridder: ConfigCat is now a class constant.
</ul>


<h3>2004-11-19</h3>
<ul>
	<li>Bug fix in RO.Comm.GetFile: was downloading binary files as text files. Fixed by explicitly sending TYPE I or TYPE A before any transfer.
</ul>

<h3>2004-11-18</h3>
<ul>
	<li>RO.Comm.GetFile renamed to RO.Comm.FTPGet; the UI changed because I started using ftplib instead of urllib to avoid a <a href="http://sourceforge.net/tracker/index.php?func=detail&amp;aid=1067702&amp;group_id=5470&amp;atid=105470">bug in urllib</a>, and so only ftp is now supported.
	<li>RO.Wdg.Checkbutton: more sensible defaults; if showValue true then defaults to indicatoron false. If indicatoron false then defaults to padx = 5, pady = 2.
	<li>RO.Wdg.FTPLogWdg: getFile arguments overhauled to match the changes in RO.Comm.GetFile -&gt; RO.Comm.FTPGet mentioned above.
	<li>RO.Wdg.Label: renamed method _setStatus to setStatus (it is a useful public method).
</ul>

<h3>2004-11-04</h3>
<ul>
	<li>Improved RO.DS9 as follows:
	<ul>
		<li>Improved Mac compatibility (formerly required ds9 to be on the $PATH. Now DS9 first looks for ds9.app in ~/Applications and /Applications, then looks on the $PATH. Note: this means MacOS X users cannot put ds9.app "just anywhere" unless they also make a link from somewhere on their path to ds9.app/ds9.
		<li>Added Windows compatibility (but showArray is broken, probably due to a bug in ds9 3.0.3).
		<li>Changed order of indices for 3-d images from (y,x,z) to (z,y,x).
		<li>loadFITSFile no longer tests the file name's extension.
		<li>Eliminated showBinFile because I could not get it to work; this seems to be an bug or documentation bug in ds9
		<li>Bug fix: could only communicate with one ds9; fixed by specifying port=0 when opening ds9.
	</ul>
	<li>RO.Wdg.PatchedCanvas: the corrections applied by this module are no longer needed and have been disabled. This module now issues a deprecation warning when used, and really doesn't do anything else. Please use Tkinter.Canvas instead. 
</ul>

<h3>2004-10-13</h3>

<ul>
	<li>New modules:
	<ul>
		<li>RO.Comm.BrowseURL: opens a URL in the user's default web browser. The launching is done in a background thread.
		<li>RO.Constants: centralize widely used RO.Wdg constants. includes state constants have a prefix st_: st_Normal, st_Warning, st_Error.
		<li>RO.ScriptRunner and RO.Wdg.ScriptWdg: executes python scripts that can simply ask to wait for things to happen without tying up the event loop. This saves the script author from having to explicitly worry about asynchronous programming and writing a tangle of callback funcions. This has proven so useful that my application user interface now makes heavy use of it internally.
		<li>RO.Wdg.Text added to simplify read-only and contextual menu support.
		<li>RO.Wdg.TkUtil: implements colorOK and getWindowingSystem.
	</ul>
	
	<li>Other changes:
	<ul>
		<li>RO.Comm.TkSocket now works at the tcl level using fileevents and tcl sockets. This fixes a Windows incompatibility.
		<li>RO.CnvUtil: added asBoolOrNone
		<li>RO.InputCont.ContList: the callback gets the entire ContList, not just the changed container(s), and only one callback is issued for setValueDict and restoreDefault, rather than one callback per container.
		<li>RO.KeyDispatcher: many improvements, including: Pending commands are aborted when disconnected. Improved the multitasking while refreshing variables and checking for command timouts. Added _replyCmdVar method to unify the sending of replies to command variables. No longer issues regular KeyVariable updates while disconnected.
		<li>RO.Prefs.PrefVar: DirectoryPrefVar and FilePrefVar modified to have no text entry field. This solves a focus infinite loop issue: if the user typed in an invalid value and then tried to use Choose..., the dialog box would never get focus because the edit field would take it back. This left the user no choice but to close the dialog box.
		<li>RO.Wdg changes:
		<ul>
			<li>The contextual menu for editable RO.Wdg widgets now includes Cut, Copy, Clear, Paste and Select All (read-only widgets only have Copy).
			<li>RO.Wdg.CmdReplyWdg: added support for the command message callback to report an error. Renamed event callbacks with leading _ to indicate they are internal functions. Deleted the old and redundant method showCmd.
			<li>RO.Wdg.CtxMenu changes:
			<ul>
				<li>Renamed AddCtxMenu to addCtxMenu, since it is a function.
				<li>Changed ctxShowHelp so that if a file: URL with an anchor cannot be loaded, it tries the same URL with the anchor stripped. This works around a limitation in MacOS X and possibly other platforms. (Note: in some earlier versions of MacOS X the anchor was silently ignored, but in 10.3.3 the file is not found.)
				<li>CtxMenu no longer checks if the widget already has a contextual menu. This was done to allow RO.Wdg.StatusBar to inherit from CtxMenuMixin.
				<li>Help url base handling moved to new RO.Wdg.Constants module.
			</ul>
			<li>RO.Wdg.Entry:
			<ul>
				<li>DMSEntry: added unitsSuffix (for velocity).
				<li>Removed DirectoryEntry and FileEntry. Dir and file preferences no longer use entry widgets (see RO.Prefs item below), so they are no longer useful.
			</ul>
			<li>Renamed RO.Wdg.ScriptWindow to RO.Wdg.PythonWdg to better reflect what it does and to avoid confusion with the new RO.ScriptRunner and RO.Wdg.ScriptWdg modules. Also modified to add a contextual menu.
			<li>RO.Wdg.StatusBar changes:
			<ul>
				<li>No longer shows informational messages while executing commands. Just showns warnings, errors and completion. This was done to make the display easier to read.
				<li>Added a helpText argument. Warning: if specified, this prevents the status bar from trying to show help and entry errors for other widgets in the same toplevel. helpText is typically only specified if you have more than one status bar in a toplevel, in which case one status bar should show help (as usual) and the others should have helpText strings (and thus not show help).
				<li>Inherits from RO.Wdg.CtxMenu, making it easier to customize its contextual menu.
				<li>Message levels documented to use RO.Wdg.st_Normal, st_Warning and st_Error constants. The numerical values have not changed, so old code will still work.
			</ul>
			<li>Renamed RO.Wdg.PythonTk to RO.Wdg.PythonTk for the same reason.
			<li>RO.Wdg.Toplevel closeMode constants now have prefix tl_: tl_CloseDestroys, tl_CloseWithdraws, tl_CloseDisabled
			<li>RO.Wdg.WdgPrefs: handles internal RO.Wdg prefs. This combines code that was formerly in RO.Wdg.Label and RO.Wdg.CxtMenu.
		</ul>
	</ul>
	
	<li>Bug fixes:
	<ul>
		<li>RO.AddCallback: used sys and traceback for error reporting but did not import them.
		<li>RO.Comm.TkSocket: fixed documentation for setReadCallback.
		<li>RO.Comm.TCPConnection: fixed documentation for addReadCallback and addStateCallback.
		<li>RO.Entry.DMSEntry: units for relative dms fields had ' and " swapped.
		<li>RO.KeyVariable: major overhaul, including renaming KeyVar to CmdVar, adding abort capability and adding refreshOptional argument to KeyVarFactory.
		<li>RO.Wdg.RadiobuttonSet fixes:
		<ul>
			<li>set and setDefault could reject valid values and set invalid values because they were checking the new value against textList (the list of button names) not valueList (the list of button values).
			<li>The module was using importing RO.AddCallback but not importing it.
		</ul>
		<li>RO.Wdg.Toplevel fixes:
		<ul>
			<li>If wdgFunc fails, Toplevel propogates the error. As a result, ToplevelSet.createToplevel no longer creates an erroneous entry to a nonexistent toplevel if wdgFunc fails.
			<li>Toplevels that were distroyed were not handled well. Now getToplevel returns None if a toplevel has been destroyed (or does not exist). Also, a name can be reused if the old toplevel has been destroyed.
		</ul>
	</ul>
</ul>

<h3>2004-05-21</h3>

<ul>
	<li>Overhauled DS9 so it can talk to multiple copies (e.g. windows) by name. Added the ability to launch copies of ds9 automatically as needed. Added xpaget.
	<li>Fixed the following bugs (most found by pychecker):
	<ul>
		<li>RO.Comm.GetFile and RO.Wdg.StatusBar: used sys.stderr to report some errors but did not import sys.
		<li>RO.SeqUtil: flatten was called flattenList in a few places, breaking the flatten function.
		<li>RO.Wdg.CmdReplyWdg: did not create self.cmdText if helpURL not supplied.
		<li>RO.Wdg.Toplevel.ToplevelSet: referred to defGeomFixDict instead of defGeomVisDict
	</ul>	
</ul>

<h3>2004-04-30</h3>

<ul>
	<li>Added xpaset to DS9. This can be used to display regions, etc.
</ul>

<h3>2004-04-21</h3>

<ul>
	<li>Fixed some bugs in DS9.showArray (x and y axes sizes were swapped and it failed for any integral type except Int32) and made it more flexible (it will now accept any type of array so long as the data is in range of Int32).
</ul>

<h3>2004-04-16</h3>

<ul>
	<li>Added the DS9 module for displaying images in the ds9 image viewer.
</ul>

<h3>2004-02-06</h3>

<ul>
	<li>Combined RO.OS.walkDirs and RO.OS.expandPathList into RO.OS.findFiles.
	<li>Modified RO.procFiles to take advantage of RO.OS.findFiles. Arguments have changed.
	<li>Fixed a bug in RO.procFiles that caused specifying an output file to fail.
</ul>

<h3>2004-02-05</h3>

<ul>
	<li>Added functions to RO.OS including getPrefsDir.
	<li>Modified RO.KeyDispatcher.logMsg to make it easier to use; the changes are not backwards compatible.
	<li>Fixed a bug in RO.Prefs.DirectoryPrefVar that prevented the Choose... button from working.
</ul>

<pre>
Russell Owen
University of Washington
PO Box 351580
Seattle, WA 98195-1580
rowen u washington edu
     @ .          .
</pre>
</body>
</html>
