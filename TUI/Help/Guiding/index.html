<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<title>TUI:Guiding</title>
</head>
<body>

<h2><a href="../index.html">TUI</a>:Guiding</h2>

<p>Guiding is controlled by windows in the Guide menu:</p>

<ul>
	<li>GCam: the NA2 guider. Note that the filterwheel and focus are not yet supported. Support is planned, but it requires a new actor in the hub.
	<li><a href="ECam.html">ECam</a>: the Echelle slitviewer.
	<li>(DCam: the DIS slitviewer is not yet supported. Support is planned, but will require a new actor in the hub.)
</ul>

<p>All of these windows work pretty much the same way, though slit viewers have a few extra controls that the NA2 guider does not (e.g. to guide on whatever is at the boresight) and there are a few device-specific controls for each. Each window downloads images, displays images and allows you to auto guide or (in the case of slit viewers) manually guide.

<p>Please take the time to familiarize yourself with the guide window. It has more hidden functionality than other TUI windows.

<h2>Setup</h2>

<p>Before you start messing with the guide window, please do the following:
<ul>
	<li>Make sure a "Save To" directory is set in the Exposures preference. This is necessary for guide images to be downloaded and displayed.
	
	<li>Buy a 3-button mouse (if you don't already have them). They are cheap and useful. The guide window makes heavy use of the 2nd and 3rd buttons.
</ul>

<h2>Download</h2>

<p>Guide images are automtically downloaded whenever the appropriate guide window is open. (The images are automatically displayed if the "Current" box is checked, but they are downloaded in any case.)

<p>To avoid filling up your disk, only the most recent 100 images are saved and all images should be deleted when you quit TUI. However, guide images may be left on your disk if TUI is killed or quits unexpectedly. <b>Please check your Save To directory every once in awhile to make sure no junk is building up in there.</b>

<h2>The Guide Window</h2>

<p>This section describes the elements of the guide window.

<h3><a name="GuidingStatus"></a>Row 1: Guiding Status</h3>

<p>The top row shows the current state of guiding.

<h3><a name="HistoryControls"></a>Row 2: History Controls</h3>

<p>Allows you to select an image from the history and to show the name of the current image:
<ul>
	<li>The left and right arrows allow you to see previous images.
	<li>The "Current" checkbox displays the current image when checked. It is automatically unchecked if you go back in history so that a new guide image won't overwrite your display. When you are done looking at old images, simply check it again to keep current.
	<li>The rest of the field shows the name of the displayed image.
</ul>

<h3><a name="Image"></a><a name="ImageControls"></a>Row 3: Image Controls</h3>

<p>Controls how you look at an image: intensity scaling and zoom.
<ul>
	<li><b>Scaling Function menu</b> sets the image scaling function. Your choices range from Linear to very nonlinear.
	<li><a name="DataRange"></a><b>Data Range menu</b> adjusts the range of intensities displayed. 99% means that the central 99% of scaled intensity values are shown in the available shades of gray. All dimmer value are black and all brighter values are white. You can fine-tune the data range by varying the <a href="#ContrastMode">black and white levels</a>.
	<li>Mode icons:
	<ul>
		<li><a name="SelectMode"></a><b>Plus Icon</b> selection mode:
		<ul>
			<li>Click near the center of a centroid circle to select an existing star. Click away from the center of any circle to select nothing.
			<li>Click and drag about a star to centroid a star. The pixels in the box will be used to compute the centroid and that centroid is selected. In detail: the biggest circle that fits in your box is used, and that circle is shifted as needed so as to be centered on the star.
			<li>Note: if you don't like the radius used for an existing centroid, feel free to centroid the star again.
			<li>Control-Click to move the telescope such that point you click on is centered on the boresight and take a new image. This only works for a slit viewer and only if the image is current (i.e. if the telescope has not been moved since this image was taken).
		</ul>

		<li><a name="Contrast"></a><b>Contrast icon</b> (middle mouse button): adjust the black and white levels. The left/right position of the mouse controls the black level and the up/down position controls the white level. Double-click to restore the default levels. This is a fine adjustment beyond that provided by the <a href="#DataRange">data range menu</a>. The middle mouse button will temporarily select this mode.

		<li><a name="ZoomMode"><a/><b>Zoom icon</b> (right mouse button): adjust the zoom. Click and drag from the upper left to the lower right to zoom in on the region you select. Drag in the opposite direction to zoom out (zoom out further for a smaller box). Double-click to see the entire image. The right mouse button will temporarily select this mode.
	</ul>
	<p>Typically you leave the "plus" icon selected and temporarily choose the other two modes by clicking the middle or right mouse button. But you may permanently change modes by clicking an icon.
	<li><b>Zoom factor</b> shows the current zoom factor. You may manually set a zoom factor by typing the value and typing &lt;return&gt;.
</ul>

<h3><a name="ImagePane"></a>Row 4: Image Pane</h3>

<p>The middle area shows the guide image. Typically you will also see circles around stars that have been centroided. Further annotations are planned (for boresight and slit) but are not yet implemented.

<p>All centroids are shown as circles; the radius of the circle is the radius of the data used to perform the centroid. Green circles shown results from "findstars" (which have radii that are automatically determined) and yellow circles show other centroids.

<p>The currently selected star (if any) is shown as an "X". Its color matches the color of the centroid circle.

<h3><a name="DataPane"></a>Row 5: Data Pane</h3>

<p>Data about the image at the current cursor and the selected star (if any).

<h3><a name="AcquisitionControls"></a>Row 6: Acquisition Controls</h3>

<p>Exposure time, bin factor, etc. are all controlled here. When a new image arrives the controls update to show the data for that image. If you change a value the control's background goes pink to indicate you have changed it. The modified value will be applied if you command an exposure.

<ul>
	<li><b>Exp Time</b> exposure time, in seconds.
	<li><b>Bin</b> bin factor
	<li><b>Thresh</b> star finding threshold. A pixel is considered to contain signal if its value is at least thresh &sigma; above the median. If you change thresh and type &lt;return&gt; a new find stars is performed
</ul>

<h3>Row 7: Device-Specific Controls</h3>

<p>This row (if present) contains controls specific to the current guide camera. See the TUI documentation specific to that guide camera for more information.

<h3><a name="StatusBar"></a>Row 8: Status Bar</h3>

<p>The status bar shows help for whatever control is under the mouse and also shows the state of the current or most recent command.

<h3><a name="GuidingControls"></a>Last Row: Guiding Controls</h3>

<ul>
	<li><b>Expose</b> take a new exposure.
	<li><b>Guide</b> start guiding on the selected star. This button will be grayed out if there is no selected star and it will fail if the image is not current (i.e. if the telescope has been moved since the image was taken).
	<li><b>Guide on Boresight</b> (slitviewers only): guide on the star near the boresight. For this to work, a star must already be very near the boresight.
	<li><b>Stop Guiding</b> stop guiding.
	<li><b>DS9</b> display the current image in the ds9 image viewer (if available).
</ul>

<p>In addition, if you control-click on a pixel in <a href="#SelectMode">select mode</a>, the telescope is immediately moves to center that pixel on the boresight and a new slitviewer image is taken. This is the handy way to set up guiding on a slitviewer: control-click to center the object, make sure is is centroided (centroid it manually if necessary) and click "Guide On Boresight". Note: command-click only works for slit viewers and only if the image is current.

</body>
</html>
