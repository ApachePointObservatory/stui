<HTML><!--This file created 11/13/02 10:21 AM by Claris Home Page version 3.0--><HEAD>   <TITLE>TCC Commands</TITLE>   <META NAME=GENERATOR CONTENT="Claris Home Page 3.0">   <X-CLARIS-WINDOW TOP=44 BOTTOM=859 LEFT=4 RIGHT=534>   <X-CLARIS-TAGVIEW MODE=minimal></HEAD><BODY><H1>TCC Commands</H1><P>For version 2.6.8. Manual last revised November 13, 2002.</P><UL>   <LI><A HREF="#Introduction">Introduction</A></LI>      <LI><A HREF="#InputRules">Input Rules</A></LI>      <LI><A HREF="#StandardParameters">Standard Parameters</A></LI>      <LI><A HREF="#StandardQualifiers">Standard Qualifiers</A></LI>      <LI><A HREF="#History">History</A></LI>      <LI><A HREF="#Commands">Commands</A>      <UL>      <LI><A HREF="#Axis">Axis</A></LI>            <LI><A HREF="#Broadcast">Broadcast</A></LI>            <LI><A HREF="#Convert">Convert</A></LI>            <LI><A HREF="#Enclosure">Enclosure</A></LI>            <LI><A HREF="#Exit">Exit</A></LI>            <LI><A HREF="#GCamera">GCamera</A></LI>            <LI><A HREF="#GenOffset">GenOffset</A></LI>            <LI><A HREF="#GMechanical">GMechanical</A></LI>            <LI><A HREF="#Guide">Guide</A></LI>            <LI><A HREF="#Mirror">Mirror</A></LI>            <LI><A HREF="#Offset">Offset</A></LI>            <LI><A HREF="#Process">Process</A></LI>            <LI><A HREF="#PtErr">PtErr</A></LI>            <LI><A HREF="#Queue">Queue</A></LI>            <LI><A HREF="#Quit">Quit</A></LI>            <LI><A HREF="#Rotate">Rotate</A></LI>            <LI><A HREF="#Set">Set</A></LI>            <LI><A HREF="#Show">Show</A></LI>            <LI><A HREF="#Spawn">Spawn</A></LI>            <LI><A HREF="#Talk">Talk</A></LI>            <LI><A HREF="#Track">Track</A></LI>            <LI><A HREF="#Wait">Wait</A></LI>            <LI><A HREF="#ControlChars">^C, ^Y and ^Z</A></LI>   </UL>   </LI></UL><H2><A NAME=Introduction></A>Introduction</H2><P>This document describes the commands for the Apache PointObservatory Telescope Control Computer (TCC). If you are unfamiliarwith using the TCC, I suggest you start by reading the <A HREF="UsersGuide.html">TCCUser's Guide</A>. If you do not know how to start and stop the TCC,please see the <A HREF="OperatorsManual.html">TCC Operator'sManual</A>. For details on the proper format for commands, pleaseread <A HREF="#InputRules">Input Rules.</A></P><P>Commands are shown in UPPER CASE, followed by their parameters inlower case. Read the command description to see what to substitutefor the various parameters. Square brackets around a parameter (e.g.&#91;item&#93;) means that the parameter is optional; do not type thebrackets. Command and keywords are not case sensitive, and may beabbreviated (so long as the abbreviation is unique).</P><H2><A NAME=Commands></A>Commands</H2><H3><A NAME=Axis></A>AXIS command &#91;axis1 &#91;, axis2&#91;,...&#93;&#93;&#93;</H3><P>Communicate with one or more of the axis controllers.</P><P><B>command</B> is one of:</P><BLOCKQUOTE><DL>      <DT><A NAME=AxisInit></A><B>Initialize</B> initializes the      specified axes. This halts any motion of the specified axes and      puts the controller in some sensible state. It also calibrates      the axis controller's clock -- and the clock getting off can      cause some interesting problems (in particular, this is almost      always the cause of "motor control buffer full"). Also halts      guiding and any axes whose position depends on the axes being      initialized. Supports /TimeLimit and /NoFile.</DT>            <DT><A NAME=AxisReset></A><B>Reset</B> resets the specified      axes. This might be useful if a controller hangs, but otherwise      Initialize should be sufficient. Also halts guiding and any      axes whose position depends on the axes being initialized.      Supports /TimeLimit and /NoFile.</DT>            <DT><A NAME=AxisStatus></A><B>Status</B> returns the present      position and velocity and a status word. Returned keywords:      &lt;Axis&gt;Stat, &lt;Axis&gt;DTime.</DT>            <DT><A NAME=AxisStop></A><B>Stop</B> halts the specified axes,      ending at the position of the telescope when the command was      issued (hence there is some intentional backtracking). Also      halts guiding and any axes whose position depends on the axes      being halted. See also <A HREF="#Track/Stop">TRACK/STOP</A> and      <A HREF="#Rotate/Stop">ROTATE/STOP</A>.</DT>            <DT><A NAME=AxisTrkErr></A><B>TrkErr</B> displays some      statistics about the tracking performance (based on the      incremental encoders) and about the last absolute position      fiducial passed. Returned keywords: &lt;Axis&gt;Err,      &lt;Axis&gt;MSStat.</DT>   </DL></BLOCKQUOTE><P><B>axis</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Azimuth</B></DT>            <DT><B>Altitude</B></DT>            <DT><B>Rotator</B></DT>            <DT><B>All</B> (default) all axes</DT>            <DT>In addition, <B>Tel1</B> and <B>Tel2</B> are accepted for      Azimuth and Altitude, but are deprecated.</DT>   </DL></BLOCKQUOTE><P><B>/NoCheck</B> sends the command to all specified controllers,without checking to see if they exist. The default behavior is tocheck for the existence of the specified controllers and ignore thosethat don't exist. For example, if you specify "All" axes, younormally only affect all axes that the TCC thinks exist at thecurrent instrument position. /NoCheck may be useful in case ofcertain kinds of problems.</P><P><B>/NoFile</B> prevents sending of the initialization and/or resetcommand files to the controllers. /NoFile is ignored for commandsother than Initialize and Reset.</P><P><B>/TimeLimit = delta-time</B> causes communication with thecontrollers to time out after "delta-time" seconds. This prevents thecommand interpreter from locking up if the controller is hung.TimeLimit = 0 specifies no limit (infinite time). The default limitdepends on the command, but is never 0.</P><H3><A NAME=Broadcast></A>BROADCAST &#91;"message"&#93;</H3><P>Sends a message to all users.</P><P><B>/Type=message_type</B> specifies the message "type", e.g.information or error. Message_type is one of: Done, Started,Superceded, Information, Warning, Error (default), or Fatal.</P><P><B>Returned keywords:</B> Broadcast.</P><H3><A NAME=Convert></A>CONVERT coordSet fromsys &#91;tosys&#93;</H3><P>Converts a position from one coordinate system to another.</P><P><A HREF="#StdParamCoordSet"><B>coordSet</B></A> the position (andoptionally velocity) to be converted from. Both axes must bespecified.</P><P><A HREF="#StdParamCoordSys"><B>fromsys, tosys</B></A> thecoordinate system of the initial ("from") and converted ("to")position. Mount and Physical coordinate systems are not supported.The default "to" coordinate system is the "from" system (hence noconversion, unless /ZPM is used).</P><P><B>/Distance=distance</B> the distance to the object in au. Notethat you cannot specify both /Distance and /Px as they are differentways of inputting the same information. The default is infinity.</P><P><A HREF="#StdQualPM"><B>/PM=(pm1, pm2)</B></A> proper motion inarcseconds/century (default is zero).</P><P><B>/Px=parallax</B> parallax in arcseconds (1/parsecs) (default iszero).</P><P><B>/RV=radvel</B> radial velocity in km/s, positive receding(default is zero)</P><P>A comment on "fixed stars" (/PM, /Px and /RV all zero): If propermotion, parallax, and radial velocity are all zero, the star isassumed to be fixed (stationary). In the case of FK4 coordinates,this is not quite the same thing as proper motion and radial velocitybeing exactly zero because the FK4 system has a bit of intrinsicproper motion.</P><P><B>/ZPM</B> removes the effects of proper motion, radial velocity,and parallax to the current date (in addition to performing therequested conversion, if any). It does this by first converting tocurrent apparent geocentric place, zeroing the resulting spacemotion, and then converting to the final requested position.</P><P><A NAME=UseGSWavelength></A><B>/UseGSWavelength</B> use the guidestar wavelength instead of the object wavelength for refractioncorrection. The default is the object wavelength unless fromsys ortosys are GProbe or GImage, in which case the default is the guidestar wavelength. When in doubt, specify /UseGSWavelength or/NoUseGSWavelength</P><P><B>Warnings</B></P><UL>   <LI>Conversions between non-current (time &lt;&gt; 0) apparent   topocentric coordinates and any mean system or non-current (date   &lt;&gt; 0) apparent geocentric coordinates will be rather   inaccurate.</LI>      <LI>All other conversions involving non-current apparent   topocentric coordinates will be slightly less accurate than other   conversions.</LI>      <LI>The default wavelength for refraction correction depends on   fromsys and tosys. See <A HREF="#UseGSWavelength">/UseGSWavelength</A>   for details.</LI>      <LI>Conversions involving refraction will have limited accuracy   unless the weather data is current.</LI></UL><DL>   <DT><B>Returned keywords:</B> ConvPos, ConvSys, ConvPM,   ConvAng.</DT></DL><H3><A NAME=Enclosure></A>ENCLOSURE commands...</H3><H3><A NAME=EncEnable></A>ENCLOSURE ENABLE=state &#91;device1 &#91;,device2 &#91;, ...&#93;&#93;&#93;</H3><P>Enables or disables various devices. Note that disabling a devicedoes not necessarily remove its power; when safety is an issue,remove power from the device by turning off it's circuit breaker!</P><DL>   <DT><B>state</B> is On or Off.</DT>      <DT><B>device</B> is one of:      <DL>      <DT><B>Telescope</B> the axis controllers and dome rotation      system.</DT>            <DT><B>All</B> (default)</DT>   </DL>   </DT></DL><H3><A NAME=EncFans></A>ENCLOSURE FANS=state &#91;fan1 &#91;, fan2&#91;, ...&#93;&#93;&#93;</H3><P>Controls the exhaust fans.</P><P><B>state</B> is On or Off.</P><P><B>fan</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>TelExhaust</B> exhausts the telescope.</DT>            <DT><B>IntExhaust</B> exhausts the intermediate level of the      enclosure)</DT>            <DT><B>Pressurization</B> pressurizes the enclosure. This fan      should not be used at the same time as any of the exhaust      fans.</DT>            <DT><B>All</B></DT>   </DL></BLOCKQUOTE><P><B>Warning:</B> turning on all the fans is usually a mistakebecause the exhaust fans will act in opposition to the pressurizationfan. Hence "All" is not the default (unlike most other enclosurecommands).</P><H3><A NAME=EncHeaters></A>ENCLOSURE HEATERS=state &#91;heater1&#91;, heater2 &#91;, ...&#93;&#93;&#93;</H3><P>Controls the enclosure roof heaters (for melting snow). Warning:the names of the heaters will probably be changed to something moresensible.</P><P><B>state</B> is On or Off.</P><P><B>heater</B> is one of: 4, 8, 12, 16, 20, 24. These correspond tonumbers on the blueprints. However, we'll probably change this tosomething more self-explanatory.</P><H3><A NAME=EncLights></A>ENCLOSURE LIGHTS=state &#91;light1 &#91;,light2 &#91;, ...&#93;&#93;&#93;</H3><P>Controls various lights in the enclosure.</P><P><B>state</B> is On or Off.</P><P><B>light</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>FHalides</B> halides illuminating the front/main area of      the dome (near the slit)</DT>            <DT><B>RHalides</B> halides at the rear of the dome (near the      stairs)</DT>            <DT><B>Incandescents</B> incandescent lights at the back of the      dome.</DT>            <DT><B>Stairs</B> the stairs from the intermediate level to the      dome.</DT>            <DT><B>Outside</B> lights for the catwalk in front of the      slit.</DT>            <DT><B>Platform</B> secondary exchange platform.</DT>            <DT><B>Int_Incandescents</B> incandescents on the intermediate      level.</DT>            <DT><B>Int_Fluorescents</B> fluorescent lights in the      intermediate level.</DT>            <DT><B>All</B>(default)</DT>   </DL></BLOCKQUOTE><H3><A NAME=EncLouvers></A>ENCLOSURE LOUVERS=state &#91;louver1&#91;, louver2 &#91;, ...&#93;&#93;&#93;</H3><P>Open or close louvers, or put under automatic control.</P><P><B>state</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Open</B></DT>            <DT><B>Close</B></DT>            <DT><B>Automatic</B> puts the louvers under automatic control.      The louvers will be opened or closed depending on the wind      speed and direction (relative to the dome slit). To remove a      louver from automatic control, open or close it.</DT>   </DL></BLOCKQUOTE><P><B>louver</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>L1, L2, L3</B> louvers on the left wall of the      enclosure: lower, middle and upper (respectively)</DT>            <DT><B>R1, R2, R3</B> louvers on the left wall of the      enclosure: lower, middle and upper (respectively)</DT>            <DT><B>Stairs</B> the louver at the back of the enclosure in      the stair well (connecting to the intermediate level)</DT>            <DT><B>Floor</B> the pair of louvers in the floor on either      side of the telescope (connecting to the intermediate      level)</DT>            <DT><B>All</B>(default)</DT>   </DL></BLOCKQUOTE><H3><A NAME=EncMisc></A>ENCLOSURE misc_command</H3><P>Miscellaneous commands include status, initialization, andreset.</P><P><B>misc_command</B> is one of.</P><BLOCKQUOTE><DL>      <DT><B><A NAME=EncInitialize></A>Initialize</B> puts the      enclosure controller in some sensible state; the details are      unknown at this time.</DT>            <DT><B><A NAME=EncReset></A>Reset</B> resets and initializes      the enclosure controller. Resetting a controller is serious;      please only do this if the controller does not respond to      Initialize.</DT>            <DT><B><A NAME=EncStatus></A>Status</B> returns controller      status information.</DT>   </DL></BLOCKQUOTE><P><B>/NoFile</B> prevents sending of the initialization and/or resetcommand files to the controller. /NoFile is ignored for commandsother than Initialize and Reset.</P><P><B>/TimeLimit = delta-time</B> causes communication with thecontroller to time out after "delta-time" seconds. This prevents thecommand interpreter from locking up if the controller is hung.TimeLimit = 0 specifies no limit (infinite time). The default limitdepends on the command, but is never 0.</P><H3><A NAME=Exit></A>EXIT</H3><P>Exits from the TCC command interpreter. If you are running fromthe captive account, this also disconnects you. Synonyms: ^Z,QUIT.</P><H3><A NAME=GCamera></A>GCAMERA command</H3><P>Sends commands to the guide camera, for setting it up, obtainingimages, etc. All commands (except as noted) execute in thebackground, unless you specify <A HREF="#StdQualWait">/Wait</A>. Upto about 20 GCAMERA commands may be queued at once (includingcommands from all users). If you attempt to queue a command when thequeue is full the interpreter will reject it. You may clear allqueued commands (yours and everybody else's) using GCAMERACANCEL.</P><P>Note that some commands will return an error unless an instrumenthas been selected using <A HREF="#SetInstrument">SET INSTRUMENT</A>.Selecting an instrument selects the associated guide camera andestablishes associated information.</P><P><B>command</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Cancel</B> cancels all pending guide camera commands,      including those queued by other users. /TimeLimit is ignored.      Executes immediately (is not queued).</DT>            <DT><B>Centroid</B> measures the position, FWHM, etc. for a      star. You must specify the position of the star (using /Center)      to within an arc-second or so. You may specify a predicted FWHM      (using /PredFWHM); if you omit it, be sure that the default      value is reasonable. Returned keywords: GSDataPix,      NoStarsFound.</DT>            <DT><B>DoCentroid &#91;expTime&#93;</B> a combination of DoRead      and Centroid. You may specify any qualifier used by either      command. Returned keywords: GSDataPix, NoStarsFound.</DT>            <DT><B>DoDark &#91;expTime&#93;</B> Like DoRead (see below) but      takes a dark frame (i.e. does not open the shutter).</DT>            <DT><B>DoFindStars &#91;expTime&#93;</B> a combination of      DoRead and FindStars. You may specify any qualifier used by      either command. Returned keywords: GSDataPix,      NoStarsFound.</DT>            <DT><B>DoRead &#91;expTime&#93;</B> exposes and reads out the      CCD. You may specify a binning factor (/BinFactor) and region      (/Size, /Center). The default exposure time is that used for      guiding and pointing error correction (see <A HREF="#SetExpTime">SET      EXPTIME</A>). Note that the CCD is always being flushed when      it's not being exposed and read.</DT>            <DT><B>DumpImage fileName</B> writes the image in memory out to      a file on disk, overwriting an existing file if present. The      default format is FITS, but you may override this using      /Binary. If you enclose the file name in double quotes ("")      then it may contain spaces and special characters (anything      permitted by MacOS).</DT>            <DT><B>FindStars</B> searches the image in memory for stars,      returning a list sorted in order of decreasing brightness, but      excluding any objects that are not usable for guiding (e.g.      doubles or stars on bad columns). You may limit the area      scanned using /Size and /Center and the number of stars      returned using /MaxStars. Returned keywords: GSDataPix,      NoStarsFound.</DT>            <DT><B>Initialize</B> initializes the guide camera controller.      Executes immediately (is not queued). /TimeLimit applies to the      commands in the initialization command file (if present).      Accepts /NoFile.</DT>            <DT><B>Reset</B> at present this simply does an initialize, and      sends the reset and initialization command files. If the      controller is bollixed up you will probably have to reboot it      manually.</DT>            <DT><B>Status</B> returns information about the guide camera      controller, including user-settable parameters, the camera and      the image.</DT>   </DL></BLOCKQUOTE><P><B>/Binary</B> specifies that the image is to be saved in rawbinary format (rather than in FITS format). Raw binary files containno information about the size of the image, the location (if asubimage) on the CCD, or the number of bits per pixel. To obtain suchinformation use the GCamera Status command, and be sure to do thiswhile the image is still in memory (i.e. before image is readout).</P><P><B>/BinFactor = (x, y)</B> specifies the desired binning factor ineach axis (integers). If only one value is specified, that value isused for both axes. If no value is specified then the bin factor usedfor guiding and pointing error corrections is used.</P><P><B>/Center = (x, y)</B> specifies the center of the desiredregion, in binned pixels. Default is the center of CCD, as specifiedin the instrument data block (this may not be the actual center; itmight be the center of a good region, instead, for instance). Notethat 0,0 pixels is a corner of the CCD and 0.5,0.5 is the center ofthe corner pixel. Hence the center of a 1024x1024 CCD is 512,512.</P><P><B>/Size = (x, y)</B> specifies the size of the desired region, inbinned pixels. Default is so large that the entire image will be usedregardless of the specified center of the region (so long as thecenter is actually on the CCD!).</P><P><B>/PredFWHM = (x, y)</B> predicted FWHM of stars, in binnedpixels. The value should be within a factor of two for star findingand centroiding to work properly. If only the x component isspecified, that value is used for both axes. If no value is specifiedthen the value for guiding and pointing error corrections is used(see <A HREF="#SetPredFWHM">SET PREDFWHM</A>). Note that it is rarelyuseful to specify both components, and in fact the guide imagecontroller may ignore the Y component.</P><P><B>/MaxStars = int</B> the maximum number of stars to list; notethat if more stars are found only the brightest are listed (forexample /MaxStars=1 gives you just the brightest star). The defaultis 10.</P><P><B>/NoFile</B> prevents sending of the initialization and/or resetcommand files to the controller. /NoFile is ignored for commandsother than Initialize and Reset.</P><P><B>/TimeLimit = delta-time</B> extends the time limit forcommunication with the guider beyond the usual default for thecommand (or series of commands, in some cases). Unlike /TimeLimit forsome other TCC commands, there is no way to specify an infinite timelimit; 0 simply does nothing.</P><P><A HREF="#StdQualWait"><B>/Wait</B></A> pause until the commandfinishes.</P><P><B>Warning:</B> be careful about which commands you issue duringguiding. Some commands will mess up guiding (for example ExposeCCDmay overexpose an image) and commands which take a long time toexecute (such as FindStars) will delay guiding updates.</P><H3><A NAME=GenOffset></A>GENOFFSET</H3><P>A "general" offset allows one to offset objects on the instrument.In essence, you tell the telescope where the object is and where youwant it to go. Positions may be measured either in instrumentcoordinates or in local user coordinates--e.g. East/North if trackingin RA/Dec. You may also move the boresight on the instrument in asimilar fashion.</P><P>The command was designed to support graphical offsetters. As such,it will even work properly if the image the user is using is out ofdate in that the sky has since rotated on the instrument. For moreinformation on this subject, please read the paper "Offsetting aTelescope by Remote Control", by R. Owen and R. Loewenstein.</P><P><B>/NewBoresight = (pos1, pos2)</B> the desired boresight position(a.k.a. net instrument-plane offset). Note that this is an absolutevalue, NOT an increment from the existing boresight position.Measured in instrument xy or local user xy, depending on /UserCoords.Zero is the center of the instrument.</P><P><B>/OldOrientation = (pos1, pos2)</B> the orientation of the oldboresight. This is the angle returned by keyword ObjInstAng. You mustsupply this number if your OldPoint is based on an out-of-date image,else you'll get unpredictable results. Technically, it is the angleof the user1 axis (e.g. the east vector for an RA/Dec user coordinatesystem) with respect to the x axis of the instrument. In the TCCcode, it would be written ObjUser_Obj_ang. Default = currentorientation of boresight.</P><P><B>/OldPoint = (pos1, pos2)</B> the old position of some arbitrarypoint on the sky. Measured in instrument xy or local user xy,depending on /UserCoords. Zero is the center of the instrument.Default: OldPoint = the current instrument-plane offset.</P><P><B>/NewPoint = (pos1, pos2)</B> the new position of the same pointon the sky. Measured in instrument xy or local user xy, depending on/UserCoords. Zero is the center of the instrument. Default: NewPoint= the new instrument-plane offset (/InstPlaneOffset)</P><P><B>/AbsPoint</B> used for absolute offsets. Specifies that theNewPoint is where the original reference object (specified in theTRACK command) should go. Do not also specify /OldPoint, because/AbsPoint is a different way of specifying where you are coming from.Specifying /AbsPoint and /OldPoint will cause the command tofail.</P><P><B>/UserCoords</B> if present, all positions are measured in thelocal coordinate system of the object (e.g. East/North if the objectposition is specified in RA/Dec). If omitted, positions are measuredin x-y instrument coordinates (generally x is the rows of a CCD oralong a spectrograph slit).</P><P><A HREF="#StdQualRestart"><B>/Restart = (&#91;no&#93;axis1,&#91;no&#93;axis2...)</B></A> specifies whether or not to try torestart halted axes. The default is to not restart any axis.</P><P><A HREF="#StdQualPerfect"><B>/Perfect</B></A> the move onlyproceeds if all axes can make it.</P><P><A HREF="#StdQualAbsRefCorrect"><B>/AbsRefCorrect</B></A> theabsolute position reference sensors will be used during themotion.</P><P><A HREF="#StdQualWait"><B>/Wait</B></A> pause until the commandfinishes.</P><P><B>Returned Keywords:</B> ObjOff, InstOff.</P><P><B>Warnings:</B></P><UL>   <LI>If your OldPoint is based on an out-of-date image (i.e.   measured from any non-real-time display!), you MUST supply   /OldOrientation. If you neglect this, the offsets will be nonsense   (unless there is an instrument rotator, and it's rotating with the   sky).</LI>      <LI>Unlike most other motion commands, this command does not take   velocities. This kind of offset does not appear to make a lot of   sense if any offsets have finite velocities. Furthermore, the   command will fail if the boresight is not stationary on the   instrument (rare; probably only done for drift scanning).</LI></UL><H3><A NAME=GMechanical></A>GMECHANICAL command</H3><P>Sends commands to the guider mechanical controller. Thiscontroller adjusts the guider's filter and piston.</P><P><B>command</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Initialize</B> halts any motion and puts the controller      in some sensible state. /TimeLimit sets the time limit for each      command in the initialization data file. Accepts the qualifier      /NoFile.</DT>            <DT><B>Reset</B> resets and initializes the controller. This is      a serious act; please only do this if the controller does not      respond to Initialization. /TimeLimit sets the time limit for      each command in the reset and initialization data files.      Accepts the qualifier /NoFile.</DT>            <DT><B>Status</B> returns controller status information.</DT>   </DL></BLOCKQUOTE><P><B>/NoFile</B> prevents sending of the initialization and/or resetcommand files to the secondary controller. /NoFile is ignored forcommands other than Initialize and Reset.</P><P><B>/TimeLimit = delta-time</B> causes communication with thecontroller to time out after "delta-time" seconds. This prevents thecommand interpreter from locking up if the controller is hung.TimeLimit = 0 specifies no limit (infinite time). The default limitdepends on the command, but is never 0.</P><H3><A NAME=Guide></A>GUIDE state</H3><P>Starts and stops guiding. Guiding runs in the background.</P><P><B>state</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>On</B> starts guiding, as follows: integrates and      searches the scanning rectangle for the best guide star in the      field (rectangle is centered at the predicted position of the      guide star you are tracking, but the star closest to this      position is NOT necessarily the one that is chosen), then      starts guiding on this star.</DT>            <DT><B>Off</B> stops guiding.</DT>   </DL></BLOCKQUOTE><P><B>/NoDefGStars</B> instead of using default values for each guideprobe, uses the existing data in the GStar block. This data may beset using <A HREF="#SetGStar">SET GSTAR</A>, or it may just be olddata sitting around from previous guiding. If omitted, guiding looksfor the best star near the center of each available guide probe (asif <A HREF="#SetGStar">SET GSTAR</A> was used to set each guide starto 0,0 GProbe). Ignored unless <B>state</B> is <B>on</B>.</P><P><B>/NRefMeas=maxTries</B> performs two related tasks. First whenguiding begins, the initial guiding error is corrected by moving thetelescope (instead of being saved as an offset in user coordinates).In addition (and the reason it takes a value) allows you to tryseveral times to find all of the guide probes. These two functionsare combined because there is little use in repeatedly looking forguide stars unless you move the telescope after each attempt. Onceall stars are found or the number of iterations is exhausted normalguiding begins. Omit or set to zero to obtain the default behavior,which is to <B>not</B> move the telescope. Ignored unless<B>state</B> is <B>on</B>.</P><P><B>/ScaleCorrection = corrType</B>, where <B>corrType</B> is oneof:</P><UL>   <LI><B>off</B> (the default) no scale correction is   attempted.</LI>      <LI><B>initial</B> scale is only corrected during the guiding   preparation phase: the first look for guide stars and, if   /NRefMeas is positive, each additional iteration looking for guide   stars until guiding begins.</LI>      <LI><B>on</B> always correct scale factor.</LI></UL><P>Controls how focal plane scale correction is performed. Note:scale factor correction requires at least two guide stars. Ignoredunless <B>state</B> is <B>on</B>.</P><P><B>/Scan</B> scans for the best guide star in the guide box regionfor each iteration of guiding, rather than using centroiding. Thismay be more robust for jumps in pointing or for overly enthusiasticcentroiding. On by default, at least for now, because the currentcentroiding algorithm does not always reject noise. Note: thisqualifier has no effect on guiding startup; that always usesscanning.</P><P>Warning: ordinary centroiding presently ignores the GBoxSizeparameter, so it is only used with GUIDE/SCAN. I hope to fix thiseventually but it requires a modification of the guiderinterface.</P><P><B>Returned Keywords:</B> GuidePrep, GuideStart, GSFind,GSMissing, GSDisabled, Iter, MaxIter, NoRotOrScaleCorr.</P><H3><A NAME=Mirror></A>MIRROR command &#91;mirror1 &#91;, mirror2&#91;,...&#93;&#93;&#93;</H3><P>Sends commands to the specified mirror controllers.</P><DL>   <DT><B>command</B> is one of:      <DL>      <DT><B>Initialize</B> initializes the controller. Puts the      controller in some sensible state; the details are unknown at      this time. /TimeLimit sets the time limit for each command in      the initialization data file. Accepts the qualifier      /NoFile.</DT>            <DT><B>Reset</B> resets and initializes the controller. This is      a serious act; please only do this if the controller does not      respond to Initialization. /TimeLimit sets the time limit for      each command in the reset and initialization data files.      Accepts the qualifier /NoFile.</DT>            <DT><B>Status</B> returns controller status information.      Returned keywords: &lt;Mir&gt;DesOrient,      &lt;Mir&gt;DesOrientAge, &lt;Mir&gt;CmdMount, &lt;Mir&gt;Mount,      &lt;Mir&gt;Orient, &lt;Mir&gt;Stat, where &lt;Mir&gt; is one of      Prim, Sec or Tert.</DT>   </DL>      <P><B>mirror</B> is one of the following. If an axis that does not   exist is specified it is silently ignored.</P>      <DL>      <DT><B>Primary</B></DT>            <DT><B>Secondary</B></DT>            <DT><B>Tertiary</B></DT>            <DT><B>All</B> all existing mirror controllers (the      default)</DT>   </DL>   </DT></DL><P><B>/NoFile</B> prevents sending of the initialization and/or resetcommand files to the axes. Normally an Initialize or Reset sends thea file of commands to the specified controllers, if such a fileexists. /NoFile is ignored for commands other than Initialize andReset.</P><P><B>/TimeLimit = delta-time</B> causes communication with thecontroller to time out after "delta-time" seconds. This prevents thecommand interpreter from locking up if the controller is hung.TimeLimit = 0 specifies no limit (infinite time). The default limitdepends on the command, but is never 0.</P><H3><A NAME=Offset></A>OFFSET type &#91;coordSet&#93;</H3><P>Offsets the telescope in various ways, both in position andvelocity. Offsets are computed with full accuracy, regardless ofsize. However, use of "/Computed" is suggested for large offsets andis required during guiding. See also <A HREF="#GENOFFSET">GENOFFSET</A>.</P><P><B>type</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Arc</B> offset along a great circle on the sky. The      components are in the user-specified coordinate system for the      object (typically RA, Dec), and are used as follows: The length      along the great circle equals the magnitude of the net arc      offset vector. The angle of the arc offset vector is tangent to      the great circle at the zero arc offset position. Arc offsets      are primarily intended for drift-scanning. As such, orientation      of the instrument in object rotation mode is handled rather      oddly; see the ROTATE command for details. Also, arc offset      velocity is compensated for refraction, to maintain a constant      scan rate at the instrument. This results in a slight variation      in rate on the sky depending on orientation and altitude.</DT>            <DT><B>Boresight</B> specifies the position of the object on      the instrument. The axes of the offset are the x-y axes of the      instrument (NOT the sky), and 0,0 is nominally the center of      the instrument. If the rotator is not rotating with the sky      then the boresight is the center of rotation of the sky on the      instrument. <B>Warning:</B> ignored (but recorded and a warning      is issued) for Physical or Mount coordinates. This is because      Physical and Mount coordinates describe the position of the      mount, not of the object; in fact Boresight position is one of      the main components of the coversion from Observed to Physical      coordinates.</DT>            <DT><B>InstPlane</B> an older term for Boresight.</DT>            <DT><B>Object</B> the offset is added directly to the object's      "user" coordinates (the coordinates specified in the TRACK      command but with proper motion and parallax removed to the      current date). Note that there is no correction for      cosine(altitude). If you wish to offset a given amount on the      sky, use Arc offsets or the <A HREF="#GenOffset">GENOFFSET</A>      command.</DT>            <DT><B>Rotator</B> There is just one axis, the rotator.      Warning: the offset directly modifies the rotator user position      (as specified in the <A HREF="#Rotate">ROTATE</A> or <A HREF="#TRACK">TRACK</A>      command). Unlike all other offsets, the rotator offset value is      not stored separately, so there is no way to differentiate the      offset from the rotator angle you originally specified. As a      result, when you slew to a new star the rotator angle will      retain its modified value. This misfeature may be fixed at some      point.</DT>            <DT><B>Calibration (primarily for engineering use)</B> changes      the local pointing correction (normally set automatically by a      <A HREF="#TrackPtErr">pointing error sequence</A>). There are      three axes: azimuth, altitude and rotator. The offset is in      telescope mount coordinates. <B>Warning:</B> ignored (but      recorded and a warning is issued) for mount coordinates. This      is because it is considered a correction for physical      imperfection, and hence is applied during the conversion from      physical to mount. If the object is specified in mount      coordinates then the azimuth and altitude components are      ignored; if the rotator is specified in mount coordinates then      the rotator component is ignored.</DT>            <DT><B>GuideCorrection (primarily for engineering use)</B>      changes the guiding correction (normally set automatically by      <A HREF="#Guide">guiding</A>). There are three axes: azimuth,      altitude and rotator. The offset is in telescope mount      coordinates. <B>Warning:</B> ignored (but recorded and a      warning issued) for mount coordinates; see calibration offsets      for details.</DT>            <DT><B>GCorrection</B> an older term for GuideCorrection.</DT>   </DL></BLOCKQUOTE><P><A HREF="#StdParamCoordSet"><B>coordSet</B></A> the amount of theoffset. The meaning depends on the kind of offset, but there are twoaxes unless otherwise noted. If you specify position or velocity, thedefault for the other is zero. If you omit position and velocity forall axes, then all axes will be set to zero. If you omit pos and velfor a given axis, that axis will not be changed (unless you omit itfor <B>all</B> axes, as just mentioned). This behavior is new as ofversion 2.2.3.</P><P><B>/PAbsolute, /VIncremental</B> specifies whether the positionand velocity components are absolute or incremental. Absolute meansthat the new offset completely replaces the old offset. Incrementalmeans that the new offset is added to the old offset. The default isrelative position and absolute velocity; so if pos=vel=0, position isunchanged, but any drifting is halted. Note: /VIncremental is ignoredfor position-only offsets. Examples:</P><BLOCKQUOTE><DL>      <DT>OFFSET Boresight</DT>            <DD>stops drift due to velocity in the boresight offset. It      zeros velocity and leaves position alone because by default pos      = 0, vel = 0, position is incremental and velocity is      absolute.</DD>            <DT>OFFSET Boresight/PAbsolute</DT>            <DD>Zeros both position and velocity in the instrument plane      offset.</DD>   </DL></BLOCKQUOTE><P><B>/Computed</B> specifies that the motion uses a precomputedslew, rather than a path chosen by the axes controllers. The defaultis /NoComputed unless /Restart is specified.</P><P>Precomputed motion has a known time of completion (which is goodfor user feedback) and is the only choice accepted if axes are to berestarted. If also offers jerk and acceleration limiting and isgenerally the best option for long moves. However, computed motion isslower than immediate motion (allowing the axis controller to choosethe path), especially for short offsets. In addition, computed motionwill cause the axes to drift at constant velocity for a few secondswhile the move is being computed.</P><P><B>/TDICorrection</B> specifies that the arc offset velocityshould be adjusted for drift scanning (TDI). Without this correction,stars will move across the CCD at a slightly varying rate, due torefraction. With TDI rate correction the CCD can be read out at aconstant rate without smearing. Use TDI correction when driftscanning. Do not use it when tracking a moving object. (Note: TDIcorrection is always enabled when you start a drift scan withTRACK/ScanVel).</P><BLOCKQUOTE>/TDICorrection is ignored unless the offset type is   "arc". Furthermore, it is recorded, but has no effect on telescope   motion, if the net arc offset has zero velocity.      <P><B>Warning</B>: the TCC's internal TDI correction flag is set   or cleared (as you specify) each time you issue an "offset arc"   command. This is true regardless of whether you specify a velocity   in the offset command. To be safe, explicitly specify or omit   /TDICorection when issuing "offset arc" commands. You may ignore   this warning if you are only using fixed (zero velocity) arc   offsets.</P></BLOCKQUOTE><P><A HREF="#StdQualRestart"><B>/Restart = (&#91;no&#93;axis1,&#91;no&#93;axis2...)</B></A> specifies whether or not to try torestart halted axes. The default is to not restart any axes.Restarting requires a computed offset. If you specify both /Restartand /NoComputed then /Restart is rejected with an error message.</P><P><A HREF="#StdQualPerfect"><B>/Perfect</B></A> the move onlyproceeds if all axes can make it.</P><P><A HREF="#StdQualNoAbsRefCorrect"><B>/AbsRefCorrect</B></A> usethe absolute position reference sensors during the motion.</P><P><A HREF="#StdQualRefCoefficients"><B>/RefCoefficients</B></A>update refraction coefficients (using the latest weather data) beforecomputing the new move.</P><P><A HREF="#StdQualPerfect"><B>/</B></A><A HREF="#StdQualCollimate"><B>Collimate</B></A>update collimation after the move begins.</P><P><A HREF="#StdQualWait"><B>/Wait</B></A> pause until the commandfinishes.</P><P><B>Returned keywords:</B> MoveDone or SlewBeg and SlewEnd(depending if the move is immediate or computed), MoveItems, ObjOff,GSOff, InstOff. Some values which remain unchanged will not bereturned.</P><H3><A NAME=Process></A>PROCESS cmd procName</H3><P>Disables, enables or shows the state of several optionalprocesses.</P><P><B>cmd</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Disable</B> disables the specified process.</DT>            <DT><B>Enable</B> enables the specified process.</DT>            <DT><B>Status</B> shows which processes are disabled or      dead.</DT>   </DL></BLOCKQUOTE><P><B>procName</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>AutoLouver</B> automatically controls enclosure louvers      as a function of telescope azimuth, wind speed and wind      direction. Specific to the APO 3.5m telescope.</DT>            <DT><B>BrdTelPos</B> broadcasts telescope position as UDP      packets. Primarily for the SDSS telescope, but usable by      anybody.</DT>            <DT><B>Collimate</B> talks to the telescope mirrors and guide      camera focus to adjust collimation and focus. Disabling      collimation disables all of the following operations (new      mirror positions, if any, are recorded but not applied):</DT>   </DL>      <UL>      <LI>Automatic collimation adjustment</LI>            <LI>Collimation adjustment triggered by a SET WEATHER      command</LI>            <LI>Scale changes set by guiding</LI>            <LI>SET FOCUS</LI>            <LI>SET SCALE</LI>   </UL></BLOCKQUOTE><DL>   <DD>Notes:      <UL>      <LI>The collimation process checks for being disabled before      moving each mirror, but there is a short window of time between      the check and starting to move the mirror.</LI>            <LI>Collimation is considered so important that it will warn      that it is disabled whenever it is triggered. This is not true      of the other processes.</LI>   </UL>      <DL>      <DT><B>Status</B> regularly displays status</DT>   </DL>   </DD></DL><H3><A NAME=PtErr></A>PTERR cmd</H3><P>Opens and closes the pointing error log file. (To measure, log orcorrect pointing error, use the <A HREF="#TrackPtErr">TRACK/PTERR</A>command). The pointing error log file can be read by TPOINT, agraphical analysis package for generating pointing models. See theOperator's Manual for instructions on telescope modeling.</P><P><B>cmd</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Open&#91;=filename&#93;</B> closes the current output      file, if one is open and then opens the requested file and      writes a header containing information needed by TPOINT and      explanatory comments. The default file is SYS$OUTPUT (typically      your terminal).</DT>            <DT><B>Close</B> Closes the current pointing-error log file;      subsequent pointing error output is directed to sys$output      (you) unless you issue another OPEN command.</DT>   </DL></BLOCKQUOTE><P><B>/Append</B> when specified with Open, opens an existing fileand moves to the end, so that subsequent pointing error data isappended to the file. No header is written (under the assumption thatone already exists). The specified file must already exist. /Appendis ignored when used with Close.</P><H3><A NAME=Queue></A>QUEUE command</H3><P>Executes a file of TCC commands, e.g. the snow program, in thebackground. Only one file of commands may be queued at one time.(Note: if you wish to execute DCL commands instead of TCC commands,see the SPAWN command.)</P><P>This is intended to replace the old style of batch job where a DCLcommand file called TCCINTERP. The old system was dangerous becausethere was no truly safe way to terminate a job.</P><P>If a job gets frozen and does not respond to the stop command, youmay kill it by restarting the job queue: SPAWN "RESTARTJOBQUEUE".</P><P><B>command</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Run=filename</B> start a new batch job. The default      directory for batch job files is tjob: If a batch job is      currently running, it is terminated.</DT>            <DT><B>Stop</B> stop the current batch job, if any.</DT>            <DT><B>Modify</B> changes the termination parameters      (iterations and/or duration) for the currently executing batch      job. This command has no effect unless a batch job is      running.</DT>            <DT><B>Status</B> show the name of the file currently running,      the number of iterations run, the time spent and the maximum      iterations and duration.</DT>   </DL></BLOCKQUOTE><P><B>/Iterations=maxIter</B> the maximum number of iterations to runthe batch job. Specify 0 if you wish no iteration limit.</P><P><B>/Duration=seconds</B> the maximum time to run the batch job.Specify 0 if you wish no time limit. Warning: duration is checkedafter each command in the batch file completes. The job halts as soonas the duration exceeds the specified maximum. In other words, thejob is guranteed to go overtime at least a little bit.</P><H3><A NAME=Quit></A>QUIT</H3><P>Identical to <A HREF="#Exit">EXIT</A>.</P><H3><A NAME=Rotate></A>ROTATE coord &#91;rot_type&#93;</H3><P>Makes the instrument rotator track the object, horizon, etc.</P><P><A NAME=RotType></A><B>rot_type</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>None</B> no rotation. It is basically the same as      ROTATE/STOP, but /STOP is a bit easier and faster, as it causes      the rest of the command to be ignored.</DT>            <DT><B>Object</B> sets the orientation of the object with      respect to the instrument. The rotator angle specifies the      angle of the coordinate system of the object with respect to      instrument x,y. If the object is specified in some RA/Dec      coordinate system then at 0 degrees east will be along the x      axis of the instrument, and at 90 degrees east will be along y      (because east is the direction of increasing coordinate system      axis 1). Warning: the orientation is specified at the      un-arc-offset position (without arc offsets taken into      account). This allows drift-scanning to work, but can have      surprising (not necessarily bad, just surprising) effects if      you are using arc offsets for other purposes.</DT>            <DT><B>Horizon</B> sets the angle of the horizon with respect      to the instrument. At 0 the horizon (direction of increasing      azimuth) lies along the x axis of the instrument; at 90 the      horizon lies along the y axis. Obtaining good results while      rotating with the horizon requires great care; read the      <A HREF="#NoteRotHorizon">note</A> for details. Note: unlike      object rotation, horizon rotation is specified at the net      object position, with arc offsets included.</DT>            <DT><B>Physical</B> sets the angle of the rotator with respect      to its mounting. Generally used during maintenance, to put the      instrument or rotator at a specific angle. The angle you      specify is the angle from the mechanical x axis to the rotator      x axis. 0 typically is some sort of neutral position for the      instrument, but this is up to the folks who build the      instruments, and is certainly not enforced.</DT>            <DT><B>Mount</B> sets the angle of the rotator in the      coordinate system used by the rotator controller. Used during      maintenance, usually to exercise the rotator controller. The      angle you specify is the angle sent directly to the rotator      controller; no wrapping is done.</DT>   </DL></BLOCKQUOTE><P><A NAME="Rotate/Stop"></A><A HREF="#StdQualStop"><B>/Stop</B></A>the instrument rotator will be gently stopped. Warning: the main axesare slewed to a new position chosen as if the rotator were atRot_Fixed_Phys in the Inst block; If the instrument is very offcenter, this could cause problems. In general, you are better offexplicitly moving the rotator in mount or physical coordinates if youwant it to halt. while you are tracking.</P><P><A HREF="#StdQualCollimate"><B>/NoCollimate</B></A> do not updatecollimation after the move begins.</P><P><A HREF="#StdQualPerfect"><B>/Perfect</B></A> the move onlyproceeds if all axes can make it.</P><P><A HREF="#StdQualRefCoefficients"><B>/RefCoefficients</B></A>update refraction coefficients (using the latest weather data) beforecomputing the new move.</P><P><A HREF="#StdQualRestart"><B>/Restart = (&#91;no&#93;axis1,&#91;no&#93;axis2...)</B></A> specifies whether or not to try torestart halted axes. The default is to restart only the rotatoraxis.</P><P><A HREF="#StdQualWrap"><B>/RotWrap = wrap</B></A> specifies thedesired wrap for the instrument rotator (if present). The default is"middle". Ignored if rot_type is mount.</P><P><B>Returned keywords:</B> MoveItems, RotType, RotPos, RotWrapPref,SlewBeg, SlewEnd. RotWrapPref is only returned if it is not"near".</P><P><A NAME=NoteRotHorizon></A>Note on rotating with the horizon: thistype of rotation must be used with great care. The sky rotates withrespect to the instrument, so only one point on the sky can be keptfixed on the image plane. If there is any tracking error or error inyour object position, that point will NOT be the one you expect. Theresult will be a steady drift of your object, even if you areguiding! To minimize this drift, recalibrate the telescope usingtrack/pterr before you start tracking on your object, and correct anyremaining errors by using <B>object</B> offsets (not any other kindof offset!).</P><H3><A NAME=Set></A>SET commands...</H3><UL>   <LI><A HREF="#SetBlock">SET BLOCK block-name</A></LI>      <LI><A HREF="#SetExpTime">SET EXPTIME=expTime</A></LI>      <LI><A HREF="#SetFocus">SET FOCUS=value</A></LI>      <LI><A HREF="#SetGBinFactor">SET GBINFACTOR=(x, y)</A></LI>      <LI><A HREF="#SetGBoxSize">SET GBOXSIZE=(x, y)</A></LI>      <LI><A HREF="#SetGFilter">SET GFILTER=filtNum</A></LI>      <LI><A HREF="#SetGFocus">SET GFOCUS=value</A></LI>      <LI><A HREF="#SetGScanSize">SET GSCANSIZE=(x, y)</A></LI>      <LI><A HREF="#SetGStar">SET GSTAR &#91;coords   &#91;coordSys&#93;&#93;</A></LI>      <LI><A HREF="#SetInstrument">SET INSTRUMENT   &#91;=inst_name&#93;</A></LI>      <LI><A HREF="#SetMaxUsers">SET MAXUSERS=maxUsers</A></LI>      <LI><A HREF="#SetMsgFilter">SET MSGFILTER=msgType</A></LI>      <LI><A HREF="#SetPredFWHM">SET PREDFWHM=predFWHM</A></LI>      <LI><A HREF="#SetPtRefRadius">SET PTREFRADIUS=radius</A></LI>      <LI><A HREF="#SetPtScanSize">SET PTSCANSIZE=(x, y)</A></LI>      <LI><A HREF="#SetScaleFactor">SET SCALEFACTOR=scaleFactor</A></LI>      <LI><A HREF="#SetStInterval">SET STINTERVAL=(track_int,   slew_int)</A></LI>      <LI><A HREF="#SetTime">SET TIME</A></LI>      <LI><A HREF="#SetWavelength">SET WAVELENGTH item1=value1 &#91;,   item2=value2&#93;</A></LI>      <LI><A HREF="#SetWeather">SET WEATHER item1=value1 &#91;,   item2=value2 &#91;, ...&#93;&#93;</A></LI></UL><H3><A NAME=SetBlock></A>SET BLOCK block-name</H3><P>Changes information in a block in the global database. By defaultit reads data from the terminal, but you may read from a file using/Input. Warning! Use with care; this command can easily incapacitatethe TCC system!</P><P>All blocks are set in the same format as data written by SHOWBLOCK. Most blocks are set using "keyword value" format; keywords maybe specified in any order, and values for omitted keywords are leftunchanged. Use SHOW BLOCK to determine the available keywords. A fewblocks are still in an older order-based format; for these valuesmust be specified in the same order as written out by SHOW BLOCK;lines may be defaulted by supplying an initial "*" and the file mayend early to default all remaining items. In one or two cases thefile format is special and all values must be specified.</P><P>Note: many of these blocks are read at startup from files namedtdat:&lt;block-name&gt;.dat. If you wish to change defaults, editthese files (and then load them if you want the changes to take placeimmediately).</P><P><B><A NAME=SetBlockBlockName></A>block-name</B> is one of thefollowing:</P><BLOCKQUOTE><DL>      <DT><B>AppGeo</B> data for mean -&gt; current app. geocentric      conversion.</DT>            <DT><B>AxeLim</B> position, velocity, acceleration and jerk      limits for the telescope, rotator and guide camera. Position      limits for the primary, secondary and tertiary mirrors, and for      the guide camera focus. The data is read from tdat:axelim.dat      at startup, but instrument-position-related limits are modified      by the SET INSTRUMENT command.</DT>            <DT><B>Earth</B> TAI-UTC and pole motion information.</DT>            <DT><B>GHist</B> guide correction history (the 20 or so most      recent guiding corrections applied since guiding was turned      on). <B>Warning</B>: all values must be specified. Defaults are      not allowed, and you may not end the file early. This is      intended to make it harder to specify non-self-consistent      data.</DT>            <DT><B>GS</B> guide star and guide camera position in various      coordinate systems.</DT>            <DT><B>Inst</B> information about the currently selected      instrument position.</DT>            <DT><B>LouvPos</B> louver position information, including the      state table for automatic louver control.</DT>            <DT><B>Mir</B> information about the mirrors, including      locations of the actuators, scale and motion limits.</DT>            <DT><B>Obj</B> object, rotator, and telescope axes positions in      various coordinate systems.</DT>            <DT><B>TelMod</B> parameters of the telescope model. Uses a      special file format, for compatibility with TPOINT.      <B>Warning</B>: All values must be specified. Defaults are not      allowed, and you may not end the file early. This is intended      to make it harder to specify non-self-consistent data.</DT>            <DT><B>Tune</B> tuning parameters for background processes,      etc.</DT>            <DT><B>Weath</B> and news at 11</DT>   </DL></BLOCKQUOTE><P><B>/Input = file</B> the specified file is used for input.</P><P><B>/NoRead</B> normally the block is first read from the globaldatabase before setting it, so the current values can be used asdefaults. However, a block must <B>not</B> be read before it has beenwritten once, so when setting the block for the first time, you<B>must</B> use /NoRead. This is automatically done for all blocks aspart of the startup procedure. Note that /NoRead causes the defaultvalues to be null: numbers are zero, logicals are false, and stringsare all nulls.</P><H3><A NAME=SetExpTime></A>SET EXPTIME=expTime</H3><P>Sets the exposure time (in seconds) used for guiding and pointingerror correction. This value is also used as the default exposuretime for GCamera commands.</P><P><B>expTime</B> exposure time, in seconds</P><P><B>Returned keywords:</B> ExpTime</P><H3><A NAME=SetFocus></A>SET FOCUS=value</H3><P>Changes the user-settable focus offset for the secondary mirror,and then updates the collimation and focus correction accordingly bymoving the various mirrors. See also <A HREF="#SetGFocus">SETGFOCUS</A>.</P><P><B>value</B> is the focus offset in microns; positive values movethe secondary mirror towards the primary mirror (i.e. closer to thesky along the light path). It is required unless /Incremental isspecified.</P><P><B>/Incremental</B> add the new focus offset to the existing focusoffset, rather than replacing it.</P><P><B>Returned keywords:</B> SecFocus.</P><DL>   <DT><B>Details</B>:</DT></DL><UL>   <LI>The mirrors are automatically focused and tilted to compensate   for changing altitude, temperature and differences between various   instruments. SET FOCUS simply allows the user to specify a fixed   focus offset which is added to the automatic adjustment.</LI>      <LI>Because the mirrors are moved as the telescope altitude   changes, this command cannot actually move the mirrors unless the   telescope is tracking. If the user attempts to set focus at other   times the new setting will be recorded but not yet implemented. A   warning message is printed.</LI></UL><H3><A NAME=SetGBinFactor></A>SET GBINFACTOR=(x, y)</H3><P>Sets the desired bin factor for the guider. Warning: <A HREF="#SetInstrument">SETINSTRUMENT</A> <B>always</B> resets this value to the default for theguider in question.</P><P><B>x, y</B> bin factor, dimensionless. If <B>y</B> is omitted, itis set to <B>x</B>. The value is not checked aside from assuring itis positive. If a value is set that the guide camera does notsupport, the guide camera will refuse to take images.</P><P><B>Returned keywords:</B> GBinFactor</P><H3><A NAME=SetGBoxSize></A>SET GBOXSIZE=(x, y)</H3><P>Sets the size of the guide centroiding box (the region of theguide image used for centroiding while guiding). Must be large enoughto include the entire guide star (including wings) and offer somemargin for motion of the star (tracking error) but not be so largethat other stars are included in the box.</P><P><B>x, y</B> size of box, in degrees. If <B>y</B> is omitted, it isset to <B>x</B>.</P><P><B>Returned keywords:</B> GBoxSize</P><P>Warning: normal centroiding presently ignores this parameter, soit is only used with GUIDE/SCAN. I hope to fix this eventually but itrequires a modification of the guider interface.</P><H3><A NAME=SetGFilter></A>SET GFILTER=filtNum</H3><P>Changes the guide camera filter.</P><P><B>Returned keywords:</B> GCFilt</P><H3><A NAME=SetGFocus></A>SET GFOCUS=value</H3><P>Changes the user-settable focus offset for the guide camera. Seealso <A HREF="#SetFocus">SET FOCUS</A>.</P><P><B>value</B> is the focus offset in microns; positive values movethe guide camera closer to the sky along the light path. It isrequired unless /Incremental is specified.</P><P><B>/Incremental</B> add the new focus offset to the existing focusoffset, rather than replacing it.</P><P><B>Returned keywords:</B> GCFocus.</P><DL>   <DT><B>Details</B>:</DT></DL><UL>   <LI>The guide camera is automatically to compensate for   differences between various instruments and guide camera filters.   SET GFOCUS simply allows the user to specify a fixed focus offset   which is added to the automatic adjustment.</LI></UL><H3><A NAME=SetGScanSize></A>SET GSCANSIZE=(x, y)</H3><P>Sets the size of the guide scan box (the region of the guide imagewhich will be searched for the guide star star). This should belarge, since guide star positions are often not known veryaccurately, and it's usually more important to find a good brightstar than to find the specified guide star.</P><P><B>x, y</B> size of box, in degrees. If <B>y</B> is omitted, it isset to <B>x</B>.</P><P><B>Returned keywords:</B> GScanSize</P><H3><A NAME=SetGStar></A>SET GSTAR &#91;coordSet&#91;coordsys&#93;&#93;</H3><P>Specifies the position of one or more guide stars. Warnings:</P><UL>   <LI>This command turns off guiding.</LI>      <LI>GUIDE/DefGStars overrides the effects of this command,   overwriting any information set using SET GSTAR.</LI></UL><P><A HREF="#StdParamCoordSet"><B>coordSet</B></A> the desiredposition (and optional velocity). The default is 0,0,0,0; but nodefault is permitted if coordsys, /PM, /Px or /RV are specified.</P><P><A HREF="#StdParamCoordSys"><B>coordsys</B></A><B>.</B> thedesired coordinate system. <B>Mount</B> and <B>physical</B> areprohibited. The default is <B>GProbe</B>. Note: if you specify<B>GProbe</B> coordinates do not specify a probe number; it will beignored.</P><P><B>/Name = name</B> the name of the object (a character string);default is no name.</P><P><B>/Magnitude = mag</B> object brightness in magnitudes (floatingpoint); default is "unspecified".</P><P><B>/Distance=distance</B> the distance to the object in au. Notethat you cannot specify both /Distance and /Px as they are differentways of inputting the same information. The default is infinity.</P><P><A HREF="#StdQualPM"><B>/PM=(pm1, pm2)</B></A> proper motion inarcseconds/century (default is zero).</P><P><B>/Px=parallax</B> parallax in arcseconds (1/parsecs) (default iszero)</P><P><B>/RV=radvel</B> radial velocity in km/s, positive receding(default is zero)</P><P><B>defaults for /PM, /Px and /RV</B></P><UL>   <LI>If "coordsys" and at least one of /PM, /Px, or /RV are   specified, then the omitted values are zero (default = 0)</LI>      <LI>If "coordsys" is specified but all of /PM, /Px and /Rv are   omitted, then the star is assumed to be "fixed".</LI>      <LI>If neither "coordsys" nor any of /PM, Px, or /RV are   specified, then all values are left alone (default = current   value). This allows the TRACK command to restart the axes using   the current position (e.g. if an axis goes out of bounds or is   manually halted).</LI></UL><P><B>/Probes=(probe1, probe2,...)</B> specifies which guide probesto set. Allowed values are integers or <B>all</B>.</P><H3><A NAME=SetInstrument></A>SET INSTRUMENT&#91;=inst_name&#93;</H3><P>Specifies which instrument to use; automatically loads a file ofspecifications for that instrument position, rotates the tertiarymirror to direct light to the proper instrument position, and adjuststhe collimation (see SET FOCUS). If no instrument is specified, thecurrent one is assumed.</P><P><B>inst_name</B> the name of the instrument; abbreviations areacceptable if unique</P><P><B>/GCView=view_name</B> changes the guide camera view to the onespecified. The default guide camera view has no name; to obtain it,omit /GCView.</P><P><B>/Keep=(item1, item2,...)</B>, where items are: <B>scaleFac</B>,<B>secFocus</B>, <B>gcFocus</B>. Specifies which items to retainduring the instrument change. Items omitted will be nulled.</P><P><B>Returned keywords:</B> same as <A HREF="#ShowInstrument">SHOWINSTRUMENT/Full</A>.</P><H3><A NAME=SetMsgFilter></A>SET MSGFILTER=msgType</H3><P>Allows you to filter out messages by other users (you always seeall messages you generate yourself).</P><P><B>msgType</B> is the minimum message type to display, as follows.Letteres in parentheses are the associated command tag:</P><UL>   <LI><B>All</B> (default) includes command state: started (&gt;)   and superceded or done(:)</LI>      <LI><B>Information</B> (I)</LI>      <LI><B>Warning</B> (W)</LI>      <LI><B>Error</B> (F); errors that cause a command to fail</LI>      <LI><B>Fatal</B> (!); errors serious enough to cause a process to   die.</LI>      <LI><B>None</B></LI></UL><P>Example: SET MSGFILTER=Warning will show you warnings and moreserious messages generated by everybody, plus all messages (of anytype) generated by you.</P><H3><A NAME=SetPredFWHM></A>SET PREDFWHM=predFWHM</H3><P>Sets the predicted FWHM of guide stars. Used by the guide imagecontroller both for scanning for stars and for centroiding (thecentroid box is some multiple of the predicted FWHM).</P><P><B>predFWHM</B> predicted fwhm, in degrees.</P><P><B>Returned keywords:</B> PredFWHM</P><H3><A NAME=SetPtRefRadius></A>SET PTREFRADIUS=radius</H3><P>Specifies the region in which a position reference star is closeenough to your object be used for correcting local pointing error."Radius" is only an approximation; the region used is a weirdnoncircular shape.</P><P><B>radius</B> radius (more or less) of box, in degrees.</P><P><B>Returned keywords:</B> PtRefRadius.</P><H3><A NAME=SetMaxUsers></A>SET MAXUSERS=value</H3><P>Sets the maximum number of new users of the command interpreter.Generally this should be left at some large value such as 20 or 50.In a few limited cases it may be desirable to temporarily restrictother people's ability to use the TCC. The minimum allowed value is1.</P><P><B>Caution</B>:</P><UL>   <LI>Changing the maximum number of users has no affect on current   users. If you want to get rid of current users, you must   explicitly kick them off. VMS commands $ SHOW USERS/FULL and $   STOP may be used for this.</LI>      <LI>Existing users with user numbers larger than the current   allowed maximum users are <B>not</B> counted towards the total   when validating new users. So it is possible to have 3 users   connected, set maximum users to 3 and still have new users able to   connect. It is not possible that there could be more than three   such new users, however.</LI></UL><P>In summary, this is a crude command, not intended for responsive,finely tuned security. It is primarily used to prevent other usersfrom connecting while the TCC software starts up.</P><P><B>Returned keywords:</B> MaxUsers.</P><H3><A NAME=SetPtScanSize></A>SET PTSCANSIZE=(x, y)</H3><P>Sets the size of the pointing error box (the region of the guideimage which will be searched for the guide star star). This should besmall, since position reference star positions are known veryaccurately, and it's very bad to find the wrong star.</P><P><B>x, y</B> size of box, in degrees. If <B>y</B> is omitted, it isset to <B>x</B>.</P><P><B>Returned keywords:</B> PtScanSize.</P><H3><A NAME=SetScaleFactor></A>SET SCALEFACTOR=value</H3><P>Sets the desired scale factor. Requires that the primary andsecondary mirror both be movable in piston. Scale factor is definedas actual focal plane scale / nominal scale, where larger scale (andhence larger scale factor) gives higher resolution, e.g. morepixels/arcsec</P><P><B>Returned keywords:</B> ScaleFac.</P><H3><A NAME=SetStInterval></A>SET STINTERVAL=(track_int,slew_int)</H3><P>Sets the intervals between status updates during tracking andduring slewing.</P><P><B>track_int, slew_int</B> time interval in seconds</P><P><B>Returned keywords:</B> StInterval.</P><H3><A NAME=SetTime></A>SET TIME</H3><P>Loads earth orientation predictions from the current earthorientation data file and then recalibrates the TCC's system clockfrom the observatory time standard. Warns and continues if the earthorientation data file cannot be read.</P><P><B>/IgnoreSynch</B> ignores the "out of synchronization" flag fromthe clock (which indicates that the clock time may be way off), andsets the TCC clock anyway. Please use this qualifier with extremecaution!</P><P><B>Returned keywords:</B> &lt;Axis&gt;DTime plus all thosereturned by <A HREF="#ShowTime">SHOW TIME/Full</A>.</P><H3><A NAME=SetWavelength></A>SET WAVELENGTH item1=value1 &#91;,item2=value2&#93;</H3><P>Sets the central wavelength for refraction correction for theobject and/or the guide star(s), and computes the correspondingrefraction coefficients.</P><P><B>item</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Obj</B> wavelength for object, in Angstroms</DT>            <DT><B>GStars</B> wavelength for all guide stars, in      Angstroms</DT>   </DL></BLOCKQUOTE><P><B>Returned keywords:</B> ObjWavelength, GSWavelength.</P><H3><A NAME=SetWeather></A>SET WEATHER item1=value1 &#91;,item2=value2 &#91;, ...&#93;&#93;</H3><P>Sets one or more entries in the global weather data block. It alsoupdates the refraction correction coefficients and the collimationcorrection. Both corrections affect the telescope position, so youcan choose to not update them, if you prefer.</P><P><B>item</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>AirTemp</B> outside air temperature, in C</DT>            <DT><B>SecTrussTemp</B> secondary truss temperature, in C</DT>            <DT><B>PrimF_BFTemp</B> two measures of primary mirror      temperature: front temperature, back - front temperature      difference, in C</DT>            <DT><B>SecF_BFTemp</B> two measures of secondary mirror      temperature: front temperature, back - front temperature      difference, in C</DT>            <DT><B>TLapse</B> temperature lapse rate, in C/km</DT>            <DT><B>Pressure</B> pressure in Pascals</DT>            <DT><B>Humidity</B> fractional humidity (e.g. 0.2 for 20%)</DT>            <DT><B>WSpeed</B> wind speed in m/s</DT>            <DT><B>WDirection</B> wind direction in degrees: S = 0, E =      90</DT>   </DL></BLOCKQUOTE><P><A HREF="#StdQualRefCoefficients"><B>/NoRefCoefficients</B></A>prevents recomputation of refraction coefficients. The coefficientsare also updated, by default, at the beginning of every slew andafter each <A HREF="#SetWavelength">Set Wavelength</A> command.</P><P><A HREF="#StdQualCollimate"><B>/NoCollimate</B></A> preventsupdating the collimation correction.</P><P><B>Returned keywords:</B> same as <A HREF="#ShowWeather">SHOWWEATHER/Full</A>.</P><H3><A NAME=Show></A>SHOW commands...</H3><UL>   <LI><A HREF="#ShowItem">SHOW item</A></LI>      <LI><A HREF="#ShowBlock">SHOW BLOCK block-name</A></LI></UL><H3><A NAME=ShowItem></A>SHOW item</H3><P>Returns various kinds of information.</P><P><B>item</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B><A NAME=ShowAxisConfig></A>AxisConfig</B> displays      configuration infomation about the axis controllers, including      motion limits (used by the TCC) and status masks. Returned      keywords: &lt;Axis&gt;Lim, AxisBadStatusMask,      AxisWarnStatusMask, AxisMaxDTime.</DT>            <DT><B><A NAME=ShowDatabase></A>Database</B> returns      information about the global database used to share data among      processes. The information is probably only useful for      debugging and software maintenance. Returned keywords: Text,      BlockInfo.</DT>            <DT><B><A NAME=ShowExpTime></A>ExpTime</B> displays the      exposure time specified via <A HREF="#SetExpTime">SET      EXPTIME</A>. Returned keywords: ExpTime.</DT>            <DT><B><A NAME=ShowFocus></A>Focus</B> returns the focus      offsets specified via <A HREF="#SetFocus">SET FOCUS</A>.      Returned keywords: Focus.</DT>            <DT><B><A NAME=ShowGBinFactor></A>GBinFactor</B> returns the      guide camera bin factor set via <A HREF="#SetGBinFactor">SET      GBINFACTOR</A>. Returned keywords: GBinFactor.</DT>            <DT><B><A NAME=ShowGBoxSize></A>GBoxSize</B> returns the guide      camera box size set via <A HREF="#SetGBoxSize">SET      GBOXSIZE</A>. Returned keywords: GBoxSize.</DT>            <DT><B><A NAME=ShowGFilter></A>GFilter</B> returns the guide      filter set via <A HREF="#SetGFilter">SET GFILTER</A>. Returned      keywords: GFilt.</DT>            <DT><B><A NAME=ShowGScanSize></A>GScanSize</B> returns the      guide scan box set via <A HREF="#SetGScanSize">SET      GSCANSIZE</A>. Returned keywords: GScanSize.</DT>            <DT><B><A NAME=ShowGStar></A>GStar</B> returns user-specified      guide star position and related parameters, most of which are      set via the <A HREF="#SetGStar">SET GSTAR</A> command or      automatically by <A HREF="#Guide">GUIDE ON/DefGStars</A>.      Returned keywords: GProbe, GSPos, GSSys, GSPM. GSPM is      displayed only if the information (proper motion, etc.) is      relevant to the coordinate system.</DT>            <DT><B><A NAME=ShowGStats></A>GStats</B> returns statistics of      the last 20 or so guide corrections. But if guiding is off, or      less than 2 guide corrections have been applied since guiding      was turned on, you just get a complaint (insufficient data).      Returned keywords: GStats.</DT>            <DT><B><A NAME=ShowInstrument></A>Instrument</B> returns      information about the current instrument, set via the <A HREF="#SetInstrument">SET      INSTRUMENT</A> command. Returned keywords: GCNFilt, GCView,      GPCtr, GProbe, GPRotGImAng, Inst, InstPos. Also possibly      CurrGCFilt, GCamID, GMechID, RotID. /Full adds keywords:      GImCtr, GImLim, GImScale, GPLim, GPRotXY, IImCtr, IImLim,      IImScale, IPConfig. Also possibly GCFilt, GCFocus, ScaleFac,      SecFocus.</DT>            <DT><A NAME=ShowLocks></A><B>Locks</B> displays information      about all resource locks held by the various TCC processes. The      information is probably only useful for debugging and software      maintenance. Return keyword: LockInfo.</DT>            <DT><B><A NAME=ShowMaxUsers></A>MaxUsers</B> displays the      maximum number of users, set via the <A HREF="#SetMaxUsers">SET      MAXUSERS</A> command. Returned keyword: MaxUsers.</DT>            <DT><B><A NAME=ShowMount></A>Mount</B> returns the mount      position of the main axes. Returned keywords: TelMount,      RotMount.</DT>            <DT><B><A NAME=ShowMyNumber></A>MyNumber</B> returns your user      ID number (assigned when you run the TCC software). Returned      keywords: YourUserNum.</DT>            <DT><B><A NAME=ShowObject></A>Object</B> returns user-specified      object position and related parameters, most of which are set      via the <A HREF="#Track">TRACK</A> command. Returned keywords:      ObjName, ObjMag, ObjSys, ObjPM, ObjPos, ObjZPMPos, ObjOff,      TDICorr, ObjArcOff, Boresight, GuideOff, CalibOff, RotType,      RotPos, ObjNetPos, ObjInstAng, SpiderInstAng. (ObjPM is only      displayed for mean coordinate systems.)</DT>            <DT><B><A NAME=ShowPhysical></A>Physical</B> returns the      physical position of the main axes. Returned keywords: TelPhys,      RotPhys.</DT>            <DT><B><A NAME=ShowPtRefRadius></A>PtRefRadius</B> returns the      pointing error reference star radius set via <A HREF="#SetPtRefRadius">SET      PTREFRADIUS</A>. Returned keywords: PtRefRadius.</DT>            <DT><B><A NAME=ShowPredFWHM></A>PredFWHM</B> returns the      predicted guide star FWHM set via <A HREF="#SetPredFWHM">SET      PREDFWHM</A>. Returned keywords: PredFWHM.</DT>            <DT><B><A NAME=ShowPtScanSize></A>PtScanSize</B> returns the      pointing error scan box set via <A HREF="#SetPtScanSize">SET      PTSCANSIZE</A>. Returned keywords: PtScanSize.</DT>            <DT><B><A NAME=ShowScaleFactor></A>ScaleFactor</B> returns the      current scale factor, which can be set via <A HREF="#SetScaleFactor">SET      SCALEFACTOR</A> and may also vary during instrument changes or      guiding. Returned keywords: ScaleFac. /Full adds      ScaleFacLim.</DT>            <DT><B><A NAME=ShowStatus></A>Status</B> returns information      about the state of the control system. Returned keywords:      TCCStatus, TCCPos, AxePos, ObjInstAng, AzInstAng, AzGImAng,      DeadProcs. Some of these are only returned if they have changed      or with /Full. Others are only returned with /Full. DeadProcs      is only returned if there are actually dead processes.</DT>            <DT><B><A NAME=ShowStInterval></A>StInterval</B> returns the      interval between status updates, during tracking and slewing      set via <A HREF="#SetStInterval">SET STINTERVAL</A>.</DT>            <DT><B><A NAME=ShowTime></A>Time</B> returns the current time      in several time systems. The time returned is the time the      command was parsed. There is not attempt to compensate for      delays in transmitting the time string. However, the various      kinds of time returned are consistent with each other. Note      that there is a <A HREF="#SetTime">SET TIME</A> command, but it      calibrates the TCC's clock from the observatory's time      standard. Returned keywords: TAI, UT1, LST, UTC_TAI.</DT>            <DT><A NAME=ShowUsers></A><B>Users</B> returns information      about all users and purges any users that disconnected      improperly. More specifically, it shows information about      anybody subscribed to the message hub (which should be anybody      who is running a TCC command interpreter), and purges any users      who disconnected from the TCC without unsubscribing from the      message hub. Returned keywords: UserInfo, BadUser.</DT>            <DT><B><A NAME=ShowVersion></A>Version</B> returns the version      of the TCC control system software (as a text string). Returned      keywords: Text.</DT>            <DT><B><A NAME=ShowWavelength></A>Wavelength</B> returns the      central wavelength for refraction correction for the object and      the guide star, set via <A HREF="#SetWavelength">SET      WAVELENGTH</A>. Returned keywords: ObjWavelength,      GSWavelength.</DT>            <DT><B><A NAME=ShowWeather></A>Weather</B> returns weather      information set via <A HREF="#SetWeather">SET WEATHER</A>. Also      returns the last date at which any weather item was changed.      Returned keywords: AirTemp, SecTrussTemp, PrimF_BFTemp,      SecF_BFTemp, TLapse, Pressure, Humidity, WSpeed, WDir,      TAI.</DT>   </DL></BLOCKQUOTE><P><B>/Full</B> certain items return more information if /Full isused. See the description of the item in question for moreinformation; if /Full is not listed, it has no effect.</P><P><B>Warning:</B> this command is in flux, and the various items maychange. See the document describing the final plans for status fordetails.</P><H3><A NAME=ShowBlock></A>SHOW BLOCK block-name</H3><P>Displays information in the global database. By default, itdisplays to the screen, but you may send output to a file using/Output. The format is compatible with <A HREF="#SetBlock">SETBLOCK</A>: files written with SHOW BLOCK/OUTPUT may be read with SETBLOCK/INPUT.</P><P>Warning: the format is <B>not</B> in MC-compatible keyword-valueformat.</P><P><B>block-name</B> a block name; for the list and a description ofeach, see <A HREF="#SetBlockBlockName">SET BLOCK block-name</A></P><P><B>/Output = file</B> the specified file is used for output.</P><P>/NoRead instead of showing the data in the database, prints out ablock of null values: numbers are zero, logicals are false, andstrings are all nulls. This can be handy for obtaining the format ofa block; however, it's main reason for existence is for symmetry withthe <A HREF="#SetBlock">SET BLOCK</A> command (/NoRead is crucial forSET BLOCK).</P><H3><A NAME=Spawn></A>Spawn &#91;command&#93;</H3><P>Executes one or more DCL commands. The command interpreter will betied up until the spawned commands finish.</P><P><B>command</B> is any DCL command, for example "show logtcc_sec".</P><P>The behavior depends greatly on whether <B>command</B> and/or<B>/Input</B> are specified:</P><UL>   <LI>If <B>command</B> is specified and requires input: input is   taken from /Input (if specified), else input is taken from the   user.</LI>      <LI>If <B>command</B> is specified and does not require input: the   command is executed. Then if /Input is specified, any commands in   the input file are executed.</LI>      <LI>If <B>command</B> is omitted: commands are taken from /Input,   if specified, else they are taken from the user, using prompt   TCC_$. In the latter case you must issue the "logout" command to   return to normal operation.</LI></UL><P>Warning: the output will probably not be in standard format. Henceyou should be prepared to handle nonstandard output or else redirectoutput using the /Output qualifiers.</P><P><B>/Input = file</B> input comes from the specified file.</P><P><B>/Output = file</B> output is sent to the specified file.</P><H3><A NAME=Talk></A>TALK port &#91;command&#93;</H3><P>Communicates with a remote device, such as an axis controller.</P><P>TALK terminates if it reads ^Z (end-of-file) or the escape string(see /Escape), from the user. It also exits with an error status if aread times out (unless you use /IgnoreReadError), or some otherproblem occurs.</P><P><B>port</B> is any controller serial port. Some useful portsare:</P><BLOCKQUOTE><DL>      <DT><B>tcc_Az</B> azimuth axis.</DT>            <DT><B>tcc_Alt</B> altitude axis.</DT>            <DT><B>tcc_Rot</B> instrument rotator.</DT>            <DT><B>tcc_GCam</B> guide camera image controller.</DT>            <DT><B>tcc_GMech</B> guide camera mechanical controller (e.g.      focus and filters).</DT>            <DT><B>tcc_Encl</B> enclosure controller.</DT>            <DT><B>tcc_Prim</B> primary mirror.</DT>            <DT><B>tcc_Sec</B> secondary mirror.</DT>            <DT><B>tcc_Tert</B> tertiary mirror.</DT>            <DT><B>note:</B> All of these use the default terminator      ("OK").</DT>   </DL></BLOCKQUOTE><P><B>command</B> is the command to send. It must be in double quotesif it includes spaces. If specified, just the one command is sent. Ifomitted, multiple commands are read from the input source specifiedby /Input.</P><P><B>/Input = file</B> the specified file is used for input. Ifomitted, SYS$INPUT is used. Ignored if a command is specified.</P><P><B>/TimeLimit = delta-time</B> causes communication with thedevice to time out after "delta-time" seconds. This prevents TALKfrom locking up if a device is hung. TimeLimit = 0 specifies no limit(infinite time). The default time limit is one second.</P><P><B>/Escape = escape_string</B> provides a second means of exitingTALK. To exit, the escape string must be entered on its own line(&lt;CR&gt;escape_string&lt;CR&gt;). This is useful for ending a datafile early (since it is difficult or impossible to embed ^Z in a textfile), or when logged in via a medium that will not transmit controlcharacters. Warning: the escape string is <B>case sensitive</B>!Ignored if a command is specified.</P><P><B>/Terminator = term_string</B> the termination string of theremote device. Default is "OK". This is the string the remote devicesends to indicate that the current command is finished and the deviceis ready for more input. It is not case-sensitive. Most FORTH-basedcontrollers use "OK", and most of our controllers are FORTH-based,hence "OK" is the default. After sending each string from the sourceto the remote device, TALK reads the remote device until thetermination string is found (at the end of a line). It then stopsreading from the remote device and waits for new data from thesource. If the terminator is not found before the time limit isreached, TALK complains and exits (unless /IgnoreReadError isused).</P><P><B>/IgnoreReadError</B> normally after a read error, TALK exits,just as with any other kind of error. /IgnoreReadError allows you tocontinue after a read error. This is especially useful if you wish toignore read timeouts. With /IgnoreReadError, once a read erroroccurs, TALK complains and stops reading from the port. It gets a newline of data from the source (user or file), and just before itwrites it to the remote device, it purges the typeahead buffer.Ignored if a command is explicitly specified.</P><P><B>Details:</B></P><UL>   <LI>TALK locks the port and sends the command to the specified   port. It then reads and prints any replies received on that port   until the "termination string" (see /Termination) is found at the   end of a reply or else a read times out (see /TimeLimit) or some   other error occurs. Once it stops reading it unlocks the port. If   reading commands from an input (instead of just sending the one   specified command) and if no error occurs it then reads the next   command from the specified input source and starts the process   over.</LI>      <LI>Note that TALK is synchronous -- it sends one command at a   time to the port, and waits until all replies have been read from   the port before obtaining the next command. Hence it is much less   interactive than HOST, but it is safe in that it locks the port   while the command is being processed.</LI>      <LI>Just before sending the very first line of data to the port,   TALK purges the port's typeahead buffer. If an error occurs (and   /IgnoreReadError is true, so that TALK continues) then it flushes   the buffer again before sending the next command.</LI></UL><P><B>Warnings:</B></P><UL>   <LI>Since TALK locks the port until it receives its replies, it is   somewhat safe to use while other processes (such as tracking) are   talking to the port. The locking prevents your command and replies   getting mixed up with those of other processes. However, there   other dangers, some are listed below.</LI>      <LI>If you cause the device to return too much information, this   may hog the port for so long that the other process(es) are   harmed. This is especially likely when talking to the axes   controllers during tracking.</LI>      <LI>If you change the operation of the device while another   process is using it, you can cause all kinds of mischief.</LI>      <LI>Don't send commands longer than 60 characters to the blue box;   it will hang.</LI></UL><H3><A NAME=Track></A>TRACK &#91;coordSet&#91;coordsys&#93;&#93;</H3><P>Causes the telescope to slew to and track an object. Also allowsyou to correct local pointing error (maximize the local pointingaccuracy). The TRACK command terminates guiding.</P><P><A HREF="#StdParamCoordSet"><B>coordSet</B></A> the desiredposition (and optional velocity). The default position is the currentposition, but if any of "coordsys", /PM, /Rv or /Px are specified,then no default is permitted. Also, if one axis of coordSet isspecified then both axes must be specified.</P><P><A HREF="#StdParamCoordSys"><B>coordsys</B></A><B>.</B> thecoordinate system you are using. The default is the currentcoordinate system. Mount axis are azimuth, altitude. Instrument orGImage coordinates are not allowed.</P><P><B>/Name = name</B> the name of the object (a character string);default is no name.</P><P><B>/Magnitude = mag</B> object brightness in magnitudes (floatingpoint); default is "unspecified".</P><P><B>/Distance=distance</B> the distance to the object in au. Notethat you cannot specify both /Distance and /Px as they are differentways of inputting the same information. The default is infinity.</P><P><A HREF="#StdQualPM"><B>/PM=(pm1, pm2)</B></A> proper motion inarcseconds/century (default is zero).</P><P><B>/Px=parallax</B> parallax in arcseconds (1/parsecs) (default iszero), Only used for FK4, FK5, galactic and apparent geocentriccoordinates; ignored otherwise. See /Distance for an alternative wayof specifying the same information.</P><P><B>/RV=radvel</B> radial velocity in km/s, positive receding(default is zero). Only used for FK4, FK5 and galactic coordinates;ignored otherwise.</P><P><B>defaults for /PM, /Px and /RV</B></P><UL>   <LI>If "coordsys" and at least one of /PM, /Px, or /RV are   specified, then the omitted values are zero (default = 0)</LI>      <LI>If "coordsys" is specified but all of /PM, /Px and /Rv are   omitted, then the star is assumed to be "fixed".</LI>      <LI>If neither "coordsys" nor any of /PM, Px, or /RV are   specified, then all values are left alone (default = current   value). This allows the TRACK command to restart the axes using   the current position (e.g. if an axis goes out of bounds or is   manually halted).</LI></UL><P><B>/RotType = </B><A HREF="#RotType"><B>rot_type</B></A> sets thetype of rotation. Default is to keep the current rotation type.Special case: if a nonzero scan velocity is specified then RotType isignored and object rotation is used. Warning: if you specify arotation type, you must also specify a rotation angle with /RotAngle.See also the <A HREF="#Rotate">ROTATE</A> command.</P><P><B>/RotAngle = coord</B> sets the angle of rotation. Special case:if a nonzero <A HREF="#Track_ScanVelocity">scan velocity</A> isspecified then this angle is used as an offset to the angle computedfor scanning. If specified, then the rotator must be able to move orthe track command is rejected (unless there is no rotator, in whichcase the command is accepted with a warning). See also the <A HREF="#Rotate">ROTATE</A>command.</P><DL>   <DT><A NAME="Track/Stop"></A><A HREF="#StdQualStop"><B>/Stop</B></A>   the telescope (main axes and instrument rotator) will be gently   stopped.</DT></DL><P><A HREF="#StdQualNoAbsRefCorrect"><B>/NoAbsRefCorrect</B></A>specifies whether or not the absolute position fiducials are usedduring the motion.</P><P>If an object position is specified, the default is /AbsRefCorrect.If no object position is specified, the default is /NoAbsRefCorrect(to increase accuracy when restarting an axis). <B>Warning</B>: whenrestarting an axis watch out for an axis unwrapping. Unwrapping is along motion so it's a gamble whether you'll end up with high accuracyor a large error. Normally you'll win, but don't take the risk if youdon't have to. For more information click <A HREF="#StdQualAbsRefCorrect">here</A>.</P><P>When using TRACK/PTERR, this flag only applies to the initial slewto the reference star. Absolute reference correction is never appliedwhen making the final slew to the object, thus maximizing theaccuracy of the correction.</P><P><B>/Keep = (offsetType1, offsetType2, ...)</B> controls whetherthe specified offsets are kept or zeroed. Default behavior depends onthe offset (see below). Offset types are:</P><BLOCKQUOTE><DL>      <DT>For the following offsets the default is to zero them,      unless no new object is specified (e.g. restart the axes), in      which case the default is to keep the offset:</DT>            <DT><B>&#91;No&#93;ObjOffset</B> Object offset.</DT>            <DT><B>&#91;No&#93;ArcOffset</B> Object arc offset.</DT>            <DT><B>&#91;No&#93;Boresight</B> Boresight (instrument plane      offset).</DT>            <DT>For the following offsets the default is to keep only the      position component but zero the velocity component:</DT>            <DT><B>&#91;No&#93;GCorrection</B> Net guiding correction.</DT>            <DT><B>&#91;No&#93;Calibration</B> Local pointing error      correction.</DT>   </DL></BLOCKQUOTE><P><A HREF="#StdQualRestart"><B>/Restart = (&#91;no&#93;axis1,&#91;no&#93;axis2...)</B></A> specifies whether or not to try torestart halted axes. The default is to try to restart all axes.</P><P><A HREF="#StdQualPerfect"><B>/Perfect</B></A> the move onlyproceeds if all axes can make it. For TRACK/PTERR this setting isignored for slewing to the position reference star; that slew alwaysuses a perfect slew.</P><P><A HREF="#StdQualRefCoefficients"><B>/NoRefCoefficients</B></A> donot update refraction coefficients. By default these are updatedusing the latest weather data before computing the new move.</P><P>For TRACK/PTERR, this setting will only be used for the firstslew; if there is a second slew (which must be from the positionreference star to the object, if it occurs) the refractioncoefficients are left alone. This prevents a badly timed weatherupdate from messing up a newly determined pointing correction (thoughit is very unlikely to ever make any difference).</P><P><A HREF="#StdQualCollimate"><B>/&#91;No&#93;Collimate</B></A>specifies whether or not to update collimation. If an object positionis specified, the default is /Collimate. If no object position isspecified, the default is /NoCollimate. Hence correcting localpointing error for the current object using TRACK/PTERR or restartinga halted axis using TRACK leaves collimation alone, for betteraccuracy.</P><P>For TRACK/PTERR, this setting will only be used for the firstslew; if there is a second slew (which must be from the positionreference star to the object, if it occurs) the collimation is leftalone.</P><P><A HREF="#StdQualWrap"><B>/RotWrap = wrap</B></A> specifies thedesired wrap for the instrument rotator (if present). The default is"middle". Ignored if rot_type is mount. Warning: for TRACK/PTERR thespecified wrap preference is used only for the slew to the positionreferenc star; "near" wrap is always used for the slew to theobject.</P><P><A HREF="#StdQualWrap"><B>/AzWrap = wrap</B></A> specifies thedesired wrap for the aximuth axis. The default is "near". Ignored ifcoordsys is mount. Warning: for TRACK/PTERR the specified wrappreference is used only for the slew to the position referenc star;"near" wrap is always used for the slew to the object.</P><BLOCKQUOTE>Special Motions</BLOCKQUOTE><P><B><A NAME=TrackPtErr></A>/PtError&#91;=(item1,item2,...)&#93;</B> Starts a "pointing error sequence",which can do one or more of the following: slew to a positionreference star your object (the position specified in the TRACKcommand), log the error to a file of pointing data, center up on thatstar and/or slew to your object. The item list controls thesebehaviors. Each <B>item</B> is one of the following:</P><BLOCKQUOTE><DL>      <DT><B>NoFindReference</B> use the current object as the      position reference star. Normally the telescope searches its      position reference catalog for the star nearest the position      specified by the TRACK command, and uses that as its position      reference star. <B>Warning</B>: the guide star wavelength,      <B>not</B> the object wavelength, is used for refraction      correction.</DT>            <DT><B>NoRefSlew</B> do not slew to the reference star.      Normally the telescope slews to the reference star such that it      is centered on the guide camera. Note: if NoRefSlew is used,      pointing error cannot be measured, logged or corrected.</DT>            <DT><B>Log</B> log the pointing error in the current pointing      error log file, or to SYS$OUTPUT (which is usually your      terminal) if no log file has been opened with the <A HREF="#PtErr">PTERR</A>      command. Be warned that the format of this data is NOT      MC-compliant.</DT>            <DT><B>NoCorrect</B> do not correct the pointing error.      Normally the pointing error is measured and corrected by adding      an offset to the position of the telescope mount. Note that      this correction is only valid for the local region of the sky.      You should reuse this command whenever you slew to a new object      or after a long period of tracking.</DT>            <DT><B>NoObjSlew</B> do not slew to the specified object after      performing the other actions. This is useful for taking      pointing data, as one may specify a a grid position rather than      the position of an actual star, and have the telescope move to      the position reference star nearest that grid position.      Normally the telescope will move to the position specified by      the TRACK command upon completion of the pointing error      sequence.</DT>   </DL></BLOCKQUOTE><P>The pointing error sequence runs in background unless <A HREF="#StdQualWait">/Wait</A>is specified. To abort, slew to another object, issue anotherTRACK/PTERR command, or use <A HREF="#AxisStop">AXIS STOP</A>,<A HREF="#AxisInit">AXIS INIT</A>, or <A HREF="#AxisReset">AXISRESET</A> .</P><P>The pointing error sequence uses the guide star wavelength forrefraction correction. This is true even if you are measuringpointing error using the current object (e.g.<B>NoFindReference</B>). This is because the guider may have adifferent filter than the instrument, and because it's easier toexplain and implement. Use <A HREF="#SetWavelength">SETWAVELENGTH</A> to set the guide star wavelength, if necessary, andplease restore it to something reasonable afterward.</P><P><B><A NAME="Track_ScanVelocity"></A>/ScanVelocity = (V1, V2)</B>initiates TDI ("drift-scanning"), if a nonzero velocity is specified.The scan begins at the position specified with the track command (orthe current position, if none specified). V1, V2 are in degrees/secon the sky. The path is a great circle tangent to the velocity vectorin the user's coordinate system at the starting point of the scan.The speed of the scan is the magnitude of the velocity vector.Details:</P><UL>   <LI>The rotator is set so that the Y direction of the instrument   points along the direction of motion. /RotType is ignored (with a   warning). /RotAngle, if specified, is treated as an offset to the   computed angle; this is only needed if the instrument data block   for the instrument is inaccurate.</LI>      <LI>The motion is obtained by setting up an arc offset with   velocity = V1, V2, zero position, and TDI correction turned on.TDI   correction makes the scan rate constant on the instrument, and   equal to the magnitude of the scan velocity vector. The scan rate   on the sky is not quite constant, because it is adjusted to   compensate for refraction.</LI>      <LI>To end scanning and resume normal tracking at the current   position you may use TRACK/SCANVEL=(0,0) or <A HREF="#Offset">OFFSET   ARC</A>. To simply stop the telescope the usual TRACK/STOP will   work fine.</LI></UL><P><B>Returned keywords</B>: CalibOff, InstOff, MoveItems, GuideOff,ObjMag, ObjName, ObjOff, ObjPM, ObjPos, ObjSys, ObjZPMPos, RotPos,RotType, RotWrapPref, SlewBeg, SlewEnd, AzWrapPref. Some values whichremain unchanged will not be returned. ObjPM is only returned ifObjSys is a mean coordinate system. Wrap preferences are onlyreturned if they are not "near".</P><P><B>Notes</B></P><UL>   <LI>If the requested position is unavailable, the telescope   continues to track the current object (if any); however, guiding   will still be terminated.</LI>      <LI>If you omit the position and coordinate system (and /Stop),   TRACK will attempt to restart any halted axes. This can be used   "unwrap" an axis: if an axis runs into a limit while tracking (and   so halts), and there's another wrap it could use, TRACK will   unwrap the axis and resume tracking. It will also restart any axes   halted with <A HREF="#AxisStop">AXIS STOP</A>, <A HREF="#AxisInit">AXIS   INIT</A>, or <A HREF="#AxisReset">AXIS RESET</A>. It cannot   restart the telescope after TRACK/STOP, as that erases the object   data.</LI>      <LI>If you specify the position and/or coordinate system, then the   "object" and "instrument plane" offsets will be zeroed. (If you   omit both parameters, the offsets are left alone, to give you the   "restarting" behavior just described).</LI>      <LI>You cannot use /PtErr with physical or mount coordinate   systems (because the TCC can't convert this to the position   reference star catalog system to find a "nearby" star). If you   wish to find a star near a given az/alt point use observed   coordinates and the option NoObjSlew. Also note that a guide   camera must be available for the current instrument.</LI></UL><P><B>Warnings</B></P><UL>   <LI>You may not track in Instrument or GImage coordinates.</LI>      <LI>Please do NOT specify a sidereal time when using observed or   apparent topocentric coordinates. For a full explanation, see the   <A HREF="#NoteSidTime">note on sidereal time</A>.</LI></UL><H3><A NAME=Wait></A>WAIT delta-time</H3><P>Pauses for the specified delta-time.</P><H3><A NAME=ControlChars></A>^C, ^Y and ^Z</H3><P>^C and ^Y are identical; they abort the current command (if any)and then <A HREF="#Exit">EXIT.</A></P><P>^Z as a command is identical to <A HREF="#Exit">EXIT.</A> ^Z mayalso be used at other times, such as during the <A HREF="#Talk">TALK</A>command, to terminate input.</P><H2><A NAME=InputRules></A>Input Rules</H2><H3><A NAME=InpRuleGeneral></A>General</H3><P>The following rules are used for input (commands and data files)unless otherwise noted:</P><UL>   <LI>Blank lines and white space:      <UL>      <LI>Blank lines are ignored.</LI>            <LI>Leading and trailing white space is ignored. White space      includes spaces, tabs, and many nonprinting characters (some      control characters have special meaning).</LI>            <LI>Commas are allowed as white space in files, but not in      commands (see "Command Format" for more information).</LI>            <LI>Any amount of white space is allowed between "tokens", e.g.      words, numbers, etc.</LI>   </UL>   </LI>      <LI>Comments:      <UL>      <LI>For a command, anything following an exclamation mark (!)      is a comment.</LI>            <LI>For a data file, any line beginning with an exclamation      mark (!) is a comment; comments may NOT appear on the same line      as data (except in a few special cases).</LI>   </UL>   </LI>      <LI>Character strings:      <UL>      <LI>Case is ignored.</LI>            <LI>A string may be enclosed in double quotes. This is usually      optional, but is required if the string includes anything other      than letters and numbers (e.g. spaces or punctuation) or if you      wish a string specified in a command to remain in lower      case.</LI>            <LI>A blank string is indicated as follows: "". Simply typing a      blank line isn't enough, because blank lines are ignored.</LI>   </UL>   </LI>      <LI>Floating-point numbers:      <UL>      <LI>The magnitude range is 2.9E-39 through 1.7E38.</LI>            <LI>The precision is approximately 16 digits.</LI>            <LI>A decimal point is not required.</LI>            <LI>You may specify an exponent using E.</LI>            <LI>Exponents must be integers.</LI>            <LI>Not-a-number, infinity, etc., are not yet supported</LI>   </UL>   </LI></UL><H3><A NAME=InpRuleUnits></A>Units</H3><P>The following units are used for input (commands and data files),unless otherwise noted:</P><UL>   <LI>Angles (including star positions) are in decimal degrees.</LI>      <LI>Velocities are in degrees/second.</LI>      <LI>Absolute time is International Atomic Time (TAI) expressed as   a Modified</LI>      <LI>Julian Date (MJD), in seconds. (This is unusual; MJD is   usually specified in days rather than seconds).</LI>      <LI>Time intervals are in seconds.</LI></UL><H3><A NAME=InpRuleCommands></A>Commands</H3><P>The basic input rules are given under <A HREF="#InpRuleGeneral">general</A>and <A HREF="#InpRuleUnits">units</A>. Rules specific to commandsinclude:</P><UL>   <LI>Unique abbreviations are allowed wherever a keyword is   expected.</LI>      <LI>Commas are required to separate items in a list, and are   prohibited anywhere else in commands. Hence commands may NOT be   used as white space. Please be careful when using commas because   misuse is one of the most common sources of error. Examples:      <DL>      <DT>TRACK 45.003, 37.256 FK4 ! OK</DT>            <DT>TRACK 45.003 37.256 FK4 ! error: no comma between two      elements of a list</DT>            <DT>TRACK 45.003, 37.256, FK4 ! error: comma between two      parameters</DT>   </DL>   </LI>      <LI>Commands may be modified by the use of "qualifiers"; these are   words preceded by a slash (/). The rules for qualifiers are as   follows:      <UL>      <LI>Qualifiers are always optional unless noted otherwise.</LI>            <LI>Qualifiers may appear anywhere in the command except: if a      command name consists of two words (e.g. SHOW BLOCK) don't put      a qualifier between the two words, and don't break up the list      of values by inserting a qualifier. Examples:            <DL>         <DT>SET BLOCK/Output = tdat:TelMod TelMod ! OK</DT>                  <DT>TRACK/PM = (0.01, 0) 45.003, 37.256 FK4 ! OK</DT>                  <DT>TRACK 45.003, 37.256/PM=(0.01, 0) FK4 ! OK</DT>                  <DT>SET/INPUT=file BLOCK block ! Error: qualifier breaks up         a command name</DT>                  <DT>TRACK 45.003/PM=(0.01, 0), 37.256 FK4 ! Error: qualifier         breaks up a list of values</DT>      </DL>      </LI>   </UL>   </LI></UL><H2><A NAME=StandardParameters></A>Standard Parameters</H2><H3><A NAME=StdParamCoord></A>coord = pos &#91;, vel &#91;,time&#93;&#93;</H3><P>Specifies a position and/or velocity for one axis.</P><DL>   <DT><B>pos</B> the position in degrees. The default is 0 unless   otherwise noted.</DT>      <DT><B>vel</B> the velocity in degrees/sec. The default is 0.</DT>      <DT><B>time</B> the TAI date in MJD seconds. The default is the   current date. Time is only used for computing pos(t) = pos + vel *   (t - time).</DT>      <DT><B>Warning:</B> <B>time</B> may go away, as it seems to be   useless; if you think you'll need it, please contact me about   keeping it in.</DT></DL><H3><A NAME=StdParamCoordSet></A>coordSet = pos1, pos2, ...posN&#91;, vel1, vel2, ...velN &#91;, time&#93;&#93;</H3><P>Specifies position and/or velocity for N axes. The usual case istwo axes.</P><DL>   <DT><B>pos</B> the position in degrees. The default is 0 unless   otherwise noted.</DT>      <DT><B>vel</B> the velocity in degrees/sec. The default is 0.</DT>      <DT><B>time</B> the TAI date in MJD seconds. The default is the   current date. Time is only used for computing pos1,2(t) = pos1,2 +   vel1,2 * (t - time).</DT>      <DT><B>Warning:</B> <B>time</B> may go away, as it seems to be   useless; if you think you'll need it, please contact me about   keeping it in.</DT></DL><H3><A NAME=StdParamCoordSys></A>coordsys</H3><P>Specifies the coordinate system.</P><DL>   <DT><B>coordsys</B> is one of:      <DL>      <DT><B>ICRS &#91;= date&#93;</B> modern mean RA, Dec.      <B>Date</B>, specified as a Julian epoch, is the date of      observation (the date from which proper motion correction is      applied). There is no default date; if you specify nonzero      proper motion or radial velocity then you must also specify a      date!</DT>            <DD>The ICRS coordinate system is based on the Hipparcos      catalog and has superceded FK5, but ICRS is basically      FK5=2000.0. Unlike FK5 you need never (and are not allowed to)      specify an equinox.</DD>            <DT><B>FK5 &#91;= equinox&#93;</B> modern mean RA, Dec.      <B>Equinox</B> is both the date of the equinox and the date of      observation (the date from which proper motion correction is      applied), specified as a Julian epoch. The default equinox      (omit or specify 0) is 2000.0.</DT>            <DD>Positions dated 2000 or later are almost certainly FK5. For      older positions, you may want FK4. In detail, FK5 is mean RA,      Dec in the Fricke FK5 system, IAU 1976.</DD>            <DT><B>FK4 &#91;= equinox&#93;</B> Old-style mean RA, Dec.      <B>Equinox</B> is both the date of the equinox and the date of      observation (the date from which proper motion correction is      applied), specified as a Besselian epoch. The default equinox      (omit or specify 0) is 1950.0. Positions dated 1950 or older      are probably FK4. For modern positions use FK5. In detail, FK4      is mean RA, Dec in the Bessel-Newcomb FK4 system      (pre-1976).</DT>            <DD>Warning: TCC coordinate conversions involving FK4 positions      may have a fraction of an arcsecond of error.</DD>            <DT><B>Galactic &#91;= date&#93;</B> Galactic coordinates (IAU      1958). <B>Date</B>, specified as a Julian epoch, is the date of      observation, and is provided in the unlikely event that proper      motion correction is desired. There is no default date; if you      specify nonzero proper motion or radial velocity then you must      also specify a date!</DT>            <DT><B>Geocentric &#91;= equinox&#93;</B> Apparent geocentric      RA, Dec. <B>Equinox</B> is the date of the equinox, as a Julian      epoch. The default date (omit or specify 0) is "now". Proper      motion information is ignored.</DT>            <DD>It is safest to use the current date for solar system      objects, as accuracy may be less if a date is specified. The      TCC converts internally to FK5 J2000 and then to current      apparent geocentric, and applies correction for steller      aberration in both directions. These corrections probably      cancel out, but I am not positive.</DD>            <DT><B>Topocentric &#91;= time&#93;</B> Apparent topecentric      azimuth, altitude, not corrected for refraction (see Observed,      next). <B>Time</B> is the local apparent sidereal time, as an      angle in degrees. The default time (omit or specify a      <B>negative value</B>) is "now", but the behavior is very      different for default time vs. explicit time. For more      information, see the <A HREF="#NoteSidTime">note on sidereal      time</A>.</DT>            <DT><B>Observed &#91;= time&#93;</B> Apparent topocentric      azimuth, altitude corrected for refraction. Proper motion,      parallax and radial velocity are ignored. <B>Time</B> is the      local apparent sidereal time specified as an angle in degrees.      The default time (omit or specify a <B>negative value</B>) is      "now", but the behavior is very different for default time vs.      explicit time. For more information, see the <A HREF="#NoteSidTime">note      on sidereal time</A>.</DT>            <DT><B>Physical</B> Mechanical position of the axis, in      degrees. This is the position of an ideal telescope. The      telescope model and calibration and guiding corrections are      applied but the boresight offset is ignored. The axes are      (azimuth, altitude) and/or rotator (depending on the command),      and the zero and sign conventions are as follows:</DT>   </DL>      <UL>      <LI>Azimuth 0 is south, 90 is east</LI>            <LI>Altitude 0 is horizon, 90 is zenith</LI>            <LI>Rotator angle increases from the direction of increasing RA      (east) to the direction of increasing Dec (north). Whether that      is CW or CCW depends on the instrument position.</LI>   </UL>      <DL>      <DT><B>Mount</B> Mechanical position of the axis, in the units      the axis controller uses. The telescope model, boresight,      guiding and calibration offsets are all ignored. Unlike other      coordinates, the position you specify is not adjusted into a      convenient wrap; instead, the axes go exactly where you      specify. Azimuth and altitude mount positions should closely      match their physical position. However, the rotator mount angle      can be any linear function of the physical angle -- the offset      and scale (including sign of the scale) are arbitrary.</DT>            <DT><B>Instrument</B> Position on the instrument's focal plane.      Axis 1, 2 = instrument x, y in degrees on the sky. 0, 0 is the      "center" of instrument (which can actually be any point on the      instrument, depending on how it is set up). With the rotation      angle=0 and rotation type=object, instrument x is the direction      of increasing RA (east) and y is the direction of increasing      Dec (north); this is by definition of object rotation. Although      it is up to the person setting up the instrument data block, it      is strongly recommended that y be chosen as the direction of      increasing rows of the CCD. Then x will be the direction of      increasing or decreasing rows (depending on the instrument      position and choice of readout amplifier).</DT>            <DT><B>Rotator</B> Position on the focal plane with respect to      the instrument rotator, in degrees on the sky. 0,0 is the      center of rotation. This has a fixed offset and rotation angle      with respect to instrument coordinates; the offset and angle      are set in the instrument data block.</DT>            <DT><B>GProbe = gpNum</B> Position with respect to a guide      probe on the guide image (the probe number must be specified).      Axis 1, 2 = x, y in degrees. 0,0 is a center of the guide      probe. The orientation is the same as GImage, but the zero      point is different and units are degrees, not pixels.</DT>            <DT><B>GImage</B> Position on the guide image (CCD). Axis 1, 2      = x, y in <B>unbinned pixels</B>. 0,0 is a corner of the CCD      and 0.5, 0.5 is the center of the corner pixel. X is rows, y is      columns, x = 0 is the first row read out and y = 0 is the first      pixel read from each row. This is the only case in which we do      not gurantee a right-handed coordinate system.</DT>            <DD>&nbsp;</DD>   </DL>   </DT></DL><P>Notes:</P><UL>   <LI>All equatorial coordinate systems (FK4 through Mount) have the   first axis as the equatorial angle (e.g. RA or Az) and the second   axis as the polar angle (e.g. Dec or Alt).</LI>      <LI>All equatorial coordinate systems are right handed, in the   sense that if the first axis is x and the second axis is y then z   points towards the sky (away from the telescope). To support this,   az/alt coordinate systems are 0 south, 90 east.</LI>      <LI>All focal plane coordinate systems (Instrument through GImage)   are right handed except for GImage. This means that they are some   rotation (never a flip) with respect to axis 1 and 2 of any of the   equatorial systems. For example instrument x,y is a rotation of   the direction of increasing RA, direction of increasing Dec.</LI>      <LI><A NAME=NoteSidTime></A><B>Note on sidereal time:</B> Handling   of default sidereal time and explicit sidereal time are very   different. If you omit the time (or specify a <B>negative   value</B>) then the effective sidereal time is always "now", i.e.   it increases as time passes. Hence the position is fixed with   respect to the telescope. If you specify the time, it does NOT   change as time passes. Hence the position is (approximately) fixed   with respect to the sky, not the telescope. Conversions using a   fixed time (explicitly specified) are less accurate than those   using the current time (default), and the accuracy degrades the   further from the current time you are. The reason is because the   apparent geocentric position for the whole day is assumed equal to   its true current value.</LI></UL><H2><A NAME=StandardQualifiers></A>Standard Qualifiers</H2><H3><A NAME=StdQualAbsRefCorrect></A>/AbsRefCorrect,/NoAbsRefCorrect</H3><P>Specifies whether or not to apply absolute encoder correctionsduring a move. Absolute encoders are coarser than the incrementalencoders, and so should be avoided for short offsets or when veryhigh precision is required (e.g. when centering up on a nearbyposition reference star). On the other hand, the absolute encodersare necessary because they correct for slippage of the incrementalencoders. Hence use of the absolute position encoders is recommendedwhenever the lower precision is acceptable, such as when slewing to anew object.</P><H3><A NAME=StdQualWrap></A>/AzWrap = wrap, /RotWrap = wrap</H3><P>Sets the wrap preferences for the aximuth axis or the instrumentrotator, as appropriate. Note that wrap preference is ignored formount coordinates!</P><DL>   <DT><B>wrap</B> is one of:      <DL>      <DT><B>nearest</B> use the nearest angle. This is the default      for /AzWrap and is also used for all offsets (except when      position is specified in mount coordinates, of course).</DT>            <DT><B>middle</B> use the angle nearest the middle of the      range. This is the default for /RotWrap, to reduce the odds      that an exposure will be halted because the rotator hits a      limit.</DT>            <DT><B>positive</B> use the larger angle.</DT>            <DT><B>negative</B> use the smaller angle.</DT>   </DL>   </DT></DL><H3><A NAME=StdQualCollimate></A>/Collimate</H3><P>Specifies whether to update the position of the mirrors tomaintain collimation as a function of temperature and altitudeposition. Collimation is updated, by default, by the commands<A HREF="#Track">Track</A>, <A HREF="#Rotate">Rotate</A> and<A HREF="#SetWeather">Set Weather</A>. It is also updated by<A HREF="#SetFocus">Set Focus</A> and at regular intervals (asspecified in the Tune block). Collimation updates may be entirelydisabled using the <A HREF="#Process">Process</A> command.</P><H3><A NAME=StdQualPM></A><B>/PM=(pm1, pm2)</B></H3><P>Proper motion in arcseconds/century (default is zero). The firstcomponent is dPos1/dt, not dPos1/dt cos(pos2), i.e. it gets large atthe poles. Be careful, as some catalogs use the TCC's definition,others present proper motion as velocity on the sky.</P><P>Proper motion is only used for mean coordinate systems (FK4, FK5and galactic coordinates); it is ignored otherwise.</P><H3><A NAME=StdQualPerfect></A>/Perfect</H3><P>Normally a move will complete even if some "unimportant" axescannot be moved. For instance a TRACK command will complete even ifthe guide camera would no longer be able to see the guide star./Perfect prevents the requested move from happening unless all axescan be moved.</P><P>Note that if an axis is halted and that axis is prohibited frombeing restarted by <A HREF="#StdQualRestart">/Restart</A> (byexplicit request or by default) then /Perfect will indeed prevent themove from taking place.</P><H3><A NAME=StdQualRefCoefficients></A>/RefCoefficients</H3><P>Specifies whether to update the refraction coefficients in the objand/or gs block (depending on the command). Both are updated, bydefault, by the <A HREF="Set%20Weather">Set Weather</A> command. Inaddition, Obj coefficients are updated, by default, at the beginningof every slew (<A HREF="#Track">Track</A> command). GS coefficientsare always updated whenever guiding is turned on and either is alwaysupdated if the corresponding wavelength is set by <A HREF="#SetWavelength">SetWavelength</A>.</P><H3><A NAME=StdQualRestart></A>/Restart = (&#91;no&#93;axis1,&#91;no&#93;axis2...) or /NoRestart</H3><P>If an axis is halted (e.g. due to going out of bounds), but couldmove to the new position, /Restart=axis allows it to move and/Restart=noaxis prevents it from moving. /NoRestart prevents all axesfrom moving (hence is synonymous with /Restart=NoAll). The defaultdepends on the command.</P><P><B>axis</B> is one of:</P><BLOCKQUOTE><DL>      <DT><B>Azimuth</B></DT>            <DT><B>Altitude</B></DT>            <DT><B>Rotator</B></DT>            <DT><B>All</B> (default) all axes</DT>            <DT>In addition, <B>Tel1</B> and <B>Tel2</B> are accepted for      Azimuth and Altitude, but are deprecated.</DT>   </DL></BLOCKQUOTE><P>Note that "halted" is not the same thing as tracking a stationaryposition; when an axis is halted it is not tracking at all--the TCCdoesn't know where it is. This condition is displayed by <A HREF="#ShowStatus">SHOWSTATUS</A>.</P><H3><A NAME=StdQualStop></A>/Stop</H3><P>Stops tracking in a gentle and controlled fashion, ending at theposition of the telescope when the command was issued (hence there issome intentional backtracking). It is different than <A HREF="#Axis">AXISSTOP</A> in the following ways:</P><UL>   <LI>The halt is computed (if possible), hence gentle and with a   known time of completion.</LI>      <LI>Your current position is lost, so you cannot resume tracking,   e.g. by using TRACK.</LI></UL><H3><A NAME=StdQualWait></A>/Wait</H3><P>Causes a command to execute synchronously (i.e. in theforeground). This will freeze up the command interpreter until thecommand is finished. This is useful for command files. All commandswhich normally execute in background accept /Wait.</P><H2><A NAME=History></A>History</H2><H3>Version 2.6.8, November 13, 2002</H3><UL>   <LI>Bug fix: the "AzPosRejected" keyword was displayed as "Az   PosRejected". Thanks to Craig Loomis for reporint this bug.</LI></UL><H3>Version 2.6.7, September 22, 2002</H3><UL>   <LI>Modified SET INSTRUMENT to set rotation type to none if the   instrument has no rotator. This was done to reduce spurious   warnings for the 3.5m and to make sure collimation is always   updated by SET INSTRUMENT. The one potential downside is your   existing rotation is not remembered (e.g. if you switch to an   instrument with no rotator and back again).</LI>      <LI>Modified to not consider the rotator "significant" if it does   not exist. This reduces spurious errors when using an instrument   with no rotator.</LI>      <LI>Bug fix: track/stop was badly broken: it sent no pvt triplets,   thus leaving the axis drifting. The fact that it could do this   exposed a hole in the error checking code (an attempted slew   should never be able to fail quietly like that), so significant   code rework was called for. Thanks to Russet for reporting this   bug.</LI>      <LI>Bug fix: /Perfect allowed intentionally halted axes (via   track/stop or rotate/stop, not axis stop or axis init), which   meant that track/pterr could slew to a reference star and   integrate and only then realize that it could not use the data it   had collected.</LI>      <LI>A side effect of the above changes: rotate commands are   accepted even if there is no rotator. You see a warning, but the   command executes and causes az and alt to be reslewed (i.e. they   drift for a short time, perform a very short slew and resume   tracking). I hope this does not prove troublesome in   practice.</LI></UL><H3>Version 2.6.6, August 20, 2002</H3><UL>   <LI>Added message keyword &lt;Axis&gt;PosRejected. This gives a   bit more information when a slew position is rejected or tracking   fails due to an axis being out of bounds. Note that there are rare   situations where it will not show up (most notably: if a slew is   accepted but the path proves to go out of bunds); still, it   handles most cases.</LI>      <LI>Improved track/pterr error messages slightly: if slewing to   the specified object position after the correction (the default)   and this position cannot be obtained; rejects the command with the   standard error messages.</LI>      <LI>Bug fix: if there was no rotator then track/rot and rotate   were rejected, despite a warning "rotation recorded but not   implemented". Now the command is accepted, as per the   warning.</LI></UL><H3>Version 2.6.5, June 10, 2002</H3><UL>   <LI>Minor change: the track command now accepts /rot_type=none   without specifying a rotation angle.</LI>      <LI>Minor change: a slew that is rejected will now trigger a   status update. The main driver was to help software that monitors   the state of the rotator during SET INST. However, other users may   also appreciate the change.</LI>      <LI>Bug fix (SDSS PR #3850): track/stop and rotate/stop were   broken (the request was rejected because significant axes could   not be moved).</LI>      <LI>Bug fix (SDSS PR #3842): TrackAdvTime is reported after an   INIT, even though it is irrelevant and may be so small that it   triggers a warning. This complicates the use of TrackAdvTime as a   test of process scheduling adequacy.</LI>      <LI>Bug fix (SDSS PR #3841): "guide camera focus not adjustable"   message is missing its ending double quote. This showed up when   selecting an instrument with a fixed-focus guider.</LI></UL><H3>Version 2.6.4, May 10, 2002</H3><UL>   <LI>Bug fix (SDSS PR #3685): if there is an error while writing a   message to a user, it is not fully reported (msg_HandleUserMsg is   mis-calling the vms error condition reporter). (Whether the   occasional write errors the SDSS is seeing indicate another bug is   an open question at this point).</LI>      <LI>Bug fix (SDSS PR #3688): if az or rot tracks into a limit, it   is reported as a MaxVel error (the TCC tries to unwrap the axis to   avoid the limit). Fixed by adding a new wrap code NoUnwrap which   is used for all tracking updates and offsets (see next item).</LI>      <LI>Related bug fix: if an offset would push az or rot out of   bounds, the telescope will try to unwrap to avoid the limit. Fixed   by using the new wrap code NoUnwrap for offsets (see previous   item).</LI>      <LI>Bug fix (SDSS PR #3684): format of AxisNoSlew and AxisNoTrack   keywords did not match the documentation. Output was an array of   three booleans (e.g. AxisNoTrack=T,F,T) and was changed to a   string of three booleans (e.g. AxisNoTrack="TFT"), as documented   and to match AxisStop and AxisInit.</LI></UL><H3>Version 2.6.3, April 26, 2002</H3><UL>   <LI>Bug fix (3.5m PR 2002082): if the message hub got behind,   processes could be delayed while writing output. This could cause   tracking to fail. (This showed up after installing Multinet;   perhaps because it occasionally takes too many CPU cycles;   formerly I believed this failure could only happen if too many   users were connected.) Now messages are written without waiting   for them to be read. This does have one down side: it will be   harder to debug problems if the message hub gets behind; initially   it will show up as delayed output until the hub gets so far behind   that its input queue fills, at which point messages will be lost   and you'll see reports about it.</LI>      <LI>Bug fix: the operating system had a (formerly undocumented)   upper limit on the size of mailboxes. The limit is implemented   poorly (asking for more can silently result in obtaining   significantly less than the limit). I worked around this problem   so that one always obtains as large a mailbox as possible. This   greatly increased the size of the queue for output sent to the   message hub.</LI></UL><H3>Version 2.6.2, February 28, 2002</H3><UL>   <LI>Bug fix: a user could block access to devices (such as the   axis controllers) by typing ^S while an interactive command was   executing. (SDSS PR #3183)</LI>      <LI>Bug fix: could not track/pterr if there was no rotator, e.g.   the 3.5m Echelle. (Thanks to Russet for reporting this).</LI>      <LI>Bug fix: MountErrCode was not useful (showed halt by request)   if an axis tracked into a limit or was otherwise halted because of   some error. This finally closes SDSS PR #2522.</LI>      <LI>Bug fix: could fail to slew if the rotator could not make it,   even if a perfect slew was not requested. This was especially   obvious at the beginning of a DOPTERR sequence, and required   restarting the sequence. (SDSS PR #3135).</LI>      <LI>Removed the special debugging code for the SDSS. There is a   reasonable chance that the AxisDTime problem (SDSS PR #3056) will   be solved by the fix for SDSS PR #3183. If not, I have more   detailed debugging code ready.</LI></UL><H3>Version 2.6.1, February 4, 2002</H3><UL>   <LI>Bug fix: SET INST could crash one's command interpreter if   executed for an instrument with no rotator.</LI>      <LI>Removed references in the manual introduction to "3.5m".</LI></UL><H3>Version 2.6, January 16, 2002</H3><UL>   <LI>If an axis halts while tracking, cannot be slewed, etc., the   reason is now reported.</LI>      <LI>Added SHOW AXISCONFIG to display the motion limits used by the   TCC, status masks, etc.</LI>      <LI>Added SET GBINFACTOR.</LI>      <LI>SET INSTRUMENT now displays rotator motion limits.</LI>      <LI>Added documentation for SHOW GBOXSIZE (the command has been   present, but undocumented, since version 2.5).</LI>      <LI>Added /Collimate to the OFFSET, ROTATE and TRACK commands. The   default behavior of the commands is unchanged, but now you can   control whether a collimation update is triggered.</LI>      <LI>Added /RefCoefficients to the OFFSET, ROTATE and TRACK   commands. The default for ROTATE and TRACK is now to compute new   refraction coefficients at the start of the command.</LI>      <LI>Changed guiding to always compute the guide star refraction   coefficients at the start of guiding.</LI>      <LI>Changed TRACK/PTERR slightly so that /NoAbsRef, /AzWrap and   /RotWrap always apply only the the slew to the pointing reference   star (if any); formerly they always applied to the first slew,   which would be to the object if there was no slew to a pointing   reference star. This is more sensible and also matches the   behavior of the new qualifiers /Collimation and /RefCo.</LI>      <LI>Restored output for every tracking update using new keyword   TrackAdvTime, which replaces moribund keywords TrackUpd and   AdvTime.</LI>      <LI>Bug fix: TRACK/PTERR incorrectly zeroed the guide correction   after applying a pointing reference update (without first moving   the guide correction into the calibration correction; at one time   that move was probably being done.)</LI>      <LI>Bug fix (SDSS PR #2319): the message hub did not properly   release mailboxes when users disconnected (it was trying to   release them but using the wrong system service). Eventually the   TCC ran out of I/O channels and could not add users.</LI>      <LI>Changed keyword UserInfo to include mailbox channel number (to   help debug channel leaks).</LI>      <LI>Eliminated a potential bug whereby a badly timed offset might   be able to cause the TCC to fail to issue a tracking update. I am   not sure the bug could occur, but I chose to clean up some messy   code and remove all doubt.</LI>      <LI>Fixed a cosmetic guiding bug: when an error occurred while   guiding it was reported as "happening during guiding startup"   instead of during "guiding".</LI></UL><P>In addition, the 3.5m and SDSS installations differ in that eachhas a different bit of debug code installed (code that is onlyinstalled on the specified TCC):</P><UL>   <LI>3.5m only: if a guide offset induces a change in azimuth   velocity or induces a change in rotator angle (and no rotator   correction was computed) then a warning is printed. Also, the   first time it happens extensive data is logged to the guide   process' log file. This is to help debug PR ID 2002005: "20 arcsec   image jump, unknown reasons".</LI>      <LI>SDSS only: if an MCP command takes too long to execute, a   warning is printed. This is a first step in helping debug the   recent AxisDTime errors. <B>Note</B>: these warnings are perfectly   reasonable (and should be ignored) for INIT commands; they   indicate problems for all other commands.</LI></UL><H3>Manual addition November 1, 2001</H3><UL>   <LI>Documented GCAMERA DODARK (thanks to Jeff Morgan for reporting   it missing).</LI></UL><H3>Version 2.5.5, July 23, 2001</H3><UL>   <LI>Improved the accuracy of orientation angle computations.   (Angle is computed by transforming the desired position and a   slightly offset position. The offset was a vector perpendicular to   the desired position, but is now an arc along a great circle.   Also, the magnitude of the offset was reduced from 0.1 deg to   0.001 deg.)</LI>      <LI>Fixed SDSS bug 2512: arc offsets with time specified as later   than the current time were being mis-handled (the length was   computed to be positive when it should have been negative).</LI>      <LI>Fixed SDSS bug 2518: AxisNoTrack often not shown when an axis   stops tracking (due to an error in axe_NewSegment).</LI>      <LI>Fixed a bug in the mock axis controller (a program used for   testing software): the MOVE command left the velocity unchanged   instead of zeroing it.</LI></UL><H3>Manual additions July 3, 2001</H3><UL>   <LI>Added the description of /TDICorrection to the offset   command.</LI>      <LI>Improved the description of SHOW USERS to describe the purging   of disconnected users.</LI>      <LI>Improved the description of TRACK/ScanVel, as suggested by   David Schlegel.</LI>      <LI>Added Mir to the list of blocks you can show and set. (It has   been an option for a long time, it was simply missing from the   manual.) The list of blocks is now complete.</LI>      <LI>The APO TCCs switched to a new position reference star catalog   when upgrading to version 2.5.4. The new catalog has over 44500   stars in the magnitude range 7-9, whereas the old catalog had 900   stars in the magnitude range 5-7. Note the dimmer stars! Also,   stars in the new catalog have much better rejection of stars with   nearby neighbors (no entry in the Tycho2 catalog within 99.9"),   and any stars that had bad solutions or were listed as multiples   in either the Tycho2 or Hipparcos catalog were rejected. The star   data is from the Hipparcos catalog and the coordinate system is   ICRS with a date of observation of 1991.25.</LI>      <LI>Position reference star catalogs with other magnitude ranges   were also uploaded, giving operators a choice. The set presently   available in tcat is:posref6_8.dat, posref7_9.dat and   posref8_10.dat. Other catalogs are available on request. To change   catalogs:      <UL>      <LI>Edit trcom:setup.com to change the definition of the      logical name tcc_posref_cat</LI>            <LI>$ @tcom:setup ! run setup.com to change the logical      name</LI>            <LI>$ restart pterr ! restart pterr to load the new position      reference catalog</LI>            <LI>Warning: this only redefines the logical name for your      current login session and any new login after you save the      modified setup.com. All other sessions already logged in will      still have the old definition for tcc_posref_cat, and if one of      those is used to restart pterr (whether via restart pterr or      via telstop and telrun) the old star catalog will be      loaded.</LI>   </UL>   </LI></UL><H3>Version 2.5.4, June 28, 2001</H3><UL>   <LI>Added /TDICorrection to the Offset command. This is similar to   normal drift scanning behavior (as obtained by TRACK/SCANVEL) but   does not adjust the rate for refraction. Hence it is useful for   tracking objects moving at a constant rate across the sky (e.g.   the moon or a satellite).</LI>      <LI>SHOW USERS now purges any users that are disconnected. Also,   such users are automatically purged once per hour (by the   background process "SLOW").This should prevent the message hub   from accumulating users that no longer are connected. I believe   this will fix SDSS PR 2319.</LI>      <LI>Added the ability to accept ICRS coordinates (the modern   coordinate system used by the Hipparcos and Tycho catalogs,   basically FK5 J2000). Please see the section on coordinate systems   for more information.</LI>      <LI>Improved the documentation for the various coordinate systems,   for proper motion and corrected the list of keywords returned by   SHOW OBJECT.</LI>      <LI>Added keywords BadUser and TDICorr. Also ObjSys and GSSys can   have a new value ICRS (and can no longer have the value Ecl, an   old change that has now been formalized).</LI>      <LI>Increased the upper limit on the size of the position   reference star catalog from 2000 to 100,000 stars. This is in   preparation for switching to a position reference catalog based on   the Tycho2 star catalog.</LI>      <LI>Internal changes      <UL>      <LI>Added a test program to compare the coordinate conversions      used by the track command (which include some tricks so user      offsets can be applied after proper motion is removed) against      basic coordinate conversions. This verifies several fixes in      2.5.3 and 2.5.4.</LI>            <LI>Added a test program to compare the coordinate conversions      used by the track command and set gstar. This verifies several      fixes in 2.5.0b2 and 2.5.3.</LI>   </UL>   </LI>      <LI>Bug fixes for proper motion and radial velocity:      <UL>      <LI>The track command was not adjusting the distance to the      object for proper motion and radial velocity, thus slightly      affecting parallax computations. This has been fixed. This      problem was not present for guide stars or pointing reference      stars.</LI>            <LI>The track command and the convert/zpm command were not      handling fictitious proper motion of the FK4 system correctly      for objects with specified proper motion or radial velocity.      This problem was not present for guide stars or pointing      reference stars.</LI>            <LI>Galactic coordinates were documented to allow proper      motion, but in fact ignored it; they now handle it (unlikely      though it is that anybody will take advantage of this fact).      However, it is now an error to specify nonzero proper motion or      radial velocity unless you also specify a date.</LI>   </UL>   </LI>      <LI>Other bug fixes:      <UL>      <LI>The diurnal aberration correction was wrong. Thanks to Tom      Murphy for pointing this out and for helping implement and test      the solution.</LI>            <LI>sph_CC2SC (which is used for all coordinate conversions)      could crash on invalid inputs. This was seen on the 3.5m TCC      when an observer input a crazy coordinate system epoch.</LI>   </UL>   </LI></UL><H3>Version 2.5.3A, June 18, 2001</H3><P>The following change was installed early on the 3.5m telescope asversion 2.5.3A and will also be incorporated into 3.5.4 for alltelescopes.</P><UL>   <LI>Increased guide camera time limit for CCD readout from 30   seconds to 80 seconds (twice the longest value seen on the 3.5m   NA2 guider).</LI></UL><H3>Version 2.5.3, May 31, 2001</H3><UL>   <LI>Added GCamera DoDark</LI>      <LI>Added Show Users</LI>      <LI>Added new instrument "NoInst", an instrument perfectly aligned   with the instrument rotator and with some guide probes similarly   aligned. This is helpful for software tests, but should not be   used for observing.</LI>      <LI>Reduced the maximum time cam_o_DoRead waits for CCD readout to   30 seconds, down from 60 seconds. This will speed up recovery if   when the guide camera fails to respond to a read request.</LI>      <LI>Added keyword UserInfo.</LI>      <LI>Fixes to coordinate conversions      <UL>      <LI>Parallax was being ignored for objects (track/parallax and      track/distance commands), pointing reference stars (hence      automated pointing measurement and correction), and guide stars      whose coordinates were specified in RA,Dec (a rare case).</LI>            <LI>(SDSS PR 1756) Proper motion was (still) being miscomputed      for pointing reference stars (hence automated pointing      measurement and correction), and guide stars whose coordinates      were specified in RA,Dec (a rare case). Proper motion was      corrected to 2000.0, rather than to the current date.</LI>   </UL>   </LI>      <LI>Fixes to DoPtErr      <UL>      <LI>Can now vary the maximum altitude at which corrections can      be applied. Formerly dopterr.com was setting the wrong logical      name so the default value was always being used.</LI>            <LI>If nextracorr &gt; 0 the star will only be slewed to once.      Formerly it was slewed to for each iteration, even if already      there (because an internal routine called by texe_dopterr was      ignoring a dofind flag). The old behavior worked, but was      needlessly time consuming.</LI>   </UL>   </LI>      <LI>Other bug fixes      <UL>      <LI>cam_o_DoRead had an incorrect time limit for camera      communication, due to sending a floating point value when an      integer was expected. Hence failed attempts to read the camera      (either while guiding or in response to a gcamera command)      would rarely, if ever, time out properly.</LI>            <LI>GCamera commands resulted in two "&gt;" code started      messages. The second message has been changed to an      informational message and says that the command has begun      executing.</LI>            <LI>Some GCamera errors were not reported with message tags,      hence the command might never seem to terminate.</LI>   </UL>   </LI></UL><H3>Version 2.5.2, May 2, 2001; further TPOINT fixes May 11,2001.</H3><UL>   <LI>NetUserPos will be shown a bit more often.</LI>      <LI>Changed TCC25m longitude and latitude to compensate for tilt   of az axis. The old values were actually those for the 3.5m   telescope (as a side effect of the tinc bug fixed below), so some   of the change corrects a position error rather than an axis   tilt.</LI>      <LI>Bug Fixes:      <UL>      <LI>Changed the definition of the logical name "tinc" so local      include files override common include files.</LI>            <LI>Minor fixes to TPOINT.            <UL>         <LI>OUTMOD and OUTDAT now write standard format text files.         Formerly they were in a slightly strange format that could         be read by TPOINT and the TCC, but showed up oddly when         editing or viewing the data. Note that the command parser         still displays data using the old, odd format, but this         should not affect operation. (Initial work May 2, 2001;         fully fixed May 11, 2001).</LI>                  <LI>INMOD now displays the full caption (the name of the         file of pointing data used to fit the model). (Fixed May 11,         2001).</LI>      </UL>      </LI>   </UL>   </LI></UL><H3>Version 2.5.1, March 2, 2001 (03/02/01)</H3><UL>   <LI>SHOW STATUS (and the T_STATUS background process that issues a   SHOW STATUS at regular intervals) will now display the full status   for any axis that has problems -- bad or warn status bits or   excessive clock error.</LI>      <LI>Added support for "MB" instrument positions; these are at the   corners at the back of the mirror cell (on the 3.5m telescope).   See the file tinc:instdef.for for details.</LI>      <LI>Bug fixes:      <UL>      <LI>The global database could make a process wait unnecessarily      under very unusual circumstances. This probably caused the      occasional deadlock errors and possibly other problems as well.      Fixed by using two locks to access a block of data (one for      hold, one for read/write access) instead of combining these      into one.</LI>            <LI>Added use of new lock flag lck$m_QueCvt flag for read/write      locks in the global database. This will prevent a slew of read      requests from delaying a write request. I have no idea if      writers were ever overly delayed, but it made sense to take      advantage of this new feature, just in case.</LI>            <LI>Requesting a new null lock could result in a delay under      unusual circumstances. Careful coding had, I think, avoided the      problem, but a new lock flag lck$m_Expedite allowed eliminating      that worry.</LI>            <LI>QUEUE STATUS would cause the T_JOBQUEUE process to crash if      a job was running.</LI>            <LI>MIRROR STATUS displayed DesOrient as a warning rather than      as information. Thanks to Russet for pointing this out.</LI>            <LI>Large values of slew_fudge or maxClockError in the Tune      block caused a pointing glitch as a slew ended and tracking      began. The tracking process was scheduling its startup based on      the reported slew end time (which includes those two tuning      parameters) rather than the actual slew end time. Thanks to      Russet and Dan for their very helpful diagnosis.</LI>            <LI>Doubled the size of the message hub's input mailbox from      500 to 1000 full-sized messages. This may fix a problem      reported by the SDSS.</LI>            <LI>tut_NewLock would print incorrect flag information if a new      lock request failed.</LI>   </UL>   </LI></UL><H3>Version 2.5.0b2, January 12, 2001</H3><UL>   <LI>Added the /Scan qualifier to the Guide command.</LI>      <LI>Added Set GBoxSize and Show GBoxSize commands.</LI>      <LI>Modified various axis-related keywords to make the axis name   part of the keyword. Also corrected the description of many other   axis keywords. See the TCC Keywords Dictionary history section for   details.</LI>      <LI>Replaced all use of Tel1, Tel2 with Az, Alt, including the   logical names tcc_Tel1 and tcc_Tel2 that point to the axis   controllers. The old logical names are still around but are   deprecated and will eventually be eliminated.</LI>      <LI>In particular, note that /Tel1Wrap is now /AzWrap.</LI>      <LI>Modified exe_AxeDone to reduce or eliminate extra triggering   of status output as slews begin or end. This also eliminates   another DeadProc warning at startup.</LI>      <LI>Modified tccinterp to be much less likely to show any old   output when a user first connects. Too few messages were being   purged.</LI>      <LI>One can now safely perform an immediate (uncomputed) offset   during guiding. Added a new field obj.offsetEndTime to support   this.</LI>      <LI>Modified the offset command so the default is /NoComputed   during guiding. The default is now /Computed only if /Restart is   specified.</LI>      <LI>Modified MIRROR STATUS to return the most recently computed   desired orientation.</LI>      <LI>Bug/misfeature fixes:      <UL>      <LI>(SDSS PR 1756) User-specified proper motion and parallax      was ignored for guide stars, reducing the accuracy of pointing      measurement and correction as well as guiding on a known star.      Fixed in axe_CompGS.</LI>            <LI>Corrected the startup command file trcom:telstart.com to      eliminate spurious DeadProc warnings.</LI>            <LI>Corrected SET TIME to display the current time, as      documented. The information is not message-tagged, however.      Fixed in exe_Slow.</LI>   </UL>   </LI>      <LI>This version installed on TCC25m on February 5, 2001.</LI></UL><H3>Version 2.4.1b1, October 20, 2000</H3><UL>   <LI>Modified AXIS INIT to fail if an axis controller's clock error   is too large or if an important status bit is set, and to report   axis status.</LI>      <LI>Modified AXIS STATUS to warn if an axis controller's clock is   too far off or if an important status bit is set.</LI>      <LI>Added several fields to the AxeLim block: BadStatusMask,   WarnStatusMask and MaxDTime. (WarnStatusMask is for less serious   status bits; it does not cause AXIS INIT to fail.)</LI>      <LI>Added logical names tcc_Az and tcc_Alt as synonyms for   tcc_Tel1 and tcc_Tel2. Soon I hope to eliminate the latter. (Tel1,   Tel2 are leftovers from when I was generalizing the TCC software   to work with equatorial telescopes.)</LI></UL><H3>Version 2.4.0, October 8, 2000</H3><UL>   <LI>2.4.0b2 released (no code changes).</LI></UL><H3>Version 2.4.0b2, August 18, 2000</H3><UL>   <LI>The SDSS 3.5m telescope's longitude, latitude and elevation   were changed based on new GPS measurements by Bruce   Gillespie.</LI>      <LI>The include file UDPDef was moved from trinc: to tlinc:, since   it is explicitly telescope-dependent.</LI></UL><H3>Version 2.4.0b1, July 17, 2000</H3><UL>   <LI>Processes:      <UL>      <LI>Optional processes may now be disabled without killing      them. These processes are: AutoLouver, BrdTelPos, Collimate and      Status.</LI>            <LI>Added the Process command to enable or disable a      process.</LI>            <LI>Disabled/enabled information is kept in the TUNE block.      Edit TDAT:TUNE.DAT to set defaults.</LI>   </UL>   </LI>      <LI>SETMIR changes:      <UL>      <LI>SETMIR disables collimation at startup and optionally      re-enables it when finished.</LI>            <LI>Run SETMIR by typing SETMIR at the $ prompt. Note that the      code has been moved to the TPROG directory, and the old      directory and files are gone. So the old way of running SETMIR      will not work.</LI>   </UL>   </LI>      <LI>Changed BrdTelPos UDP packet sending code to use DIGITAL   TCP/IP Services for OpenVMS (the layered product formerly known as   UCX), instead of Multinet.</LI>      <LI>Changed SDSS command file relax.com to a TCC batch job:   relax.dat. To use: queue run=relax It automatically disables   collimation at the beginning and reminds you to re-enable it when   you are ready at the end.</LI>      <LI>Changed SET FOCUS and SET SCALE to operate entirely in the   background (now they don't even wait for the Inst block to be   available) and to report completion only after the mirrors finish   moving.</LI>      <LI>Changed guiding to warn and continue (rather than halt) if   changing the scale fails, e.g. because the collimation process is   disabled.</LI>      <LI>Changed TRACK, ROTATE and OFFSET to complain if you attempt to   move the rotator and the instrument doesn't have one. However,   OFFSET still does not complain if you attempt a calibration or   guiding offset for the rotator axis, it only complains if you try   a rotator offset.</LI>      <LI>The TCCUSER account can no longer start the TCC software; it   must already be running. This is due to changes in VMS security.   Paradoxically, this can be fixed, but only by reducing security   relative to the old system.</LI>      <LI>Bug fixes:      <UL>      <LI>Guiding no longer quits if the telescope is offset while      the guider attempts to apply a correction. Instead, the      correction is rejected, a warning is printed and a new      integration is started.</LI>            <LI>SET INST no longer halts tracking.</LI>            <LI>mir_o_MoveOneGalil was not correctly reading the final      terminator after an error. As a result, if two mirror commands      came in quick succession and the first one failed, it could      cause the second command to claim a bad command echo.</LI>            <LI>Computation of actual mirror orientation can now handle      mirrors with six actuators+constraints properly. The sixth      degree of freedom (rotation about z) was being ignored, leading      to overconstraint of the system.</LI>   </UL>   </LI>      <LI>Eliminated all compiler warnings (cosmetic):      <UL>      <LI>Eliminated a Y2K compiler warning in tprog:DoPterr.for by      using DATE_AND_TIME instead of IDATE. DATE_AND_TIME was not      available in DEC Fortran V6.1-386 (F77), the version that came      with VMS 1.5-1h. It is available in Compaq Fortran 77 V7.2-180,      which comes with VMS 7.2-1. I don't know where it first      appeared.</LI>            <LI>Eliminated a compiler warning about a suspicious jump in      SETMIR.</LI>   </UL>   </LI></UL><H3>Version 2.3.1, June 14, 2000</H3><UL>   <LI>User input no longer blocks output or overwrites a line of   output (thus fixing the two misfeatures introduced in version   2.3.0). <A HREF="OperatorsManual.html#OperInteractiveUse">Interactive   Use</A> in the <A HREF="OperatorsManual.html">TCC Operator's   Manual</A> has been updated accordingly.</LI>      <LI>Message output is faster. I had an intentional brief pause for   each message in 2.3.0 to avoid overloading the message hub, but   switched to a synchronous write.</LI></UL><H3>Version 2.3.0, June 8, 2000</H3><UL>   <LI>Added the SPAWN command, which spawns DCL commands.</LI>      <LI>Added the QUEUE command, which runs batch jobs of TCC   commands.</LI>      <LI>Added the SET MSGFILTER command, which replaces $ SHOWMESSAGE   &lt;type&gt;.</LI>      <LI>Overhauled the messaging system to eliminate the TCC slowdown   problem. The new messaging system uses a central message hub which   receives all messages via one mailbox and transmits them to each   user via user-specific mailboxes. The old messaging system used   the sys$BrkThruW system call, which took several seconds to time   out if any user wasn't listening.</LI>      <LI>The messaging system changes introduce some new advantages and   disadvantages. Please read <A HREF="OperatorsManual.html#OperInteractiveUse">Interactive   Use</A> in the <A HREF="OperatorsManual.html">TCC Operator's   Manual</A> before trying to use the TCC.</LI>      <LI>Overhauled TCC software startup to make collisions between   multiple users much less likely during this delicate time. Two   users attempting to start the TCC can still collide, but only for   a short time early in the startup process. The old system used a   command file to start processes and invoke the command interpreter   when needed. Hence multiple users were rarely locked out. The new   system starts a command interpreter (locking out other users)   early on and keeps it going through the rest of the startup   process. This makes good use of the new SPAWN command.</LI>      <LI>Improved the mock hardware controller to detect and complain   about inaccurate time being sent to the axis controllers. This   only affects engineering tests, since the mock axis controller is   not used for observing.</LI>      <LI>Minor fixes to UDP broadcasting code; in one case a return   values was being ignored, in another case a library subroutine was   incorrectly declared a function.</LI></UL><H3>Version 2.2.9, May 18, 2000</H3><UL>   <LI>Bug fix: AXIS INIT was mis-setting axis-controller clocks if   trying to set more than one.</LI></UL><H3>Version 2.2.8, May 5, 2000</H3><UL>   <LI>Bug fixes and diagnostic enhancements to the tracking process:      <UL>      <LI>Changed the tracking process to detect grossly late      tracking updates and halt the axes if they occur. I have some      trepidation about this, but I think it's better than ignoring      the problem and if things are working we should never trigger      this test. This test requires accurate knowledge of when the      current tracking segment ends, which is only now available in      TCC version 2.2.7.</LI>            <LI>Added diagnostic time output for tracking updates called      SchMoveTime. This is displayed whenever axe_i_SchMove decides      to postpone an update because it thinks slewing is occurring      and whenever a problem occurs. In addition, if axe_i_SchMove is      compiled with /d_lines then SchMoveTime is displayed for every      tracking update.</LI>            <LI>Bug fix: the tracking process would occasionally skip a      position update. This apparently occured because the margin was      too small for determining that the axes were slewing, and hence      that a tracking update was not yet needed. Why the margin was      too small is a mystery, but I increased it from a minimal 1      second to a very generous 5 seconds and added an informative      message whenever updates are postponed so we can see exactly      when this happens.</LI>            <LI>Increased Tune.CmdTime from 0.5 seconds to 1 second. This      makes the tracking process wake up significantly earlier,      giving some much-needed breathing room to the SDSS and      developmental TCCs, both of which combine all axis controllers      on one port. The developmental TCC actually quit tracking once      after nearly 24 hours because this margin was too small.</LI>            <LI>Cosmetic bug fix: immediate offsets no longer cause an      irregularity of the end time for the next tracking update nor a      mis-computation of AdvTime.</LI>            <LI>Removed the output of TrackUpd and AdvTime keywords by the      tracking process, to make tracking continue properly if the      slowdown problem occurs.</LI>   </UL>   </LI></UL><H3>Version 2.2.7, April 21, 2000</H3><UL>   <LI>Bug fix: immediate moves were broken (because axe_i_ImmedMove   was mis-calling axe_CheckAxesForSlew).</LI>      <LI>Bug fix: axe_i_SchMove would schedule a move too early if an   immediate move just occurred.</LI>      <LI>Known problem: after an immediate move the tracking process   will show a too-small (and probably negative) AdvTime. This will   be fixed in the next release. Meanwhile, warnings about too-small   advance times have been disabled.</LI></UL><H3>Version 2.2.6, April 3, 2000</H3><UL>   <LI>Added /NoRestart as a synonym for /Restart=NoAll.</LI>      <LI>Improved AXIS INIT to speed it up. First it tries sending the   init command (fast). Then it resynchronizes I/O (slow but safe)   for any axes for which fast init failed. Note: AXIS RESET always   resynchronizes. If reset fails, now tries resynch I/O and init   before giving up (slightly safer than the old method).</LI>      <LI>Changed the tracking process to report a tracking update,   including a measure of how far in advance the update was issued   before the old motion segment expired. Warns if this advance time   gets too small. Having a record of the advance time will make it   easier to spot certain kinds of problems and adjust the tuning   parameters related to tracking.</LI>      <LI>Improved the DoPtErr utility. Added adjustable pauses after   each slew and each offset (after each extra correction, to be   exact). The log file name now includes the date.</LI>      <LI>AXIS will now take negated axes names, e.g. AXIS INIT All,   NoTel1 will initialize Tel2 and the rotator. I doubt this is   useful; it is simply a side effect of fixing /Restart.</LI>      <LI>AXIS will warn if you try to specify synonymous axes (Tel1 and   Azimuth or Tel2 and Altitude). If there is a conflict, the Telx   version is used. For example AXIS INIT Tel1, NoAz will warn and   then initialize the Tel1 (Azimuth) axis.</LI>      <LI>Bug fixes:      <UL>      <LI>ROTATE/STOP and TRACK/STOP were broken. (Reported by Robert      Lupton.)</LI>            <LI>The qualifier /Restart was broken (and has been broken      since TCC version 2.1).</LI>            <LI>Axis controller time error, as reported by AXIS STATUS,      could be off due to reading TCC time before sending the command      (and hence before allocating the port). Typically it was      correct, but occasionally it was way off.</LI>            <LI>It was possible for mov_Path to report a |dt| too small      error for a normal tracking update under very unusual      circumstances. Fixed. (Reported by Russet McMillan.)</LI>            <LI>The utility MakeGrid reported a flag as "increasing      altitude" when it meant "increasing azimuth". (Reported by      Russet McMillan.)</LI>            <LI>DoPtErr claimed to allow specification of the log file name      on the command line. This was not true and still is not true.      The claim was eliminated.</LI>   </UL>   </LI></UL><H3>Version 2.2.5, March 21, 2000</H3><UL>   <LI>Added SHOW LOCKS</LI>      <LI>Modified the description of SHOW DATABASE (including adding   BlockInfo to the list of returned keywords).</LI></UL><H3>Version 2.2.4, March 9, 2000</H3><UL>   <LI>Added the MIRROR command</LI>      <LI>Deleted the PRIMARY, SECONDARY and TERTIARY commands (replaced   by MIRROR)</LI>      <LI>Mirror status now returns mirror mount position, orientation   using the standard keywords. This is only for Galil controllers; I   did not modify the FORTH mirror controller status subroutine   mir_StatusForth because I could not test the changes. Keyword   &lt;Mir&gt;Stat has been changed to accomodate this.</LI>      <LI>Bug fix: mirror initialization and reset returned errors,   probably because the Galil code was updated at some point and the   TCC code was not.</LI></UL><H3>Version 2.2.3, February 29, 2000</H3><UL>   <LI>Modified TRACK and ROTATE so that if you specify a position or   a rotation in mount it will never wrap; it will always be treated   verbatim. It is strongly recommended that only mount coordinates   be used for instrument changes; this guarantees that the telescope   will be in the correct wrap.</LI>      <LI>Modified OFFSET to allow one to omit particular axes. This   seemed particularly important because guide offsets and   calibration offsets can be applied to the rotator, as well as the   main telescope axes. However, if you omit all axes then all axes   default to zero (rather than all being omitted).</LI>      <LI>Modified OFFSET to warn if a boresight offset is specified for   physical or mount coordinates or if a gcorrection or calibration   offset is specified for mount coordinates. Such offsets were   already being ignored but no warning was being printed.</LI>      <LI>Added a warning if a wrap preference is specified for mount   coordinates.</LI>      <LI>Removed the "none" wrap preference. It only applied to mount   and so is now useless.</LI>      <LI>Added offset keyword GuideCorrection, which is synonymous with   GCorrection. Someday I also hope to retire GCorrection and change   TRACK/Keep=GCorrection to TRACK/Keep=GuideCorrection.</LI>      <LI>Modified various commands to complain if you specify the time   component of a coordinate but no position or velocity. Note that   it is rare to specify the time component, so I doubt this warning   will be seen in normal use.</LI>      <LI>Added a description of zero and sign conventions to <A HREF="#StdParamCoordSys">CoordSys</A></LI></UL><H3>Version 2.2.2, January 4, 2000</H3><UL>   <LI>Modified documentation of offset command to note that   Boresight offsets are ignored in Physical and Mount coordinates   and Calibration and GCorrection offsets that are ignored in mount   coordinates. 1/21/00</LI>      <LI>Corrected documentation of rotator wrap preference for ROTATE   and TRACK command to reflect current inconsistency. However, the   next version should have the inconsistency eliminated.   1/21/00.</LI>      <LI>Modified to echo all commands to all users (except for   Broadcast, which already echoes the important part). Commands that   run in the background are echoed as "started" after being parsed   and just before being queued.. This change should aid debugging   and generally keeping track of what's going on, at the cost of   more text scrolling by.</LI>      <LI>Fixed a bug in mir_Adjust.SET FOCUS should warn the user if   the altitude is unknown and so the mirrors will not move. The bug   was suppressing this warning.</LI>      <LI>Fixed a cosmetic bug in trcom:telstart.com: the TCC started   message was not correctly formatted; it was missing a Text   keyword.</LI>      <LI>Changed tut_CheckDP and tut_CheckInt to not display their   module name when reporting an out-of-range value. The module name   is irrelevant. (It would be better to display the module name of   the caller, but that would require changing the many callers of   these two subroutines).</LI>      <LI>tdat:telstart2.dat modified to show the TCC version at   startup.</LI></UL><H3>Version 2.2.1, December 28, 1999</H3><UL>   <LI>Fixed a bug in num_MinimizeDS that caused it to occasionally   fail to converge. The problem was rare because the bug was in a   case that was rarely used.</LI>      <LI>Improved mir_OneMount2Orient to reduce the rate of rejection   of values returned by num_MinimizeDS. The test that is failing is   trying to catch gross failures (ending up at a local minimum), but   in this case is catching convergence that is pretty good, but not   good enough. For now I fixed this by repeating the iteration (a   technique recommended by Numerical Recipes as helping avoid local   minima). If that does not suffice I will tweak up the local   minimum test or the convergence criteria in num_MinimizeDS.</LI></UL><H3>Version 2.2, December 27, 1999</H3><UL>   <LI>Added computation of mirror orientation based on mount   position. This is done by minimizing the length of the vector   phys(orient) - given physical mount length. A sanity check makes   sure a local minimum is not confused for the correct answer.</LI>      <LI>Fixed a bug in str_dp2str that could result in returning extra   data in the string</LI>      <LI>Fixed a bug in the SET BLOCK command that could result in   writing bad data (if blk_Loadxxx failed the returned data was   written to the global database anyway).</LI></UL><H3>Version 2.1.7, December 21, 1999</H3><UL>   <LI>This is a bug fix release. The following bugs were fixed:      <UL>      <LI>prt_ChangeDev would crash while trying to print a      particular error message. This was triggered on the 3.5m      telescope when a lock value block became invalid (for as-yet      unknown reasons), causing TCCInterp (the TCC command      interpreter) to crash sometime around 12/19/99.</LI>            <LI>prt_ReadCtrl would crash if it read zero characters. The      2.5m T_COLLIMATE process died due to this on 12/17/99.</LI>            <LI>prt_Init_Galil was looking for the wrong # of replies (it      wasn't updated for the last Galil software update). This caused      SEC INIT, etc. to report errors even when the initialization      worked fine.</LI>            <LI>tut_ConvertLock was complaining if it could not obtain the      lock immediately if queuing not wanted. This is a fairly normal      condition and so should not have generated a full-fledged error      message. This caused lock manager error messages about the      rotator if one changed instruments while tracking.</LI>   </UL>   </LI></UL><H3>Version 2.1.6, December 1, 1999</H3><UL>   <LI>This is the first version that runs under VMS 7.2.1 instead of   1.5.1-h. Note that this version does NOT support the UDP packet   sender as we are trying to do without Multinet and so must rewrite   that code.</LI>      <LI>The new FORTRAN compiler has improved warnings and caught the   following:      <UL>      <LI>cmd_SetGStar bug fix: test for invalid coord. system was      broken</LI>            <LI>msg_OutVMSError bug fix: was declared an integer function      but returned no value</LI>            <LI>prt_Stream bug fix: was declared a logical function but      returned no value</LI>            <LI>cmd_Track: removed a deprecated jump into an      if/then/else</LI>   </UL>   </LI>      <LI>The new VMS requires new requires SYSPRV privilege to set the   system clock. I am not willing to grant this to normal TCC   software users. Hence the exe_Slow process must now be installed   with privileges. Unfortunately, it turns out it then must have the   tgm_database logical name defined at exec level, which implies the   system name table (or similar privileges). Hence the following   changes:      <UL>      <LI>trcom:setup.com: removed definition of tgm_database logical      name (moved to insttgm.com)</LI>            <LI>trprog:privbuild.com: new, compiles exe_slow</LI>            <LI>trprog:privinst.com: new, installs exe_slow</LI>            <LI>trprog:progbuild: mod. to not handle exe_slow</LI>            <LI>tut_AdjVaxClock: mod. to request SYSPRV; bug fixes:      unsetting privileges if set time failed and was not reporting      correctly if some privs not set.</LI>            <LI>cmd_SetTime: modified to awaken the slow process instead of      setting the clock directly. This was prompted by the need to      have special privileges to set the system clock.</LI>            <LI>exe_slow: mod. to permit early wakeups so the SET TIME      command can wake it</LI>   </UL>   </LI>      <LI>Miscellaneous changes      <UL>      <LI>trcom:maintain.com: added /Old_F77 to fortran symbol.      Needed because some of my code uses a construct which is      apparently illegal in fortran 90: intrinsic functions in a      PARAMETER statement.</LI>            <LI>trcom:telstart.com: added a five second wait after spawning      the initial set of processes; I'm not sure why this is needed,      but it's harmless. Of course more deterministic sequencing      would be nice.</LI>            <LI>ttgm:tgmbuild.com: cleaned up the code and made it like      trprog:privbuild.com</LI>            <LI>ttgm:tgminst.com: cleaned up the code and made it like      trprog:privinst.com</LI>            <LI>tutil:allprog.com: mod. to call trprog:progbuild.com,      saving much duplication of code</LI>            <LI>tutil:doprog.com: mod. to only look for source in tprog      (ignoring a specified directory, if any) and to look for an      option file in tprog (rather than in the current      directory).</LI>   </UL>   </LI></UL><H3>Version 2.1.5, November 4, 1999</H3><UL>   <LI>Modified SET TIME to read the earth orientation prediction   file. This offers a useful way to load a new file.</LI>      <LI>Modified resource locking in the read/write routine in the   global database to be a bit simpler and more generous about   releasing unneeded locks. This may solve the deadlock problem, but   I have not identified a mechanism by which the old locking method   could cause deadlocks.</LI>      <LI>To help diagnose locking problems I added more information to   lock subroutine error messages.</LI></UL><H3>Version 2.1.4, July 21, 1999</H3><UL>   <LI>Replaced SET FOCUS/GCAMERA with SET GFOCUS, by request of the   telescope operators. This should reduce the chances of   accidentally setting the wrong thing. SET FOCUS/GCAMERA still   works but is deprecated, undocumented and will be removed in a   future version.</LI>      <LI>Focus is now required for SET FOCUS and SET GFOCUS unless   /Incr is specified. This prevents accidentally zeroing the   user-set focus.</LI>      <LI>TALK now allows specifying a single command as part of the   command, as opposed to starting a talk session.</LI>      <LI>Made /DefGStars the default for the GUIDE command.</LI>      <LI>New keyword AxisDTime output whenever the TCC's clock is   corrected, e.g. via SET TIME.</LI></UL><H3>Version 2.1.3, July 9, 1999</H3><UL>   <LI>Added minStarsForRot field to instrument data block to improve   the robustness of multi-object guiding.</LI></UL><H3>Version 2.1.2, June 24, 1999</H3><UL>   <LI>Bug fix in TRACK command: was not defaulting mean coordinate   system information to zero if the coordinate system was specified.   So for example if the previous object had nonzero proper motion   then the new object would inherit that information unless the new   proper motion was explicitly specified.</LI></UL><H3>Version 2.1.1, June 11, 1999</H3><UL>   <LI>Bug fix in tracking: the computation of arc offset   acceleration could divide by zero. This was typically seen when   doing uncomputed offsets while drift scanning.</LI></UL><H3>Version 2.1, May 6, 1999</H3><P>Version 2.1 introduced multi-object guiding, correction fordiurnal aberration (useful for solar-system objects), full supportfor multiple instrument rotators, guide cameras, and guide imagecontrollers. Also overhauled the user numbering system to preventaccumulation of users that do not exit normally.</P><UL>   <LI>Fixed the documentation for offset (was claiming two axes even   for rotator, calibration and guide offsets).</LI>      <LI>Added correction for diurnal aberration. This will   significantly enhance pointing for solar-system objects   (especially the moon!). Added /Distance to the TRACK and CONVERT   commands to allow specifying the distance to solar system objects   in units more natural than seconds of arc of parallax.</LI>      <LI>OFFSET/Computed has changed slightly. Formerly "computed" was   forced true if the telescope was guiding or if any axis was to be   restarted. Now the default value is true under those conditions   but you can force it false. On the other hand, if you do force it   false then the requested move will be rejected.</LI>      <LI>Changed /Restart to take a list of axis names (for TRACK,   ROTATE, OFFSET, etc.). Changed /NoRestart to /Restart. The only   default that changed is for the ROTATE command, which now defaults   to restarting only the rotator. In fact it was the need for this   default that drove me to this change.</LI>      <LI>Enhanced OFFSET to permit rotator offsets.</LI>      <LI>Enhanced offsets to have "memory", so if you change an   existing offset with nonzero velocity (by submitting a new OFFSET   command) the change takes place from the existing offset's current   value, not its original value. However, this does not yet work   properly for arc offsets (which are used for drift scanning).</LI>      <LI>Fixed to handle diurnal parallax, which greatly improves the   accuracy of tracking solar system objects. Also added /Distance   input to CONVERT, TRACK and SET GSTAR, i.e. any command that   accepts /Px. /Distance specifies the same information as /Px, but   units more commonly used for solar system objects.</LI>      <LI>Added SET GFILTER</LI>      <LI>Added SET SCALEFACTOR</LI>      <LI>Added SET GSTAR</LI>      <LI>Added GProbe and Rotator coordinate systems</LI>      <LI>Added /UseGSWavelength to CONVERT</LI>      <LI>Added /DefGStars and /ScaleCorrection to GUIDE</LI>      <LI>Added /Keep to SET INSTRUMENT</LI>      <LI>Added SET MAXUSERS and SHOW MAXUSERS</LI>      <LI>Enabled SET FOCUS/GCamera</LI>      <LI>Changed TRACK to halt the rotator as well as the main   axes</LI>      <LI>Changed SET WAVELENGTH parameter from GS to GStars (actually,   it was probably already GStar; GStars works around a problem with   the command parser colliding with SET GSTAR).</LI>      <LI>Changed TRACK/PTERR to log pointing error first, then correct   it. Under rare conditions this results in logging occurring when   it would not otherwise be.</LI>      <LI>Changed TRACK/PTERR handling of /&#91;No&#93;AbsRefCorrect,   /Tel1Wrap, /RotWrap and /Perfect.</LI>      <LI>Changed GImage coordinates to unbinned pixels.</LI>      <LI>Changed /Move to /NRefMeas in GUIDE</LI>      <LI>Changed the system that assigns user numbers to be more   robust. Users numbers will now typically be deassigned even if a   users forces an exit (though a user may have to run some other   image before his/her user number is actually freed up). The upper   limit on the maximum allowed users is dependent on the number of   available resource locks. One negative side effect is that there   is no longer a SHOW USERS command, the information is not readily   available.</LI>      <LI>Deleted SHOW USERS command</LI>      <LI>Deleted User block (SET or SHOW BLOCK USER)</LI>      <LI>Deleted an outdated note in the CONVERT documentation claiming   (incorrectly) that Image and GImage coordinates were unsupported.   Image and GImage coordinates have been supported for a long   time.</LI>      <LI>Deleted CLOCK (since clocks are now read-only they cannot be   initialized or reset, nor can status be obtained)</LI>      <LI>Deleted GCTRACK (guiders with positioners are no longer   supported)</LI>      <LI>Deleted SHOW ROTATOR (use SHOW OBJECT instead)</LI>      <LI>Deleted GCAngWrap qualifier</LI>      <LI>Deleted Filter and Piston from GMECHANICAL (use SET GFILTER   and SET FOCUS, respectively, instead)</LI>      <LI>Deleted GCTrack type of offset from OFFSET.</LI>      <LI>Deleted SetCamera from GCAMERA; use SET INSTRUMENT   instead.</LI>      <LI>Deleted /Degrees from GCAMERA; all input and output is now in   binned pixels; degrees is no longer supported.</LI>      <LI>Deleted AxeStat block from SET BLOCK and SHOW BLOCK</LI></UL><H3>Version 2.0</H3><P>Version 2.0 introduced a new method for drift scanning, amongother changes.</P><UL>   <LI>Updated documentation for TRACK/ScanVelocity and associated   information for /RotType and /RotAngle.</LI>      <LI>Changed guide and calibration offsets to be p,v,t triplets   (instead of positions). As a result the defaults for retaining   offsets in the TRACK command (/Keep) have changed slightly,   including guiding offset is now retained by default! The OFFSET   command has been changed so that one can now specify velocity for   all offsets. R.O. 8/97</LI>      <LI>Changed the GCAMERA commands once again (to match Photometric   cameras and corresponding new GIm Ctrl software): flushing is   automatic and it is impossible to take multiple exposures. Hence   removed Flush, Expose and Read. Use DoRead (formerly named   DoReadCCD) to read the CCD. Added DoCentroid. R.O. 6/97</LI>      <LI>Added SET EXPTIME; changed SET CENTROIDSIZE to SET PREDFWHM;   changed SET WAVELENGTH to use Obj and GS keywords; changed SET   WEATHER to provide different kinds of temperature. Eliminated the   Pref block (moving those items to other blocks). Changed the   GCamera command as follows: default file format is now FITS;   default exposure time and bin factor are those used for guiding;   added /Binary; renamed /StarSize to /PredFWHM; centroiding uses   /PredFWHM rather than /Size.</LI>      <LI>Changed the GCAMERA command as follows: removed the   SetThreshFactor command (the new star finding algorithm uses star   size, instead); added /MaxStars and /StarSize and removed maxStars   as a parameter from FindStars and DoFindStars (use the qualifier,   instead). FITS file writing is now supported; added /Binary to   support raw binary. R.O. 4/96</LI>      <LI>Implemented a new, improved drift-scanning scheme... Changed   the TRACK command as follows: added /ScanVelocity=(), changed   /KeepBoresight to /Keep=(...), removed /RefDir. Added OFFSET types   Boresight and Arc. Removed /RefDir from CONVERT and GCTRACK. R.O.   10/95</LI>      <LI>New command SET CENTROIDSIZE, and enhanced defaults for SET   GSCANSIZE and SET PTSCANSIZE. R.O. 5/95</LI>      <LI>Changed default behavior of TRACK/ABSREFCORR. R.O. 4/95</LI>      <LI>New command GMechanical. R.O. 3/95</LI>      <LI>New commands SET STINTERVAL, SHOW STINTERVAL, SHOW USERS, SHOW   MYNUMBER, CLOCK.</LI>      <LI>New block User, with associated SET BLOCK User and SHOW BLOCK   User commands.</LI>      <LI>Added /RefDir qualifier to TRACK, GCTRACK and CONVERT   commands. However, this is likely to go away again once   full-quality drift-scanning is enabled.</LI>      <LI>Added return of keywords TelPos, AxePos, InstAng, GImAng,   DeadProcs to SHOW STATUS.</LI>      <LI>Changed the qualifiers of GENOFFSET and added   /UserCoords.</LI>      <LI>New GCAMERA commands: SETCAMERA (called SETINPUT for awhile),   DOREAD, and STATUS. Changed default units from degrees to pixels;   remove /Pixels and added /Degrees.</LI></UL><H3>Version 1.9</H3><P>Additions</P><UL>   <LI>Added keywords ObjName, ObjMag to TRACK and SHOW OBJECT   output.</LI>      <LI>Added qualifiers /Name and /Mag to TRACK and GCTRACK   commands.</LI>      <LI>Added keyword "AxisDTime" to AXIS STATUS output.</LI>      <LI>Added keywords GSName, GSMag to GCTRACK and SHOW GSTAR   output.</LI></UL><P>Changes</P><UL>   <LI>Axis keywords Az and Alt replaced by Tel1 and Tel2 in AXIS   command</LI>      <LI>TRACK qualifier AzWrap replaced by Tel1Wrap.</LI>      <LI>Both of these changes are part of a conversion to supporting   both az/alt and equatorial telescopes.</LI></UL><H3>Version 1.8</H3><P>Additions</P><UL>   <LI>Implemented ENCLOSURE STATUS .</LI>      <LI>Added /Pixels to GCAMERA command.</LI>      <LI>Added GENOFFSET command.</LI>      <LI>SET and most other commands now output modified values. This   is to help multiple users keep track of what's going on.</LI>      <LI>Added /RotType and /RotAngle to TRACK command.</LI></UL><P>Changes</P><UL>   <LI>ENCLOSURE FANS fan names changed: "Telescope" changed to   "TelExhaust", "Enclosure" changed to "IntExhaust". "Exhaust"   deleted.</LI>      <LI>Many keywords have changed; see the TCC Keywords Dictionary   for details.</LI>      <LI>ENCLOSURE LOUVERS M1, M2, M3 were changed to Stairs and Floor   as a result of changes in the enclosure controller; note that two   of these louvers were combined to be controlled by one name.</LI></UL><P>Deletions</P><UL>   <LI>Removed the SPAWN command.</LI></UL><ADDRESS>Russell Owen</ADDRESS></BODY></HTML>