<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title>STUI:Version History</title>
</head>
<body>

<h2><a href="index.html">STUI</a>:Version History</h2>

<h3>Compatibility</h3>

<ul>
	<li>Mac: works with MacOS X 10.6, 10.5 and possibly 10.4 and is a universal binary.
	<li>Unix: runs from source, so is compatible with all flavors of unix. See the <a href="Installation.html">installation instructions</a> for the required version of Python and other libraries.
	<li>No Windows releases are planned.
</ul>

<h3>Warning to anyone running from source</h3>

<p>If STUI quits while starting up then issue the following command:<pre>
cd ~/.matplotlib
rm fontList.cache
rm -rf tex.cache
</pre>
<p>Better yet upgrade your version of matplotlib to 1.0.1 to avoid this problem.

<h3>Version 1.1 2011-09-09</h3>

<p>Visible changes:
<ul>
    <li>APOGEE QL read and exposure tables include a title and the latter includes the plate ID.
</ul>

<p>Bug fixes:
<ul>
    <li>APOGEE QL exposure table did not show net S/N unless predicted exposure data was received.
    <li>Windows in STUIAdditions were not being loaded.
</ul>

<h3>Version 1.1b11 2011-09-02</h3>

<p>Visible changes:
<ul>
    <li>SOP window: bypassed systems are now shown in red (at Craig's suggestion) and you can now cancel bypass commands to re-enable the buttons.
</ul>

<p>Bug fixes:
<ul>
    <li>MCP window: displayed values for gang connectors were wrong (off by one).
</ul>

<h3>Version 1.1b10 2011-09-02</h3>

<p>Visible changes:
<ul>
    <li>MCP window: added status of APOGEE and MARVELS gang connector sensors.
    <li>SOP window: added doApogeeSkyFlats.
</ul>

<h3>Version 1.1b9 2011-09-01</h3>

<p>Visible changes:
<ul>
    <li>APOGEE window: made the Cal Box controls work more like Shutter.
    <li>APOGEE QL window: handle an unknown number of missing fibers better.
    <li>Log window: the CmdDone message is shown as an error if the command failed (now that cmds.CmdDone reports this).
</ul>

<h3>Version 1.1b8 2011-08-31</h3>

<p>Visible changes:
<ul>
    <li>APOGEE window: added support for the cold shutter (and moved the collimation controls after the cal box, since the collimator is rarely touched). Note: Save Window Positions will remember which panels are visible in this window.
    <li>APOGEE QL window: added support for new data, including predicted exposures and missing fibers.
</ul>

<p>Bug fixes:
<ul>
    <li>Log window Actor and Actors filters did not show commands sent to the actors.
</ul>

<h3>Version 1.1b7 2011-08-29</h3>

<p>Bug fixes:
<ul>
    <li>Ticket <a href="https://trac.sdss3.org/ticket/1415">1415</a> STUI v1.1b6 guider grayscale problem.
    <li>Guider buttons were not in the incorrect state after a failed guider command.
</ul>

<h3>Version 1.1b6 2011-08-16</h3>

<p>Warnings for users running from source:
<ul>
    <li>This version requires RO version 2.9.1 or later.
    <li>If your Python is older than version 2.6 then you must install the simplejson module (json is part of the standard library in Python 2.6 and later).
</ul>

<p>Visible changes:
<ul>
    <li>APOGEE QL:
    <ul>
        <li>The S/N^2 graph always includes the commanded number of reads in its range.
    </ul>
    <li>Guider:
    <ul>
        <li>Updated to handle new "failed" guider and exposure states (thanks, Craig!).
        <li>Guider and exposure state are now displayed in color to indicate severity. The only "normal" guide state is "on" because we always run the guider while taking science data.
    </ul>
    <li>Some windows now save state when you select Save Window Positions.
    <ul>
        <li>Log windows save filter information.
        <li>APOGEE saves which detail panels are open.
    </ul>
    <li>Log window:
    <ul>
        <li>Show a CmdStarted and CmdDone message for each command (using data from the cmds actor).
        <li>Renamed filter "Commands Only" to "Commands" and improved its output.
    </ul>
</ul>

<h3>Version 1.1b5 2011-07-11</h3>

<p>Visible changes:
<ul>
    <li>SOP window:
    <ul>
        <li>Added comment field for Do Apogee Science.
        <li>Added alt field for Goto Gang Change.
        <li>Buttons that showed "Go To..." now show "Goto..." to simplify the mapping between the SOP window and sop commands: type what you see except lowercase the first letter and omit spaces and text in parenthesis.
        <li>Help strings for parameters now show the name you send to sop, not the displayed name, to simplify the mapping between the SOP window and sop commands. (This was already true of command buttons).
    </ul>
</ul>

<h3>Version 1.1b4 2011-07-05</h3>

<p>Visible changes:
<ul>
    <li>Guider Window:
    <ul>
        <li>Added support for refraction balance ratio guide parameter. <b>However</b>: as of 2011-07-05 the guider does not output the refractionBalance keyword (ticket #1367), so STUI's display will typically be <b>wrong</b>. As soon as the guider is fixed STUI's displayed value will be correct.
        <li>The exposure time widget always tracks the current value from the guider, it no longer tracks data from the currently displayed image. I hope this will be less confusing for users.
        <li>You may apply guide parameter changes even if the guider is off.
    </ul>
    <li>SOP changes:
    <ul>
        <li>ASOP is gone; APOGEE commands are in the SOP window
        <li>SOP commands for BOSS are now shown with "(BOSS)". The parenthesis indicate that you leave out the "BOSS" when typing the commands on the command line.
    </ul>
</ul>

<p>Internal changes:
<ul>
    <li>Updated to PLC v28_1 so the interlocks display includes the new MARVELS gang connector interlocks.
</ul>

<p>Bug fixes:
<ul>
    <li>Log Window: the "Commands and Replies" filter failed on internal messages, which prevented viewing old messages.
    <li>SOP did not shrink when stages were removed from commands.
</ul>

<h3>Version 1.1b3 2011-06-16</h3>

<p>Visible changes:
<ul>
    <li>Improved "Commands and Replies" filter to hide more unwanted chatter.
</ul>

<p>Bug fixes:
<ul>
    <li>Mac version reverted to Python 2.6.2 in an attempt to fix the mysterious Mac crashes.
</ul>

<h3>Version 1.1b2 2011-06-14</h3>

<p>Warning for those running from source: you must use opscore v1_14 (or at least trunk rev125153) or newer.

<p>Visible changes:
<ul>
    <li>APOGEE QuickLook changes: the S/N graph now shows S/N^2 instead of S/N and displays a fit for all points, not the three most recent points.
    <li>Ticket <a href="https://trac.sdss3.org/ticket/620">620</a>: add guider CCD temperature to Guider window.
    <li>Added three experimental log filters: "Commands and Replies", "My Commands and Replies" and "Sent Commands" (a filter suggested by Craig) and removed the old "Commands" filter. Please let me know which of these are useful. Note that "Sent Commands" shows a few nonessential commands that the other two hide, at least for now. I don't plan to try to fix that until I get confirmation that it is useful.
</ul>

<p>Internal changes:
<ul>
    <li>LogEntry objects now have a cmdID field for enhanced filtering.
</ul>

<h3>Version 1.1b1 2011-06-03</h3>

<p>Visible changes:
<ul>
    <li>Added support for "sop gotoStow" to the ASOP window.
</ul>

<p>Internal changes:
<ul>
    <li>Commented out some debug print statements in SNRGraphWdg.py
</ul>

<h3>Version 1.1a9 2011-05-19</h3>

<p>Visible changes:
<ul>
    <li>Added basic SOP support in a new window ASOP (thanks to Stephane for doing much of the coding in STUI and Craig for coding in sop). This supports doScience only because sop does not yet have a calibration sequence for APOGEE. Warning: gotoField looks the same in both SOP and ASOP windows; thus it will show some BOSS-specific options when a BOSS cart is mounted (such as Hartmann) but hopefully not when an APOGEE cart is mounted. We are considering options for cleaning things up.
</ul>

<h3>Version 1.1a8 2011-05-17</h3>

<p>Visible changes:
<ul>
    <li>Added the alternative vacuum gauge reading to APOGEE telemetry and replaced min/max with threshold. Note that alarms are based on a filtered reading, not the current reading.
</ul>

<p>Bug fixes:
<ul>
    <li>Dither limits always reported as a warning, even when OK.
    <li>Fixed handling of apogeecal data when the number of source names changes.
</ul>

<h3>Version 1.1a7 2011-05-16</h3>

<p>Bug fixes:
<ul>
    <li>Cal box commands didn't work.
</ul>

<h3>Version 1.1a6 2011-05-16</h3>

<p>Visible changes:
<ul>
    <li>Added Cal Box support to the APOGEE widget. Thanks to Stephane Beland for the basic code.
</ul>

<p>Bug fixes:
<ul>
    <li>APOGEE vacuum was not formatted in a useful way.
    <li>Mis-handled a few APOGEE status edge cases, including current exposure type having different case than the allowed type.
</ul>

<h3>Version 1.1a5 2011-05-06</h3>

<p>Visible changes:
<ul>
    <li>Added a comment field to APOGEE.
    <li>Improved the formatting of telemetry data for APOGEE.
    <li>Added a table showing data about the current exposure to APOGEE QuickLook.
</ul>

<p>Bug fixes:
<ul>
    <li>The APOGEE collimate commands were missing the "coll" verb.
</ul>

<h3>Version 1.1a4 2011-05-04</h3>

<p>Visible changes:
<ul>
    <li>Added script APOGEE>Exposure Sequence.
    <li>Added APOGEE collimation controls.
    <li>Renamed APOGEE Dither option Other to Any; this should be less confusing when the chosen pixel position happens to match named position A or B.
    <li>Moved APOGEE Dither and Collimator status out of the Telemetry window into the main part of the window.
</ul>

<p>Internal changes:
<ul>
    <li>Added code to the Alerts window to work around hub bug <a href="https://trac.sdss3.org/ticket/1181">1611</a>1611 (keys that have a list of 0 values are reported by the keys actor to have a single value of "None"). This avoids error messages when there are no active alerts or disabled alert rules.
    <li>Added support for the new APOGEE keyword exposureTypeList.
</ul>

<p>Bug fixes:
<ul>
    <li>TUI.Base.Wdg.FocusWdg had some minor bugs that were exposed by the new APOGEE Collimate controls.
</ul>

<h3>Version 1.1a3 2011-05-02</h3>

<p>Visible changes:
<ul>
    <li>Displays dither status, if bad, next to dither position. Bad states include limit switches fired and dither indexer off.
</ul>

<p>Bug fixes:
<ul>
    <li>APOGEE's read countdown timer was only working for the first read (because I didn't realize multiple read states were interleaved).
</ul>

<h3>Version 1.1a2 2011-04-28</h3>

<p>Visible changes:
<ul>
    <li>Improved APOGEE support to support proposed apogee dictionary (1,0). The feedback in the main window is now essentially complete. These limitations remain:
    <ul>
        <li>There is no GUI support for the collimator.
        <li>There is a "Stop" button for halting exposures but APOGEE does not yet support this feature so the command will fail.
        <li>The quicklook window is limited in what it shows. I will improve it after apogeeql output is updated.
    </ul>
</ul>

<h3>Version 1.1a1 2011-04-26</h3>

<p>Visible changes:
<ul>
    <li>Added basic APOGEE support in the form of two windows: APOGEE and APOGEE QuickLook. Limitations include:
    <ul>
        <li>There is no GUI support for the collimator.
        <li>There is a "Stop" button for halting exposures but APOGEE does not yet support this feature so the command will fail.
        <li>Feedback is very primitive in the APOGEE window. I will improve it after APOGEE output is updated.
        <li>The quicklook window is limited in what it shows. I will improve it after apogeeql output is updated.
    </ul>
</ul>

<h3>Version 1.0+1 2011-04-04</h3>

<p>Visible changes:
<ul>
    <li>Added a preliminary APOGEE window. It only shows some QuickLook data and has no controls.
</ul>

<p>Internal changes:
<ul>
    <li>Stop sending "plot display=..." as part of the guide on command. It is not longer needed and it caused an error message if the DISPLAY environment variable was not set.
</ul>

<h3>Version 1.0 2011-03-15</h3>

<p>Release 1.0b17 as 1.0 with no changes.

<h3>Version 1.0b17 2011-02-16</h3>

<p>Visible changes:
<ul>
    <li>The Status window now shows the calibration and guide offsets.
</ul>

<p>Bug fixes:
<ul>
    <li>Log window filtering showed all messages instead of None if the severity was set to None or the additional criteria were missing or incomplete.
</ul>

<h3>Version 1.0b16 2011-02-03</h3>

<p>Visible changes:
<ul>
    <li>Added an experimental Custom filter to the Log window to permit more complicated filter expressions. See the <a href="TUIMenu/LogWin.html">Log Window</a> documentation for details. There is no support as yet for saving or sharing expressions.
</ul>

<h3>Version 1.0b15 2011-02-01</h3>

<p>Visible changes:
<ul>
    <li>Added a Center Up button to the Guider window.
    <li>Alerts window:
    <ul>
        <li>Changed the sort order to (severity, age, alert ID); formerly age was not considered.
        <li>Changed the two lists to always scroll to the top after the data changes, so the most important information is always visible.
    </ul>
    <li>The logs retain more information. Coupled with a separate improvement to BOSS (metrology is now reported using debug-level messages thanks to Craig Loomis) STUI logs should now show several hours of data.
</ul>

<h3>Version 1.0b14 2011-01-12</h3>

<p>Visible changes:
<ul>
    <li>Cartridge 18 now shows up as cartridge 18 in the Status window. The engineering camera will show up as a mystery number because I have no idea what value the MCP reports.
    <li>The Guider now includes headings for the table in the correction panel, since the rollover help was insufficient.
    <li>The Guider now allows user-specified rotation correction up to +/- 100" (RA and Dec remain at +/-10").
    <li>The Guide Monitor now plots FWHM of in-focus guide probes.
</ul>

<p>Internal changes:
<ul>
    <li>The Mac version includes matplotlib 1.0.1 which reduces the memory leak by 10x. I advise anyone running from source to upgrade your matplotlib.
</ul>

<p>Bug fixes:
<ul>
    <li>The Guider could not display a plate image if there were no small postage stamps. Thanks to Craig Loomis for the bug report and fix.
    <li>The Guider's displayed scale measured error and applied correction were 100x too small.
</ul>

<h3>Version 1.0b13 2010-12-23</h3>

<p>Visible changes:
<ul>
    <li>Added clipped mean FWHM to Seeing chart in Guide Monitor.
</ul>

<p>Internal changes:
<ul>
    <li>Requires RO package 2.7.
    <li>Modified for backward-incompatible StripChartWdg.
</ul>

<h3>Version 1.0b12 2010-12-10</h3>

<p>Visible changes:
<ul>
    <li>Reduced rate of memory leakage by 10x by shifting the guide monitor's time axis every 10 seconds instead of every second. The display will be jerkier but you will still see all data. I'll restore the old behavior once the matplotlib memory leak is fixed.
</ul>

<h3>Version 1.0b11 2010-12-08</h3>

<p>Bug fixes:
<ul>
    <li>Ticket <a href="https://trac.sdss3.org/ticket/1181">1181</a> STUI 1.0b10 cannot display the plate view for 55534/proc-gimg-1363.fits.
    <li>Fixed a minor memory leak in RO.Wdg.StripChartWdg; unfortunately a much larger memory leak remains due to a fundamental <a href="https://sourceforge.net/tracker/?func=detail&amp;atid=560720&amp;aid=3124990&amp;group_id=80706">bug in matplotlib</a>.
</ul>

<h3>Version 1.0b10 2010-11-22</h3>

<p>Visible changes:
<ul>
    <li>Changed the Guide window displayed error and correction to labels (which cannot be copied) from read-only entry widgets. This avoids beeps for NaNs and may be less confusing.
</ul>

<h3>Version 1.0b9 2010-11-22</h3>

<p>Bug fix: the correction enable buttons in the Guider did not show the current state.

<h3>Version 1.0b8 2010-11-22</h3>

<p>Visible changes:
<ul>
    <li>Guider window:
    <ul>
        <li>Added net guide correction
        <li>Added an indication of whether the most recent correction was applied
    </ul>
    <li>Scale is now shown as ((plate/nominal - 1) * 1e6) everywhere (Guider, Guide Monitor and Status). Reasonable corrections are thus in the 1s and 10s.
</ul>

<p>Bug fixes:
<ul>
    <li>Eliminated an innocuous but annoying traceback that appeared in the error log after each guide exposure.
</ul>

<h3>Version 1.0b7 2010-11-19</h3>

<p>Visible changes:
<ul>
    <li>Experimental support for entering guide corrections manually. Note: Paul Harding and I would greatly prefer to present scale change in units of fraction * 10^6 instead of fraction * 100. If we do this the old guider keywords and setScale command will still work in the old units but will be deprecated.
</ul>

<p>Bug fixes:
<ul>
    <li>MJD was off (I had the sign of the offset wrong).
    <li>Cartridge display was blank if the MCP and guider agreed.
    <li>My attempt to suppress "Warning: invalid value encountered in divide" by suppressing division warnings was insufficient. I now suppress all numpy warnings.
</ul>

<h3>Version 1.0b6 2010-11-18</h3>

<p>Visible changes:
<ul>
    <li>Added Stop button to SOP stages that can be aborted.
    <li>Improved the Guide Monitor (based on work by Craig Loomis).
    <li>Added target axis position, TAI date and SDSS MJD to the Status window.
    <li>Consolidated Inst ID and Cartridge in Status window; Cartridge now shows both the MCP and guider values if they disagree.
    <li>Added Calibration offsets to the Nudger window.
    <li>Renamed Object offset to Object Arc offset in the Nudger, Offset and Status windows and reorganized the associated help files to better consolidate information about types of offsets.
    <li>Ticket <a href="https://trac.sdss3.org/ticket/618">618</a> need counterweight info in STUI MCP display.
</ul>

<h3>Version 1.0b5 2010-10-18</h3>

<p>Bug fixes:
<ul>
    <li>Ticket <a href="https://trac.sdss3.org/ticket/1097">1097</a> Enable/Disable buttons on Guider GUI send the wrong command.
    <li>Fixed a typo in the name of the Fiducials window (reported by Dan Oravitz).
</ul>

<h3>Version 1.0b4 2010-10-01</h3>

<p>Visible changes:
<ul>
    <li>Added a Guide Monitor
</ul>

<p>Internal changes:
<ul>
    <li>Added TUI.Base.StripChartWdg, a convenient way to plot keyvars.
</ul>

<h3>Version 1.0b3 2010-09-30</h3>

<p>Visible changes:
<ul>
    <li>Added a Fiducials window (based on a script by Elena Malanushenko) to show a log of fiducial crossings.
    <li>Added guide probe enable/disable widgets to the Guider window.
    <li>Guide plate image improvements:
    <ul>
        <li>Made the probe images larger
        <li>Improved placement of guide probe number labels
    </ul>
    <li>Interlocks display updated to match the modified interlocks.
</ul>

<p>Internal changes:
<ul>
    <li>Removed deprecated instrument model files. Always use TUI.Models.getModel(actor) to get a model.
    <li>Added fullGProbeBits to the guider model; this combined gprobeBits and gprobes and is intended as a workaround until the real gprobeBits keyword contains enable/disable info.
    <li>Increased the number of messages held by the central log repository from 2000 lines to 10,000 lines.
</ul>

<h3>Version 1.0b2 2010-07-21</h3>

<p>Visible changes:
<ul>
    <li>If you lose your connection or put your computer to sleep for long enough, TUI will test the connection and, if good, will attempt to refresh the data.
</ul>

<p>Bug fixes:
<ul>
    <li>Log filtering based on command number would not show the outgoing command.
    <li>Would fail to start on unix due to an error in determining the name of the status window.
</ul>

<h3>Version 1.0b1 2010-06-28</h3>

<p>Visible changes:
<ul>
    <li>Multiple log windows.
</ul>

<p>Internal changes:
<ul>
    <li>Added logSource to the TUI model; this is a central repository for log data to support multiple log windows.
</ul>

<p>Bug fixes:
<ul>
    <li>Log window
    <ul>
        <li>New lines are not highlighted when highlighting Actor or Actors.
        <li>Copied text includes filtered-out data.
        <li>Scrolling is irregular if there is a lot of filtered-out data.
    </ul>
    <li>Ticket <a href="https://trac.sdss3.org/ticket/920">920</a> Fix "Guide" button.
</ul>
</body>
</html>
