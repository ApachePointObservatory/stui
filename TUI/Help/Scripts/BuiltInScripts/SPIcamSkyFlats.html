<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
   <title>TUI:Scripts:Built In Scripts:SPIcam:Sky Flats</title>
</head>
<body>

<h2><a href="../../index.html">TUI</a>:<a href="../index.html">Scripts</a>:<a href="index.html">Built In Scripts</a>:SPIcam:Sky Flats</h2>

<p>The SPIcam:Sky Flats script allows you to take a series of twilight or morning flats, automatically increasing or decreasing the exposure time to roughly maintain a constant brightness for the images and dithering the telescope (using a 15" box) between each exposure. If you don't want automatic adjustment of exposure time then please use the normal SPIcam Exposure window, instead.

<p>This script uses the current time to decide whether you are taking twilight flats or morning flats. For evening flats the time increases using equation:
<blockquote>
    <p>nextEveTime = -288 log(e<sup>-prevTime/288</sup> + e<sup>-(prevTime+45)/288</sup> - 1) - (prevTime+45)<br>
(or 160 if prevTime is too large)
</blockquote>
<p>and for morning flats the time decreases using equation:
<blockquote>
    <p>nextMornTime = 288 log(e<sup>prevTime/288</sup> + e<sup>(prevTime+45)/288</sup> - 1) - (prevTime+45)<br>
(or 1 if prevTime is too short)
</blockquote>

<p><b>Note: even the time of the first exposure is compensated.</b> This allows you to take an exposure, enter that time (with some suitable correction if the image was too light or too dark) and start the script without having to mentally compensate for changing sky brightness.

<p>As usual for scripts, the input options are recorded when you press "Start" and ignored thereafter. Thus you must stop and restart the script to run it with different settings.

<p>Note: this script uses the same time compensation used by the original SPIcam eveflat and mornflat scripts (but with limits to avoid crashes).

</body>
</html>
