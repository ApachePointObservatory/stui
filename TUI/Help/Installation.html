<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head>	<title>TUI:Installation</title></head>	<h2><a href="index.html">TUI</a>:Installation</h2><h2>Contents</h2><ul>	<li> <a href="#Introduction">Introduction</a>	<li> <a href="#Mac">Installing on MacOS X</a>	<li> <a href="#Unix">Installing on Unix</a>	<li> <a href="#Windows">Installing on Windows</a>	<li> <a href="#History">History</a></ul><a name="Introduction"></a><h2>Introduction</h2><p><a href="index.html">TUI</a> is the new user interface for the <a href="http://www.apo.nmsu.edu/">APO</a> 3.5m telescope. It is written in <a href="http://python.org/">Python</a> (a free cross-platform language) and runs on unix and MacOS X. This document describes how to install TUI on your computer.<h2><a name="Mac"></a>Installing on MacOS X</h2><ul>	<li>Download <a href="http://tycho.apo.nmsu.edu:81/TUI-images">TUI for Mac</a>: TUI_<i>vers</i>_Mac.sitx. Note that TUI for Mac requires MacOS X 10.3 or later.	<li>Unpack using StuffIt Expander 7 or later. StuffIt Expander is included with MacOS X.	<li>Drag the resulting application into your Applications folder or anywhere else you like.	<li>Create a dock entry by dragging the application onto your dock.</ul><h3>Notes for MacOS X</h3><p>Some internal errors are reported to the console. If TUI is acting oddly or exits unexpectedly, please open the console (by running /Applications/Utilities/Console) and report any TUI output.<p>TUI on MacOS X relies on the Aqua version of TK, which has several cosmetic bugs. Here the the main bugs and suggested workarounds (if known):<ul>	<li>Pop-up menus are sometimes shown in the wrong location.	<li>Controls are occasionally not painted when a window is first drawn. Clicking on an invisible control will cause it to be drawn.	<li>Buttons and menus are always shown in the default aqua font, regardless of your choice in Preferences, but if you pick a very small font the body of the control may get small enough to clip some of the text.</ul><p>TUI for Mac requires MacOS X 10.3. It will quit instantly if you try to run it on MacOS X 10.2, leaving an obscure message in the console. This is a limitation of python's Mac application builder; it has nothing to do with TUI. If you are desperate to run TUI under 10.2 you can build it from source, as described below. But I strongly recommend upgrading to 10.3.<a name="MacBuild"></a><h3>Building From Source for MacOS X</h3><p>You can build TUI from the source. The normal procedure is documented <a href="InstallationOnMac.html">here</a>. This should only be of interest to folks who want to know how the double-clickable application is made, or want to run TUI under MacOS X 10.2.<a name="MacX11"></a><p>You can also build an X11-based version of TUI on MacOS X by following the <a href="#Unix">unix installation instructions</a> with these caveats:<ul>	<li>Whenver you build anything involving X11 Tcl/Tk, first disable Aqua Tcl/Tk (if present) by dragging  Tcl.Framework and Tk.Framework out of /Library/Frameworks. Drag them back when you are finished building.	<li>You must have installed Apple's X11 application. X11 is included with MacOS X 10.3 but is <b>not</b> installed by default. If it is not already installed, you can download installer from <a href="http://www.apple.com">Apple</a> or find the installer on MacOS X install disk 3. 	<li>You must have installed Apple's Developer Tools, including the X11 SDK. An installer disk is supplied with many Macintoshes, but is probably outdated. I suggest you download the latest version from <a href="http://www.apple.com">Apple</a>. You may have to register as a developer, but that is free.</ul><h2><a name="Unix"></a>Installing on Unix</h2><p>If you have a fairly uniform set of unix machines to support (i.e. most users running the same flavor of unix), I recommend installing everything (tcl/tk, python, etc.) on a network mountable disk and have people run tui from there. This saves you the trouble of individually installing extra packages to each machine's existing installation of tcl/tk and python. It also gives you the chance of running current versions of tcl/tk and python (preinstalled versions tend to be quite out of date). This is not very difficult; the installers for tcl/tk and python are both trivial to use and include excellent documentation.<p>Installation instructions:<ul>	<li>Check your current Python:<pre>% pythonPython ???   # must be at least 2.3; 2.4.x is recommended...&gt;&gt;&gt; import Tkinter       # if this and the next step both work then Tkinter is properly installed&gt;&gt;&gt; root = Tkinter.Tk()  # you should see a new empty window&gt;&gt;&gt; import Numeric       # if this works then Numeric is installed&gt;&gt;&gt; import numarray      # if this works then numarray is installed&gt;&gt;&gt; import pyfits        # if this works then pyfits is installed&gt;&gt;&gt; import Image         # if this works then Python Imaging Library is installed&gt;&gt;&gt; import tkSnack       # if this and the next step both work then tkSnack is installed&gt;&gt;&gt; tkSnack.initializeSnack(root)</pre>	<li>If this all works, jump ahead to "Download TUI". If python and Tkinter work, jump ahead to installing Numeric (or whichever packages are missing).		<li>If you don't already have them, download and install an X11 window server (such as xfree86), the associated libraries, and a window manager. Almost all unix installations already have the X11 window server and window manager, but some unix installations do not come with the X11 libraries.		<li>Set environment variables:	<ul>		<li>Set LD_LIBRARY_PATH to wherever the libraries you install will go. The usual default (at least on linux) is /usr/local/lib. You can set it now temporarily and again in the <a href="#tuishellscript">tui shell script</a>. If you prefer, you may edit your login config file to set this permanently. (Note: You may not need to define LD_LIBRARY_PATH if you install stuff in the standard location. But it is safer to define it at least while building stuff, and is necessary to build and run python if installing tcl/tk in a non-standard location).		<li>PATH: set to include the directory where you install binaries. The usual default (at least on linux) is /usr/local/bin. If you prefer not to mess with PATH, then type the full path to python whenever you execute (to be sure you are running the correction installation of python).	</ul>	<li>Pick a directory for the source code (any convenient directory you own). Unpack all source code packages in that directory and leave them there until all installation is done (this may make it easier for some of the packages to find necessary files in other packages).		<li>Download and install <a href="http://tcl.tk/">tcl/tk</a>, if necessary.	<ul>		<li>Any Tcl/Tk 8.3.x or 8.4.x ought to work, but the current release is recommended.		<li>Build and install tcl first, then tk, as per the README files.		<li>Generally the installers are smart and trouble free. However, you may get warnings of multiple versions of tcl headers or libraries when you install Tk. You can ignore these so long as they complain of files from the tcl source distribution matching the tcl you just installed.	</ul>		<li>Download and install <a href="http://python.org/">Python</a>, if necessary.		<li>Version 2.3 or later is required. Most testing of TUI is done on version 2.4.x.		<li>Usually it will just build, but always check the README first. In particular, if you are building on RedHat 9 and if you are using RedHat's built in Tcl/Tk, you will need to specify a special flag.	<li>Test your new Python and Tkinter:<pre>% pythonPython ???  # is this the new version you just installed? If not, did you specify environment variable PATH correction?&gt;&gt;&gt;import Tkinter  # if this and the next step both work then Tkinter is properly installed&gt;&gt;&gt;root = Tkinter.Tk()  # you should see a new empty window</pre>	If there is a problem, try again from a new terminal session or after logging out and back in again. If it still doesn't work, debug the installation:	<ul>		<li>If "_tkinter" cannot be loaded, then python was not built with tcl/tk support. If this is a pre-built python, you probably have to build your own (though you may be able to find instructions for adding _tkinter to your particular python). If this is a python you just built, make sure you really are running that version (and not a built-in version) and review the instructions above and Python's installation instructions.		<li>If you see "error while loading shared libraries: libtk8.4.so", then perhaps LD_LIBRARY_PATH is not defined or is mis-defined.		<li>An excellent fallback (if you didn't already do this) is to install tcl/tk and python from source (as described above).	</ul>		<li>Download and install <a href="http://numeric.scipy.org/">Numeric</a>.	<ul>		<li>Some recent versions (including 23.7) do not install on linux without extra fuss. If you have trouble, try installing version 23.1 (which works fine with TUI), or if you really want to run a more modern version for some reason, then google for advice.	</ul>		<li>Download and install <a href="http://www.stsci.edu/resources/software_hardware/numarray">numarray</a>. It should install with no fuss.		<li>Download and install <a href="http://www.stsci.edu/resources/software_hardware/pyfits">pyfits</a>. Installation consists of copying pyfits.py into Python's site-packages directory, which you can locate using:<pre>% python&gt;&gt;&gt;import sys&gt;&gt;&gt;sys.path</pre>	<p>Then change the file ownership and permissions of pyfits.py to match the other files in site-packages.		<li>Download and install <a href="http://www.pythonware.com/products/pil/">Python Imaging Library</a>. Read the README carefully because it requires some precursor packages.		<li>Download and install <a href="http://www.speech.kth.se/snack/index.html">Snack Sound Toolkit</a>.	<ul>		<li>Install snack into one of tcl's standard package locations. You can find these by executing tclsh and issuing the command <code>echo $auto_path</code>. If the snack files end up in a nonstandard location (and you can't simply move them) then you must define environment variable TCLLIBPATH to load snack.		<li>Warning: even if you use a binary version of snack, you must install python snack using using from source (or from a binary package that explicitly says it includes python support).		<li>If not using a binary distribution, build snack from source. Read the installation instructions carefully because you will probably have to edit a make file.		<li>Install the Python snack library according to the docs in the python subdirectory of the distribution.	</ul>	<li>Download <a href="http://tycho.apo.nmsu.edu:81/TUI-images">TUI Source</a> and unpack in some convenient directory (called <i>tui_root</i> below).	<li><a name="tuishellscript"></a>Create an shell script named "tui" on your normal binary path (e.g. /usr/local/bin), as follows:<pre>#!/bin/tcshsetenv LD_LIBRARY_PATH /usr/local/lib # or wherever your libraries gopython <i>tui_root</i>/runtui.py</pre>	<ul>		<li>The first line may have to be adapted to your environment.		<li>If you have more than one version of python installed on your system, please replace <code>python</code> with the full path to the correct version (such as <code>/usr/local/bin/python</code>).		<li>Make sure the file is executable (e.g. <code>chmod +x tui</code>).	</ul>		<li>Test everything by typing "tui". It should launch. Note: if you use tcsh then you probably have to type "rehash" before "tui" will work.		<li>If snack does not load, try setting environment variable TCLLIBPATH in your <a href="#tuishellscript">tui shell script</a>.</ul><h2><a name="Windows"></a>Installing on Windows</h2><p>There is not yet a binary Windows installer for TUI. There will eventually be one if there is sufficient demand and once I have time to deal with it. Meanwhile, you can install TUI for Windows from source as follows<p>Note: please download current release versions of everything.<ul>	<li>Download and install <a href="http://www.python.org">Python</a> for Windows.		<li>Download and install Mark Hammonds <a href="http://sourceforge.net/projects/pywin32/">pywin32</a> package.		<li>Download and install <a href="http://numeric.scipy.org/">Numeric</a>.		<li>Download and install <a href="http://www.stsci.edu/resources/software_hardware/numarray">numarray</a>.		<li>Download and install <a href="http://www.stsci.edu/resources/software_hardware/pyfits">pyfits</a>. Installation consists of copying pyfits.py into Python's site-packages directory, which you can locate using:<pre>% python&gt;&gt;&gt;import sys&gt;&gt;&gt;sys.path</pre>	<p>Then change the file ownership and permissions of pyfits.py to match the other files in site-packages.		<li>Download and install <a href="http://www.pythonware.com/products/pil/">Python Imaging Library</a>.		<li>Install the snack sound library as follows:	<ul>		<li>Download and unpack  <a href="http://www.speech.kth.se/snack/download.html">Snack</a>: get the <b>Binary release for Windows with Python...</b>. Be sure to match the correct version of python. If you don't already have software to unpack this archive, one option is to download <a href="http://stuffit.com">StuffIt Expander</a> (free for archive expansion).		<li>Follow the installation instructions in the unpacked archive. As of snack 2.2.8 for Python 2.3 this simply consisted of copying one file and one folder.	</ul>	<li>Download and unpack <a href="http://tycho.apo.nmsu.edu:81/TUI-images">TUI Source</a>: TUI_<i>vers</i>_Source.zip.	<li>Look inside the unpacked directory. You should see a file <code>runtui.py</code>; double-click that file to run TUI. There is also a Windows icon <code>\misc\TUI.ico</code> you may wish to use.	<li>To make TUI easier to run, put an alias of <code>runtui.py</code> on the desktop.</ul><p>If TUI does not run, run the python interpreter (<code>Start/Programs/Python2.3/python (command line)</code>) and type the test commands shown at the beginning of the <a href="#Unix">Unix installation instructions</a>.<h2><a name="History"></a>History</h2><ul>	<li>2005-03-15 Added numarray and PIL to the required packages. Expanded the unix installation instructions to discuss environment variables LD_LIBRARY_PATH and TCLLIBPATH.	<li>2004-10-06 Corrected the windows installation instructions.	<li>2004-09-03 Added Windows installation instructions based on information kindly supplied by Jack Dembicky. Improved the MacOS X installation instructions.	<li>2004-03-03 Modified unix notes for the new, simpler way to run TUI. Updated the Mac X11 notes because an X11 installer is now available for MacOS X 10.3 and is no longer available for 10.2.	<li>2004-02-05 Modified Notes for MacOS X to include one additional common Aqua Tk bug (menus showing up in the wrong place) and removed the note about incorporating TUI additions (since that is done in a more standard fashion in TUI 0.83).	<li>2004-01-23 Modified to the MacOS X binary. Added a link to the TUI downloads (thanks for the reminder, Nicole Silvestri).	<li>2003-12-23 Modified the unix info to suggest an executable script tui instead of environment mods. Updates the Mac info for Panther (MacOS X 10.3).	<li>2003-11-17 Added snack installation.	<li>2003-08-28 Added a note about the need for X11 on unix and corrected a test (root = Tk() -&gt; root = Tkinter.Tk()). Thanks to Bill Ketzeback. Overhauled the MacOS X installation instructions.</ul></body></html>