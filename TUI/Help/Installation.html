<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head>	<title>TUI:Installation</title></head>	<h2><a href="index.html">TUI</a>:Installation</h2><h2>Contents</h2><ul>	<li> <a href="#Introduction">Introduction</a>	<li> <a href="#Mac">Installing on MacOS X</a>	<li> <a href="#Unix">Installing on Unix</a>	<li> <a href="#Windows">Installing on Windows</a>	<li> <a href="#History">History</a></ul><a name="Introduction"></a><h2>Introduction</h2><p><a href="index.html">TUI</a> is the new user interface for the <a href="http://www.apo.nmsu.edu/">APO</a> 3.5m telescope. It is written in <a href="http://python.org/">Python</a> (a free cross-platform language) and runs on unix and MacOS X. This document describes how to install TUI on your computer.<h2><a name="Mac"></a>Installing on MacOS X</h2><ul>	<li>Download <a href="http://tycho.apo.nmsu.edu:81/TUI-images">TUI for Mac</a>: TUI_<i>vers</i>_Mac.sitx. Note that TUI for Mac requires MacOS X 10.3 or later. Installation is as usual for a Mac application:	<ul>		<li>Unpack the zip archive by double clicking it.		<li>Drag the resulting application into your Applications folder or anywhere else you like.		<li>Create a dock entry by dragging the application onto your dock, if desired.	</ul>	<li>Download and install <a href="http://hea-www.harvard.edu/RD/ds9/">ds9 and xpa</a> (these are <a href="#ds9option">optional</a> but highly recommended). You must use the <b>darwin</b> version of xpa. For ds9 I also recommend the darwin version because you won't be tempted to move it and break TUI, and because it's then available from the Terminal. But you may install the MacOS X version if you prefer (its just the X11 binary packaged as a double-clickable file). Or both.	<ul>		<li>ds9 requires X11. If you have not already installed it, the installer is available on the system disks.		<li>Unpack xpa for darwin. This results in a set of xpa... binaries.		<li>If you have admin privileges, move the xpa binaries to /usr/local/bin (creating the directory if necessary).		<li>Make sure that your PATH environment variable includes the directory containing the xpa files. If you use the bash shell, put this in ~/.bash_profile (adjusting as needed if ds9 is not in /usr/local/bin):<br>		<code>export PATH="/usr/local/bin:"$PATH</code><br>		or if you use the tcsh shell, put this in ~/.login instead:<br>		<code>setenv PATH "/usr/local/bin:"$PATH</code>		<li>If using the darwin ds9, install it in the same location as the xpa binaries (/usr/local/bin if possible, but anywhere on your PATH will do).		<li>If using the MacOS X ds9 then you <b>must</b> install it in one of the two standard application directories (/Applications or ~/Applications on an English system). TUI will not be able to find it <b>anywhere</b> else. (This is one argument for installing the darwin version.)	</ul></ul><h3>Notes for MacOS X</h3><p>Some internal errors are reported to the console. If TUI is acting oddly or exits unexpectedly, please open the console (by running /Applications/Utilities/Console) and report any TUI output.<p>TUI for Mac requires MacOS X 10.3. It will quit instantly if you try to run it on MacOS X 10.2, leaving an obscure message in the console. This is a limitation of python's Mac application builder; it has nothing to do with TUI. If you are desperate to run TUI under 10.2 you can build it from source, as described below. But I strongly recommend upgrading to 10.3.<a name="MacBuild"></a><h3>Building From Source for MacOS X</h3><p>You can build TUI from the source. The normal procedure is documented <a href="InstallationOnMac.html">here</a>. This should only be of interest to folks who want to know how the double-clickable application is made, or want to run TUI under MacOS X 10.2.<a name="MacX11"></a><p>You can also build an X11-based version of TUI on MacOS X by following the <a href="#Unix">unix installation instructions</a> with these caveats:<ul>	<li>Whenver you build anything involving X11 Tcl/Tk, first disable Aqua Tcl/Tk (if present) by dragging  Tcl.Framework and Tk.Framework out of /Library/Frameworks. Drag them back when you are finished building.	<li>You must have installed Apple's X11 application. X11 is included with MacOS X 10.3 but is <b>not</b> installed by default. If it is not already installed, you can download installer from <a href="http://www.apple.com">Apple</a> or find the installer on MacOS X install disk 3. 	<li>You must have installed Apple's Developer Tools, including the X11 SDK. An installer disk is supplied with many Macintoshes, but is probably outdated. I suggest you download the latest version from <a href="http://www.apple.com">Apple</a>. You may have to register as a developer, but that is free.</ul><h2><a name="Unix"></a>Installing on Unix</h2><p>If you have a fairly uniform set of unix machines to support (i.e. most users running the same flavor of unix), I recommend installing everything (tcl/tk, python, etc.) on a network mountable disk and have people run tui from there. This saves you the trouble of individually installing extra packages to each machine's existing installation of tcl/tk and python. It also gives you the chance of running current versions of tcl/tk and python (preinstalled versions tend to be quite out of date). This is not very difficult; the installers for tcl/tk and python are both trivial to use and include excellent documentation.<p>Requirements:<ul>	<li>python 2.3 or later, with Tkinter support. 2.4.x is recommended.	<li>tcl/tk 8.3.x or later. 8.4.x is recommended.	<li>snack sound library (optional; used to play sound cues)	<li>The following python packages:	<ul>		<li>numarray		<li>Numeric		<li>Python Image Library (PIL)		<li>pyfits		<li>tkSnack (optional, but highly recommended)	</ul>	<li><a name="ds9option"></a>The following are optional, but highly recommended. Both are needed if you want to automatically display science images (via the View Image preference) and are also handy for taking a detailed look at guider images (via the DS9 button on guider windows).	<ul>		<li>ds9, an image viewer		<li>xpa, a communication interface for ds9	</ul></ul><p>Installation instructions:<p>If you are in doubt as to which python packages you already have installed, try the following test. If any step fails, the corresponding package is not installed (or is mis-installed):<pre>% pythonPython ???   # must be at least 2.3; 2.4.x is recommended...&gt;&gt;&gt; import Tkinter&gt;&gt;&gt; root = Tkinter.Tk()&gt;&gt;&gt; import Numeric&gt;&gt;&gt; import numarray&gt;&gt;&gt; import pyfits&gt;&gt;&gt; import Image&gt;&gt;&gt; import tkSnack&gt;&gt;&gt; tkSnack.initializeSnack(root)</pre><ul>	<li>If you don't already have them, download and install an X11 window server (such as xfree86), the associated libraries, and a window manager. Almost all unix installations already have the X11 window server and window manager, but some unix installations do not come with the X11 libraries.		<li>Set environment variables. You can set them now while installing and then again in the <a href="#tuishellscript">tui shell script</a>. Or, if you prefer, you can set configure the login process to set them automtically. (The former is usually easier for shared installations.)	<ul>		<li>If any of your libraries are installed in a nonstandard location then set LD_LIBRARY_PATH to include those locations. The usual default (at least on linux) is /usr/local/lib. Relevant libraries include those for tcl/tk.		<li>If any of your binaries are installed in nonstandard locations, then set PATH to include those locations. The usual default (at least on linux) is /usr/local/bin. Relevant binaries include those for python.	</ul>	<li>Pick a directory for the source code (any convenient directory you own). Unpack all source code packages in that directory and leave them there until all installation is done (this may make it easier for some of the packages to find necessary files in other packages).		<li>Download and install <a href="http://tcl.tk/">tcl/tk</a>.	<ul>		<li>Any Tcl/Tk 8.3.x or 8.4.x ought to work, but the current release is recommended.		<li>Build and install tcl first, then tk, as per the README files.		<li>Generally the installers are smart and trouble free. However, you may get warnings of multiple versions of tcl headers or libraries when you install Tk. You can ignore these so long as they complain of files from the tcl source distribution matching the tcl you just installed.	</ul>		<li>Download and install <a href="http://python.org/">Python</a>, if necessary.		<li>Version 2.3 or later is required. Most testing of TUI is done on version 2.4.x.		<li>Usually it will just build, but always check the README first. In particular, if you are building on RedHat 9 and if you are using RedHat's built in Tcl/Tk, you will need to specify a special flag.	<li>Test your new Python and Tkinter:<pre>% pythonPython ???  # is this the new version you just installed? If not, did you specify environment variable PATH correction?&gt;&gt;&gt;import Tkinter  # if this and the next step both work then Tkinter is properly installed&gt;&gt;&gt;root = Tkinter.Tk()  # you should see a new empty window</pre>	If there is a problem, try again from a new terminal session or after logging out and back in again. If it still doesn't work, debug the installation:	<ul>		<li>If "_tkinter" cannot be loaded, then python was not built with tcl/tk support. If this is a pre-built python, you probably have to build your own (though you may be able to find instructions for adding _tkinter to your particular python). If this is a python you just built, make sure you really are running that version (and not a built-in version) and review the instructions above and Python's installation instructions.		<li>If you see "error while loading shared libraries: libtk8.4.so", then perhaps LD_LIBRARY_PATH is not defined or is mis-defined.		<li>An excellent fallback (if you didn't already do this) is to install tcl/tk and python from source (as described above).	</ul>		<li>Download and install <a href="http://numeric.scipy.org/">Numeric</a>.	<ul>		<li>Some recent versions (including 23.7) do not install on linux without extra fuss. If you have trouble, try installing version 23.1 (which works fine with TUI), or if you really want to run a more modern version for some reason, then google for advice.	</ul>		<li>Download and install <a href="http://www.stsci.edu/resources/software_hardware/numarray">numarray</a>. It should install with no fuss.		<li>Download and install <a href="http://www.stsci.edu/resources/software_hardware/pyfits">pyfits</a>. Installation consists of copying pyfits.py into Python's site-packages directory, which you can locate using:<pre>% python&gt;&gt;&gt;import sys&gt;&gt;&gt;sys.path</pre>	<p>Then change the file ownership and permissions of pyfits.py to match the other files in site-packages.		<li>Download and install <a href="http://www.pythonware.com/products/pil/">Python Imaging Library</a>. Build it with support for Tkinter, jpeglib and zlib support (zlib may be unnecessary but leave it out at your own risk). Read the README file carefully because this requires some precursor packages.		<li>Download and install <a href="http://www.speech.kth.se/snack/index.html">Snack Sound Toolkit</a>.	<ul>		<li>Install snack into one of tcl's standard package locations. You can find these by executing tclsh and issuing the command <code>echo $auto_path</code>. If the snack files end up in a nonstandard location (and you can't simply move them) then you must define environment variable TCLLIBPATH to load snack.		<li>If not using a binary distribution, build snack from source. Read the installation instructions carefully because you will probably have to edit a make file.		<li>Install tkSnack.py, the python interface to snack, by following the instructions in the python directory. If you obtained a binary version of snack that did not include python support, download a source distribution of snack for this step.	</ul>		<li>Download and install <a href="http://hea-www.harvard.edu/RD/ds9/">ds9 and xpa</a> (these are <a href="#ds9option">optional</a> but highly recommended).	<li>Download <a href="http://tycho.apo.nmsu.edu:81/TUI-images">TUI Source</a> and unpack in some convenient directory.	<li><a name="tuishellscript"></a>Create a shell script named "tui" on your normal binary path (e.g. /usr/local/bin), as follows:<pre>#!/bin/tcshsetenv LD_LIBRARY_PATH /usr/local/lib # or wherever your libraries gopython <i>path_to_runtui</i>/runtui.py # the path depends on where you unpacked TUI</pre>	<ul>		<li>The first line may have to be adapted to your environment.		<li>If you have more than one version of python installed on your system, please replace <code>python</code> with the full path to the correct version (such as <code>/usr/local/bin/python</code>).		<li>Make sure the file is executable (e.g. <code>chmod +x tui</code>).	</ul>		<li>You may wish to create additional shell scripts to run the previous release and/or the beta version of TUI. To avoid editing these scripts as new versions come out, choose a standard name for the top level of each TUI distribution, such as "tui" for the current release, "tuiold" for the previous release and "tuibeta" for the current beta, if any.		<li>Test everything by typing "tui". It should launch. Note: if you use tcsh then you probably have to type "rehash" before "tui" will work.		<li>If snack does not load, try setting environment variable TCLLIBPATH in your <a href="#tuishellscript">tui shell script</a>.</ul><h2><a name="Windows"></a>Installing on Windows</h2><p>There is not yet a binary Windows installer for TUI, though Daniel Andrews is working on one. Meanwhile, you can install TUI for Windows from source as follows<p>Note: please download current release versions of everything.<ul>	<li>Download and install <a href="http://www.python.org">Python</a> for Windows.		<li>Download and install Mark Hammonds <a href="http://sourceforge.net/projects/pywin32/">pywin32</a> package.		<li>Download and install <a href="http://numeric.scipy.org/">Numeric</a>.		<li>Download and install <a href="http://www.stsci.edu/resources/software_hardware/numarray">numarray</a>.		<li>Download and install <a href="http://www.stsci.edu/resources/software_hardware/pyfits">pyfits</a>. Installation consists of copying pyfits.py into Python's site-packages directory, which you can locate using:<pre>% python&gt;&gt;&gt;import sys&gt;&gt;&gt;sys.path</pre>	<p>Then change the file ownership and permissions of pyfits.py to match the other files in site-packages.		<li>Download and install <a href="http://www.pythonware.com/products/pil/">Python Imaging Library</a>.		<li>Install the snack sound library as follows:	<ul>		<li>Download and unpack  <a href="http://www.speech.kth.se/snack/download.html">Snack</a>: get the <b>Binary release for Windows with Python...</b>. Be sure to match the correct version of python. If you don't already have software to unpack this archive, one option is to download <a href="http://stuffit.com">StuffIt Expander</a> (free for archive expansion).		<li>Follow the installation instructions in the unpacked archive. As of snack 2.2.8 for Python 2.3 this simply consisted of copying one file and one folder.	</ul>		<li>Download and install <a href="http://hea-www.harvard.edu/RD/ds9/">ds9 and xpa</a> (these are <a href="#ds9option">optional</a> but highly recommended) as follows:	<ul>		<li>ds9 must go in your standard program files directory. This should be the default suggested by the installer. On a typical English system ds9.exe ends up in C:\\Program Files\ds9\.		<li>the xpa executables must go in <b>the same directory as ds9.exe</b>. This is <b>not</b> the default. To avoid any danger of overwriting files, you may wish to use the default from the installer and then move the executables (that's how I did it, but I have no idea if it's necessary).		<li>The problem is that ds9 3.0.3 (the current release) cannot find xpa in its default location.	</ul>	<li>Download and unpack <a href="http://tycho.apo.nmsu.edu:81/TUI-images">TUI Source</a>: TUI_<i>vers</i>_Source.zip.	<li>Look inside the unpacked directory. You should see a file <code>runtui.py</code>; double-click that file to run TUI. There is also a Windows icon <code>\misc\TUI.ico</code> you may wish to use.	<li>To make TUI easier to run, put an alias of <code>runtui.py</code> on the desktop.</ul><p>If TUI does not run, run the python interpreter (<code>Start/Programs/Python2.3/python (command line)</code>) and type the test commands shown at the beginning of the <a href="#Unix">Unix installation instructions</a>.<h2><a name="History"></a>History</h2><ul>	<li>2005-09-30 Fixed the installation instructions for ds9 and xpa on MacOS X and Windows.	<li>2005-09-23 Increased the urgency of ds9 and xpa. Noted that a Windows installer is in the works.	<li>2005-06-22 Added ds9 and xpa to the optional packages.	<li>2005-03-15 Added numarray and PIL to the required packages. Expanded the unix installation instructions to discuss environment variables LD_LIBRARY_PATH and TCLLIBPATH.	<li>2004-10-06 Corrected the windows installation instructions.	<li>2004-09-03 Added Windows installation instructions based on information kindly supplied by Jack Dembicky. Improved the MacOS X installation instructions.	<li>2004-03-03 Modified unix notes for the new, simpler way to run TUI. Updated the Mac X11 notes because an X11 installer is now available for MacOS X 10.3 and is no longer available for 10.2.	<li>2004-02-05 Modified Notes for MacOS X to include one additional common Aqua Tk bug (menus showing up in the wrong place) and removed the note about incorporating TUI additions (since that is done in a more standard fashion in TUI 0.83).	<li>2004-01-23 Modified to the MacOS X binary. Added a link to the TUI downloads (thanks for the reminder, Nicole Silvestri).	<li>2003-12-23 Modified the unix info to suggest an executable script tui instead of environment mods. Updates the Mac info for Panther (MacOS X 10.3).	<li>2003-11-17 Added snack installation.	<li>2003-08-28 Added a note about the need for X11 on unix and corrected a test (root = Tk() -&gt; root = Tkinter.Tk()). Thanks to Bill Ketzeback. Overhauled the MacOS X installation instructions.</ul></body></html>